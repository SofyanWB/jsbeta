{"version":3,"file":"static/js/2668.7dfc7d92.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/PurgeOptions.js","../node_modules/@arcgis/core/layers/StreamLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";var t;let i=t=class extends o{constructor(){super(...arguments),this.age=null,this.ageReceived=null,this.displayCount=null,this.maxObservations=1}clone(){return new t({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}};e([r({type:Number,json:{write:!0}})],i.prototype,\"age\",void 0),e([r({type:Number,json:{write:!0}})],i.prototype,\"ageReceived\",void 0),e([r({type:Number,json:{write:!0}})],i.prototype,\"displayCount\",void 0),e([r({type:Number,json:{write:!0}})],i.prototype,\"maxObservations\",void 0),i=t=e([s(\"esri.layers.support.PurgeOptions\")],i);const p=i;export{p as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import t from\"../PopupTemplate.js\";import\"../renderers/ClassBreaksRenderer.js\";import\"../renderers/DictionaryRenderer.js\";import\"../renderers/DotDensityRenderer.js\";import\"../renderers/HeatmapRenderer.js\";import\"../renderers/PieChartRenderer.js\";import\"../renderers/Renderer.js\";import\"../renderers/SimpleRenderer.js\";import\"../renderers/UniqueValueRenderer.js\";import{read as r}from\"../renderers/support/jsonUtils.js\";import{rendererTypes as i,webSceneRendererTypes as o}from\"../renderers/support/types.js\";import s from\"../request.js\";import n from\"../core/Error.js\";import{handlesGroup as a}from\"../core/handleUtils.js\";import p from\"../core/Logger.js\";import{MultiOriginJSONMixin as l}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as m}from\"../core/promiseUtils.js\";import{property as d}from\"../core/accessorSupport/decorators/property.js\";import{Integer as c}from\"../core/accessorSupport/ensureType.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{reader as u}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import{featureGeometryTypeKebabDictionary as f}from\"../geometry/support/typeUtils.js\";import h from\"./Layer.js\";import{ArcGISService as g}from\"./mixins/ArcGISService.js\";import{BlendLayer as j}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as w}from\"./mixins/CustomParametersMixin.js\";import{FeatureEffectLayer as v}from\"./mixins/FeatureEffectLayer.js\";import{FeatureReductionLayer as b}from\"./mixins/FeatureReductionLayer.js\";import{OperationalLayer as I}from\"./mixins/OperationalLayer.js\";import{PortalLayer as S}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as x}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as R}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as T}from\"./mixins/TemporalLayer.js\";import{labelsVisible as P,legendEnabled as F,maxScale as U,minScale as L,popupEnabled as D,screenSizePerspectiveEnabled as k,url as E}from\"./support/commonProperties.js\";import{createDefaultRenderer as O}from\"./support/featureLayerUtils.js\";import C from\"./support/Field.js\";import{defineFieldProperties as _}from\"./support/fieldProperties.js\";import{fixRendererFields as A,fixTimeInfoFields as N}from\"./support/fieldUtils.js\";import G from\"./support/LabelClass.js\";import{reader as J}from\"./support/labelingInfo.js\";import M from\"./support/PurgeOptions.js\";import{loadStyleRenderer as V}from\"../renderers/support/styleUtils.js\";import q from\"../rest/support/Query.js\";import{createPopupTemplate as z}from\"../support/popupUtils.js\";import $ from\"../symbols/support/ElevationInfo.js\";import W from\"../geometry/SpatialReference.js\";import B from\"../geometry/Extent.js\";const Q=_();function H(e,t){return new n(\"layer:unsupported\",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}let K=class extends(b(v(j(T(R(x(g(I(S(l(w(h)))))))))))){constructor(...e){super(...e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType=\"ArcGISStreamLayer\",this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new M,this.refreshInterval=0,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=W.WGS84,this.type=\"stream\",this.url=null,this.updateInterval=300,this.useViewTime=!0,this.webSocketUrl=null}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}load(e){if(!(\"WebSocket\"in globalThis))return this.addResolvingPromise(Promise.reject(new n(\"stream-layer:websocket-unsupported\",\"WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service.\"))),Promise.resolve(this);const t=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Stream Service\",\"Feed\"]},e).catch(m).then((()=>this._fetchService(t)))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set(\"featureReduction\",t)}set renderer(e){A(e,this.fieldsIndex),this._set(\"renderer\",e)}readRenderer(e,t,i){t=t.layerDefinition||t;const o=t.drawingInfo?.renderer;if(o){const e=r(o,t,i)||void 0;return e||p.getLogger(this).error(\"Failed to create renderer\",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),e}return O(t,i)}async connect(e){const[{createConnection:t}]=await Promise.all([import(\"./graphics/sources/connections/createConnection.js\"),this.load()]),r=this.geometryType?f.toJSON(this.geometryType):null,{customParameters:i=null,definitionExpression:o=null,geometryDefinition:s=null,maxReconnectionAttempts:n=0,maxReconnectionInterval:p=20,spatialReference:l=this.spatialReference}=e||this.createConnectionParameters(),m=t(this.parsedUrl,this.spatialReference,l,r,{geometry:s,where:o},n,p,i??void 0),d=a([this.on(\"send-message-to-socket\",(e=>m.sendMessageToSocket(e))),this.on(\"send-message-to-client\",(e=>m.sendMessageToClient(e)))]);return m.once(\"destroy\",d.remove),m}createConnectionParameters(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}createPopupTemplate(e){return z(this,e)}createQuery(){const e=new q;return e.returnGeometry=!0,e.outFields=[\"*\"],e.where=this.definitionExpression||\"1=1\",e}getFieldDomain(e,t){if(!this.fields)return null;let r=null;return this.fields.some((t=>(t.name===e&&(r=t.domain),!!r))),r}getField(e){return this.fieldsIndex.get(e)}serviceSupportsSpatialReference(e){return!0}sendMessageToSocket(e){this.emit(\"send-message-to-socket\",e)}sendMessageToClient(e){this.emit(\"send-message-to-client\",e)}write(e,t){const r=t?.messages;return this.webSocketUrl?(r?.push(H(this,\"using a custom websocket connection cannot be written to web scenes and web maps\")),null):this.parsedUrl?super.write(e,t):(r?.push(H(this,\"using a client-side only connection without a url cannot be written to web scenes and web maps\")),null)}async _fetchService(e){if(!!!this.webSocketUrl&&this.parsedUrl){if(!this.sourceJSON){const{data:t}=await s(this.parsedUrl.path,{query:{f:\"json\",...this.customParameters,...this.parsedUrl.query},responseType:\"json\",signal:e});this.sourceJSON=t}}else{if(!this.timeInfo?.trackIdField)throw new n(\"stream-layer:missing-metadata\",\"The stream layer trackIdField must be specified.\");if(!this.objectIdField){const e=this.fields.find((e=>\"oid\"===e.type))?.name;if(!e)throw new n(\"stream-layer:missing-metadata\",\"The stream layer objectIdField must be specified.\");this.objectIdField=e}if(!this.fields)throw new n(\"stream-layer:missing-metadata\",\"The stream layer fields must be specified.\");if(this.fields.some((e=>e.name===this.objectIdField))||this.fields.push(new C({name:this.objectIdField,alias:this.objectIdField,type:\"oid\"})),!this.geometryType)throw new n(\"stream-layer:missing-metadata\",\"The stream layer geometryType must be specified.\");this.webSocketUrl&&(this.url=this.webSocketUrl)}return this.read(this.sourceJSON,{origin:\"service\",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl}),A(this.renderer,this.fieldsIndex),N(this.timeInfo,this.fieldsIndex),this.objectIdField||(this.objectIdField=\"__esri_stream_id__\"),V(this,{origin:\"service\"})}};e([d({type:String})],K.prototype,\"copyright\",void 0),e([d({readOnly:!0})],K.prototype,\"defaultPopupTemplate\",null),e([d({type:String,json:{name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],K.prototype,\"definitionExpression\",void 0),e([d({type:String})],K.prototype,\"displayField\",void 0),e([d({type:$})],K.prototype,\"elevationInfo\",void 0),e([d({json:{origins:{\"web-map\":{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-scene\":{read:!1,write:!1}}}})],K.prototype,\"featureReduction\",null),e([d(Q.fields)],K.prototype,\"fields\",void 0),e([d(Q.fieldsIndex)],K.prototype,\"fieldsIndex\",void 0),e([d({type:B,json:{name:\"layerDefinition.definitionGeometry\",write:!0}})],K.prototype,\"geometryDefinition\",void 0),e([d({type:f.apiValues,json:{read:{reader:f.read}}})],K.prototype,\"geometryType\",void 0),e([d(P)],K.prototype,\"labelsVisible\",void 0),e([d({type:[G],json:{read:{source:\"layerDefinition.drawingInfo.labelingInfo\",reader:J},write:{target:\"layerDefinition.drawingInfo.labelingInfo\"}}})],K.prototype,\"labelingInfo\",void 0),e([d(F)],K.prototype,\"legendEnabled\",void 0),e([d({type:[\"show\",\"hide\"]})],K.prototype,\"listMode\",void 0),e([d({type:c})],K.prototype,\"maxReconnectionAttempts\",void 0),e([d({type:c})],K.prototype,\"maxReconnectionInterval\",void 0),e([d(U)],K.prototype,\"maxScale\",void 0),e([d(L)],K.prototype,\"minScale\",void 0),e([d({type:String})],K.prototype,\"objectIdField\",void 0),e([d({value:\"ArcGISStreamLayer\",type:[\"ArcGISStreamLayer\"]})],K.prototype,\"operationalLayerType\",void 0),e([d(D)],K.prototype,\"popupEnabled\",void 0),e([d({type:t,json:{name:\"popupInfo\",write:!0}})],K.prototype,\"popupTemplate\",void 0),e([d({type:M})],K.prototype,\"purgeOptions\",void 0),e([d({json:{read:!1,write:!1}})],K.prototype,\"refreshInterval\",void 0),e([d({types:i,json:{origins:{service:{write:{target:\"drawingInfo.renderer\",enabled:!1}},\"web-scene\":{name:\"layerDefinition.drawingInfo.renderer\",types:o,write:!0}},write:{target:\"layerDefinition.drawingInfo.renderer\"}}})],K.prototype,\"renderer\",null),e([u(\"service\",\"renderer\",[\"drawingInfo.renderer\",\"defaultSymbol\"]),u(\"renderer\",[\"layerDefinition.drawingInfo.renderer\",\"layerDefinition.defaultSymbol\"])],K.prototype,\"readRenderer\",null),e([d(k)],K.prototype,\"screenSizePerspectiveEnabled\",void 0),e([d()],K.prototype,\"sourceJSON\",void 0),e([d({type:W,json:{origins:{service:{read:{source:\"spatialReference\"}}}}})],K.prototype,\"spatialReference\",void 0),e([d({json:{read:!1}})],K.prototype,\"type\",void 0),e([d(E)],K.prototype,\"url\",void 0),e([d({type:Number})],K.prototype,\"updateInterval\",void 0),e([d({json:{read:!1,write:!1}})],K.prototype,\"useViewTime\",void 0),e([d({type:String})],K.prototype,\"webSocketUrl\",void 0),K=e([y(\"esri.layers.StreamLayer\")],K);const X=K;export{X as default};\n"],"names":["t","i","arguments","age","ageReceived","displayCount","maxObservations","this","o","e","r","type","Number","json","write","prototype","p","s","Q","_","H","n","title","id","declaredClass","layer","K","copyright","definitionExpression","displayField","elevationInfo","fields","fieldsIndex","geometryDefinition","geometryType","labelsVisible","labelingInfo","legendEnabled","maxReconnectionAttempts","maxReconnectionInterval","maxScale","minScale","objectIdField","operationalLayerType","popupEnabled","popupTemplate","purgeOptions","M","refreshInterval","screenSizePerspectiveEnabled","sourceJSON","spatialReference","W","url","updateInterval","useViewTime","webSocketUrl","globalThis","addResolvingPromise","Promise","reject","resolve","signal","loadFromPortal","supportedTypes","catch","m","then","_fetchService","get","createPopupTemplate","set","_normalizeFeatureReduction","_set","A","layerDefinition","drawingInfo","renderer","error","rendererDefinition","context","O","all","load","createConnection","f","createConnectionParameters","customParameters","l","parsedUrl","geometry","where","d","a","on","sendMessageToSocket","sendMessageToClient","once","remove","z","q","returnGeometry","outFields","some","name","domain","emit","messages","push","path","query","responseType","data","timeInfo","trackIdField","find","C","alias","read","origin","portalItem","portal","N","V","b","v","j","T","R","x","g","I","S","w","h","String","readOnly","enabled","allowNull","$","origins","B","reader","P","G","source","J","target","F","c","U","L","value","D","types","service","u","k","E","X","y"],"sourceRoot":""}