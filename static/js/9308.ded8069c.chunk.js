"use strict";(self.webpackChunkjakartasatubeta=self.webpackChunkjakartasatubeta||[]).push([[9308],{79347:function(e,t,r){r.d(t,{e:function(){return o}});var i,n,a,s=r(84397),l={exports:{}};i=l,n=function(){function e(e,r,n){n=n||2;var a,s,l,u,h,f,y,c=r&&r.length,x=c?r[0]*n:e.length,v=t(e,0,x,n,!0),d=[];if(!v||v.next===v.prev)return d;if(c&&(v=o(e,r,v,n)),e.length>80*n){a=l=e[0],s=u=e[1];for(var p=n;p<x;p+=n)(h=e[p])<a&&(a=h),(f=e[p+1])<s&&(s=f),h>l&&(l=h),f>u&&(u=f);y=0!==(y=Math.max(l-a,u-s))?1/y:0}return i(v,d,n,a,s,y),d}function t(e,t,r,i,n){var a,s;if(n===P(e,t,r,i)>0)for(a=t;a<r;a+=i)s=Z(a,e[a],e[a+1],s);else for(a=r-i;a>=t;a-=i)s=Z(a,e[a],e[a+1],s);if(s&&_(s,s.next)){var l=s.next;T(s),s=l}return s}function r(e,t){if(!e)return e;t||(t=e);var r,i=e;do{if(r=!1,i.steiner||!_(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{var n=i.prev;if(T(i),(i=t=n)===i.next)break;r=!0}}while(r||i!==t);return t}function i(e,t,o,u,h,f,y){if(e){!y&&f&&c(e,u,h,f);for(var x,v,d=e;e.prev!==e.next;)if(x=e.prev,v=e.next,f?a(e,u,h,f):n(e))t.push(x.i/o),t.push(e.i/o),t.push(v.i/o),T(e),e=v.next,d=v.next;else if((e=v)===d){y?1===y?i(e=s(r(e),t,o),t,o,u,h,f,2):2===y&&l(e,t,o,u,h,f):i(r(e),t,o,u,h,f,1);break}}}function n(e){var t=e.prev,r=e,i=e.next;if(g(t,r,i)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(d(t.x,t.y,r.x,r.y,i.x,i.y,n.x,n.y)&&g(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function a(e,t,r,i){var n=e.prev,a=e,s=e.next;if(g(n,a,s)>=0)return!1;for(var l=n.x<a.x?n.x<s.x?n.x:s.x:a.x<s.x?a.x:s.x,o=n.y<a.y?n.y<s.y?n.y:s.y:a.y<s.y?a.y:s.y,u=n.x>a.x?n.x>s.x?n.x:s.x:a.x>s.x?a.x:s.x,h=n.y>a.y?n.y>s.y?n.y:s.y:a.y>s.y?a.y:s.y,f=x(l,o,t,r,i),y=x(u,h,t,r,i),c=e.prevZ,v=e.nextZ;c&&c.z>=f&&v&&v.z<=y;){if(c!==e.prev&&c!==e.next&&d(n.x,n.y,a.x,a.y,s.x,s.y,c.x,c.y)&&g(c.prev,c,c.next)>=0)return!1;if(c=c.prevZ,v!==e.prev&&v!==e.next&&d(n.x,n.y,a.x,a.y,s.x,s.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;c&&c.z>=f;){if(c!==e.prev&&c!==e.next&&d(n.x,n.y,a.x,a.y,s.x,s.y,c.x,c.y)&&g(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;v&&v.z<=y;){if(v!==e.prev&&v!==e.next&&d(n.x,n.y,a.x,a.y,s.x,s.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function s(e,t,i){var n=e;do{var a=n.prev,s=n.next.next;!_(a,s)&&m(a,n,n.next,s)&&w(a,s)&&w(s,a)&&(t.push(a.i/i),t.push(n.i/i),t.push(s.i/i),T(n),T(n.next),n=e=s),n=n.next}while(n!==e);return r(n)}function l(e,t,n,a,s,l){var o=e;do{for(var u=o.next.next;u!==o.prev;){if(o.i!==u.i&&p(o,u)){var h=b(o,u);return o=r(o,o.next),h=r(h,h.next),i(o,t,n,a,s,l),void i(h,t,n,a,s,l)}u=u.next}o=o.next}while(o!==e)}function o(e,i,n,a){var s,l,o,h=[];for(s=0,l=i.length;s<l;s++)(o=t(e,i[s]*a,s<l-1?i[s+1]*a:e.length,a,!1))===o.next&&(o.steiner=!0),h.push(v(o));for(h.sort(u),s=0;s<h.length;s++)n=r(n=f(h[s],n),n.next);return n}function u(e,t){return e.x-t.x}function h(e){if(e.next.prev===e)return e;for(var t=e;;){var r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function f(e,t){var i=function(e,t){var r,i=t,n=e.x,a=e.y,s=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var l=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(l<=n&&l>s){if(s=l,l===n){if(a===i.y)return i;if(a===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!r)return null;if(n===s)return r;var o,u=r,h=r.x,f=r.y,c=1/0;i=r;do{n>=i.x&&i.x>=h&&n!==i.x&&d(a<f?n:s,a,h,f,a<f?s:n,a,i.x,i.y)&&(o=Math.abs(a-i.y)/(n-i.x),w(i,e)&&(o<c||o===c&&(i.x>r.x||i.x===r.x&&y(r,i)))&&(r=i,c=o)),i=i.next}while(i!==u);return r}(e,t);if(!i)return t;var n=b(i,e),a=r(i,i.next),s=h(n);return r(s,s.next),a=h(a),h(t===i?a:t)}function y(e,t){return g(e.prev,e,t.prev)<0&&g(t.next,e,e.next)<0}function c(e,t,r,i){var n=e;do{null===n.z&&(n.z=x(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,r,i,n,a,s,l,o,u=1;do{for(r=e,e=null,a=null,s=0;r;){for(s++,i=r,l=0,t=0;t<u&&(l++,i=i.nextZ);t++);for(o=u;l>0||o>0&&i;)0!==l&&(0===o||!i||r.z<=i.z)?(n=r,r=r.nextZ,l--):(n=i,i=i.nextZ,o--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;r=i}a.nextZ=null,u*=2}while(s>1)}(n)}function x(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function v(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function d(e,t,r,i,n,a,s,l){return(n-s)*(t-l)-(e-s)*(a-l)>=0&&(e-s)*(i-l)-(r-s)*(t-l)>=0&&(r-s)*(a-l)-(n-s)*(i-l)>=0}function p(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&m(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(w(e,t)&&w(t,e)&&function(e,t){var r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)&&(g(e.prev,e,t.prev)||g(e,t.prev,t))||_(e,t)&&g(e.prev,e,e.next)>0&&g(t.prev,t,t.next)>0)}function g(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function _(e,t){return e.x===t.x&&e.y===t.y}function m(e,t,r,i){var n=k(g(e,t,r)),a=k(g(e,t,i)),s=k(g(r,i,e)),l=k(g(r,i,t));return n!==a&&s!==l||!(0!==n||!I(e,r,t))||!(0!==a||!I(e,i,t))||!(0!==s||!I(r,e,i))||!(0!==l||!I(r,t,i))}function I(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function k(e){return e>0?1:e<0?-1:0}function w(e,t){return g(e.prev,e,e.next)<0?g(e,t,e.next)>=0&&g(e,e.prev,t)>=0:g(e,t,e.prev)<0||g(e,e.next,t)<0}function b(e,t){var r=new M(e.i,e.x,e.y),i=new M(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function Z(e,t,r,i){var n=new M(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function M(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(e,t,r,i){for(var n=0,a=t,s=r-i;a<r;a+=i)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}return e.deviation=function(e,t,r,i){var n=t&&t.length,a=n?t[0]*r:e.length,s=Math.abs(P(e,0,a,r));if(n)for(var l=0,o=t.length;l<o;l++){var u=t[l]*r,h=l<o-1?t[l+1]*r:e.length;s-=Math.abs(P(e,u,h,r))}var f=0;for(l=0;l<i.length;l+=3){var y=i[l]*r,c=i[l+1]*r,x=i[l+2]*r;f+=Math.abs((e[y]-e[x])*(e[c+1]-e[y+1])-(e[y]-e[c])*(e[x+1]-e[y+1]))}return 0===s&&0===f?0:Math.abs((f-s)/s)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},i=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var s=0;s<t;s++)r.vertices.push(e[n][a][s]);n>0&&(i+=e[n-1].length,r.holes.push(i))}return r},e},void 0!==(a=n())&&(i.exports=a);var o=(0,s.g)(l.exports)},48035:function(e,t,r){r.d(t,{b:function(){return c},j:function(){return u}});var i=r(74165),n=r(15861),a=r(65905),s=r(93169),l=null,o=null;function u(){return h.apply(this,arguments)}function h(){return(h=(0,n.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(l||(l=f()),l));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return y.apply(this,arguments)}function y(){return y=(0,n.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,s.Z)("esri-csp-restrictions")){e.next=6;break}return e.next=3,r.e(5948).then(r.bind(r,5948)).then((function(e){return e.l}));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,r.e(7069).then(r.bind(r,97069)).then((function(e){return e.l}));case 8:e.t0=e.sent;case 9:return t=e.t0,e.next=12,t.load({locateFile:function(e){return(0,a.V)("esri/core/libs/libtess/".concat(e))}});case 12:o=e.sent;case 13:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function c(e,t){var r=Math.max(e.length,128e3);return o.triangulate(e,t,r)}},79308:function(e,t,r){r.r(t),r.d(t,{default:function(){return oe}});var i=r(37762),n=r(74165),a=r(15861),s=r(15671),l=r(43144),o=r(66978),u=r(10106),h=r(93433),f=r(40316),y=r(99201);function c(e){return 746===e||747===e||!(e<4352)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103&&!(e>=65097&&e<=65103)||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351&&!(e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=12592&&e<=12687||e>=43360&&e<=43391||e>=55216&&e<=55295||e>=4352&&e<=4607||e>=44032&&e<=55215||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12688&&e<=12703||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543&&12540!==e||e>=65280&&e<=65519&&!(65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||e>=65104&&e<=65135&&!(e>=65112&&e<=65118||e>=65123&&e<=65126)||e>=5120&&e<=5759||e>=6320&&e<=6399||e>=65040&&e<=65055||e>=19904&&e<=19967||e>=40960&&e<=42127||e>=42128&&e<=42191)}function x(e){return!(e<11904)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=65280&&e<=65519||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543||e>=65040&&e<=65055||e>=42128&&e<=42191||e>=40960&&e<=42127)}function v(e){switch(e){case 10:case 32:case 38:case 40:case 41:case 43:case 45:case 47:case 173:case 183:case 8203:case 8208:case 8211:case 8231:return!0}return!1}function d(e){switch(e){case 9:case 10:case 11:case 12:case 13:case 32:return!0}return!1}var p,g=r(12233),_=24,m=function(){function e(t,r,i,n,a,l,o){(0,s.Z)(this,e),this._glyphItems=t,this._maxWidth=r,this._lineHeight=i,this._letterSpacing=n,this._hAnchor=a,this._vAnchor=l,this._justify=o}return(0,l.Z)(e,[{key:"getShaping",value:function(e,t,r){var n,a=this._letterSpacing,s=this._lineHeight,l=this._justify,o=this._maxWidth,u=[],h=0,f=0,y=(0,i.Z)(e);try{for(y.s();!(n=y.n()).done;){var p=n.value.codePointAt(0);if(null!=p){var g,_=r&&c(p),m=void 0,I=(0,i.Z)(this._glyphItems);try{for(I.s();!(g=I.n()).done;){if(m=g.value[p])break}}catch(q){I.e(q)}finally{I.f()}u.push({codePoint:p,x:h,y:f,vertical:_,glyphMosaicItem:m}),m&&(h+=m.metrics.advance+a)}}}catch(q){y.e(q)}finally{y.f()}var k=h;o>0&&(k=h/Math.max(1,Math.ceil(h/o)));for(var w=e.includes("\u200b"),b=[],Z=u.length,T=0;T<Z-1;T++){var M=u[T].codePoint,P=x(M);if(v(M)||P){var B=0;if(10===M)B-=1e4;else if(P&&w)B+=150;else{40!==M&&65288!==M||(B+=50);var L=u[T+1].codePoint;41!==L&&65289!==L||(B+=50)}b.push(this._buildBreak(T+1,u[T].x,k,b,B,!1))}}for(var V=this._optimalBreaks(this._buildBreak(Z,h,k,b,0,!0)),D=0,E=t?-s:s,A=0,R=0;R<V.length;R++){for(var S=V[R],C=A;C<S&&d(u[C].codePoint);)u[C].glyphMosaicItem=null,++C;for(var N=S-1;N>C&&d(u[N].codePoint);)u[N].glyphMosaicItem=null,--N;if(C<=N){for(var F=u[C].x,O=C;O<=N;O++)u[O].x-=F,u[O].y=f;var U=u[N].x;u[N].glyphMosaicItem&&(U+=u[N].glyphMosaicItem.metrics.advance),D=Math.max(U,D),l&&this._applyJustification(u,C,N)}A=S,f+=E}if(u.length>0){var z=V.length-1,G=(l-this._hAnchor)*D,H=(-this._vAnchor*(z+1)+.5)*s;t&&z&&(H+=z*s);var j,W=(0,i.Z)(u);try{for(W.s();!(j=W.n()).done;){var K=j.value;K.x+=G,K.y+=H}}catch(q){W.e(q)}finally{W.f()}}return u.filter((function(e){return e.glyphMosaicItem}))}},{key:"_breakScore",value:function(e,t,r,i){var n=(e-t)*(e-t);return i?e<t?n/2:2*n:n+Math.abs(r)*r}},{key:"_buildBreak",value:function(e,t,r,n,a,s){var l,o=null,u=this._breakScore(t,r,a,s),h=(0,i.Z)(n);try{for(h.s();!(l=h.n()).done;){var f=l.value,y=t-f.x,c=this._breakScore(y,r,a,s)+f.score;c<=u&&(o=f,u=c)}}catch(x){h.e(x)}finally{h.f()}return{index:e,x:t,score:u,previousBreak:o}}},{key:"_optimalBreaks",value:function(e){return e?this._optimalBreaks(e.previousBreak).concat(e.index):[]}},{key:"_applyJustification",value:function(e,t,r){for(var i=e[r],n=i.vertical?_:i.glyphMosaicItem?i.glyphMosaicItem.metrics.advance:0,a=(i.x+n)*this._justify,s=t;s<=r;s++)e[s].x-=a}}],[{key:"getTextBox",value:function(e,t){if(!e.length)return null;var r,n=1/0,a=1/0,s=0,l=0,o=(0,i.Z)(e);try{for(o.s();!(r=o.n()).done;){var u=r.value,h=u.glyphMosaicItem.metrics.advance,f=u.x,y=u.y-17,c=f+h,x=y+t;n=Math.min(n,f),s=Math.max(s,c),a=Math.min(a,y),l=Math.max(l,x)}}catch(v){o.e(v)}finally{o.f()}return{x:n,y:a,width:s-n,height:l-a}}},{key:"getBox",value:function(e){if(!e.length)return null;var t,r=1/0,n=1/0,a=0,s=0,l=(0,i.Z)(e);try{for(l.s();!(t=l.n()).done;){var o=t.value,u=o.glyphMosaicItem.metrics,h=u.height,f=u.left,y=u.top,c=u.width,x=o.x,v=o.y-(h-Math.abs(y)),d=x+c+f,p=v+h;r=Math.min(r,x),a=Math.max(a,d),n=Math.min(n,v),s=Math.max(s,p)}}catch(g){l.e(g)}finally{l.f()}return{x:r,y:n,width:a-r,height:s-n}}},{key:"addDecoration",value:function(e,t){var r=e.length;if(0!==r){for(var i=e[0].x+e[0].glyphMosaicItem.metrics.left,n=e[0].y,a=1;a<r;a++){var s=e[a];if(s.y!==n){var l=e[a-1].x+e[a-1].glyphMosaicItem.metrics.left+e[a-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:i,y:n+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new g.Z(4,0,4,8),metrics:{width:l-i,height:8,left:0,top:0,advance:0},page:0,code:0}}),n=s.y,i=s.x+s.glyphMosaicItem.metrics.left}}var o=e[r-1].x+e[r-1].glyphMosaicItem.metrics.left+e[r-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:i,y:n+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new g.Z(4,0,4,8),metrics:{width:o-i,height:8,left:0,top:0,advance:0},page:0,code:0}})}}}]),e}(),I=r(46618),k=r(21391),w=.5,b=(0,l.Z)((function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;(0,s.Z)(this,e),this.x=t,this.y=r,this.angle=i,this.segment=n,this.minzoom=a})),Z=(0,l.Z)((function e(t,r,i,n,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:w,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:y.B1;(0,s.Z)(this,e),this.anchor=t,this.labelAngle=r,this.glyphAngle=i,this.page=n,this.alternateVerticalGlyph=a,this.minzoom=l,this.maxzoom=o})),T=(0,l.Z)((function e(t,r,i,n,a,l,o,u,h,f,y,c){(0,s.Z)(this,e),this.tl=t,this.tr=r,this.bl=i,this.br=n,this.mosaicRect=a,this.labelAngle=l,this.minAngle=o,this.maxAngle=u,this.anchor=h,this.minzoom=f,this.maxzoom=y,this.page=c})),M=(0,l.Z)((function e(t){(0,s.Z)(this,e),this.shapes=t})),P=function(){function e(){(0,s.Z)(this,e)}return(0,l.Z)(e,[{key:"getIconPlacement",value:function(e,t,r){var i=new f.E9(e.x,e.y),n=r.rotationAlignment===k.aF.MAP,a=r.keepUpright,s=r.rotate*y.DT;n&&(s+=e.angle);var l=new M([]);return r.allowOverlap&&r.ignorePlacement||!I.Bf||(l.iconColliders=[]),this._addIconPlacement(l,i,t,r,s),n&&a&&this._addIconPlacement(l,i,t,r,s+y.JJ),l}},{key:"_addIconPlacement",value:function(e,t,r,i,n){var a=r.pixelRatio,s=r.width/a,l=r.height/a,o=i.offset,u=o[0],h=o[1];switch(i.anchor){case k.nR.CENTER:u-=s/2,h-=l/2;break;case k.nR.LEFT:h-=l/2;break;case k.nR.RIGHT:u-=s,h-=l/2;break;case k.nR.TOP:u-=s/2;break;case k.nR.BOTTOM:u-=s/2,h-=l;break;case k.nR.TOP_LEFT:break;case k.nR.BOTTOM_LEFT:h-=l;break;case k.nR.TOP_RIGHT:u-=s;break;case k.nR.BOTTOM_RIGHT:u-=s,h-=l}var c=r.rect,x=2/a,v=u-x,d=h-x,p=v+c.width/a,g=d+c.height/a,_=new f.E9(v,d),m=new f.E9(p,g),b=new f.E9(v,g),Z=new f.E9(p,d);if(0!==n){var M=Math.cos(n),P=Math.sin(n);_.rotate(M,P),m.rotate(M,P),b.rotate(M,P),Z.rotate(M,P)}var B=new T(_,Z,b,m,c,n,0,256,t,w,y.B1,0);if(e.shapes.push(B),(!i.allowOverlap||!i.ignorePlacement)&&I.Bf){var L=i.size,V=i.padding,D={xTile:t.x,yTile:t.y,dxPixels:u*L-V,dyPixels:h*L-V,hard:!i.optional,partIndex:0,width:s*L+2*V,height:l*L+2*V,angle:n,minLod:w,maxLod:y.B1};e.iconColliders.push(D)}}},{key:"getTextPlacement",value:function(e,t,r,n){var a,s=new f.E9(e.x,e.y),l=n.rotate*y.DT,o=n.rotationAlignment===k.aF.MAP,u=n.keepUpright,h=n.padding,c=w,x=o?e.angle:0,v=e.segment>=0&&o,d=n.allowOverlap&&n.ignorePlacement?null:[],p=[],g=!v,I=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,P=I,B=b,L=(v||o)&&u,V=n.size/_,D=!1,E=(0,i.Z)(t);try{for(E.s();!(a=E.n()).done;){if(a.value.vertical){D=!0;break}}}catch(Ue){E.e(Ue)}finally{E.f()}var A,R=0,S=0;if(!v&&D){var C=m.getTextBox(t,n.lineHeight*_);switch(n.anchor){case k.nR.LEFT:R=C.height/2,S=-C.width/2;break;case k.nR.RIGHT:R=-C.height/2,S=C.width/2;break;case k.nR.TOP:R=C.height/2,S=C.width/2;break;case k.nR.BOTTOM:R=-C.height/2,S=-C.width/2;break;case k.nR.TOP_LEFT:R=C.height;break;case k.nR.BOTTOM_LEFT:S=-C.width;break;case k.nR.TOP_RIGHT:S=C.width;break;case k.nR.BOTTOM_RIGHT:R=-C.height}}R+=n.offset[0]*_,S+=n.offset[1]*_;var N,F=(0,i.Z)(t);try{for(F.s();!(N=F.n()).done;){var O=N.value,U=O.glyphMosaicItem;if(U&&!U.rect.isEmpty){var z=U.rect,G=U.metrics,H=U.page;if(d&&g){if(void 0!==A&&A!==O.y){var j=void 0,W=void 0,K=void 0,q=void 0;D?(j=-B+R,W=I+S,K=B-P,q=b-I):(j=I+R,W=P+S,K=b-I,q=B-P);var Y={xTile:e.x,yTile:e.y,dxPixels:j*V-h,dyPixels:W*V-h,hard:!n.optional,partIndex:1,width:K*V+2*h,height:q*V+2*h,angle:l,minLod:w,maxLod:y.B1};d.push(Y),I=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,P=I,B=b}A=O.y}var J=[];if(v){var X=.5*U.metrics.width,Q=(O.x+G.left-4+X)*V*8;if(c=this._placeGlyph(e,c,Q,r,e.segment,1,O.vertical,H,J),u&&(c=this._placeGlyph(e,c,Q,r,e.segment,-1,O.vertical,H,J)),c>=2)break}else J.push(new Z(s,x,x,H,!1)),o&&u&&J.push(new Z(s,x+y.JJ,x+y.JJ,H,!1));var $=O.x+G.left,ee=O.y-17-G.top,te=$+G.width,re=ee+G.height,ie=void 0,ne=void 0,ae=void 0,se=void 0,le=void 0,oe=void 0,ue=void 0,he=void 0;if(!v&&D)if(O.vertical){var fe=($+te)/2-G.height/2,ye=(ee+re)/2+G.width/2;ie=new f.E9(-ye-4+R,fe-4+S),ne=new f.E9(ie.x+z.width,ie.y+z.height),ae=new f.E9(ie.x,ne.y),se=new f.E9(ne.x,ie.y)}else ie=new f.E9(4-ee+R,$-4+S),ne=new f.E9(ie.x-z.height,ie.y+z.width),ae=new f.E9(ne.x,ie.y),se=new f.E9(ie.x,ne.y);else ie=new f.E9($-4+R,ee-4+S),ne=new f.E9(ie.x+z.width,ie.y+z.height),ae=new f.E9(ie.x,ne.y),se=new f.E9(ne.x,ie.y);for(var ce=0,xe=J;ce<xe.length;ce++){var ve=xe[ce],de=void 0,pe=void 0,ge=void 0,_e=void 0;if(ve.alternateVerticalGlyph){if(!le){var me=(ee+re)/2+S;le=new f.E9(($+te)/2+R-G.height/2-4,me+G.width/2+4),oe=new f.E9(le.x+z.height,le.y-z.width),ue=new f.E9(oe.x,le.y),he=new f.E9(le.x,oe.y)}de=le,pe=ue,ge=he,_e=oe}else de=ie,pe=ae,ge=se,_e=ne;var Ie=ee,ke=re,we=ve.glyphAngle+l;if(0!==we){var be,Ze,Te,Me,Pe,Be,Le=Math.cos(we),Ve=Math.sin(we);de=de.clone(),pe=null===(be=pe)||void 0===be?void 0:be.clone(),ge=null===(Ze=ge)||void 0===Ze?void 0:Ze.clone(),_e=null===(Te=_e)||void 0===Te?void 0:Te.clone(),de.rotate(Le,Ve),null!==(Me=_e)&&void 0!==Me&&Me.rotate(Le,Ve),null!==(Pe=pe)&&void 0!==Pe&&Pe.rotate(Le,Ve),null===(Be=ge)||void 0===Be||Be.rotate(Le,Ve)}var De=0,Ee=256;if(v&&D?O.vertical?ve.alternateVerticalGlyph?(De=32,Ee=96):(De=224,Ee=32):(De=224,Ee=96):(De=192,Ee=64),p.push(new T(de,ge,pe,_e,z,ve.labelAngle,De,Ee,ve.anchor,ve.minzoom,ve.maxzoom,ve.page)),d&&(!L||this._legible(ve.labelAngle)))if(g)$<I&&(I=$),Ie<P&&(P=Ie),te>b&&(b=te),ke>B&&(B=ke);else if(ve.minzoom<2){var Ae={xTile:e.x,yTile:e.y,dxPixels:($+R)*V-h,dyPixels:(Ie+R)*V-h,hard:!n.optional,partIndex:1,width:(te-$)*V+2*h,height:(ke-Ie)*V+2*h,angle:we,minLod:ve.minzoom,maxLod:ve.maxzoom};d.push(Ae)}}}}}catch(Ue){F.e(Ue)}finally{F.f()}if(c>=2)return null;if(d&&g){var Re,Se,Ce,Ne;D?(Re=-B+R,Se=I+S,Ce=B-P,Ne=b-I):(Re=I+R,Se=P+S,Ce=b-I,Ne=B-P);var Fe={xTile:e.x,yTile:e.y,dxPixels:Re*V-h,dyPixels:Se*V-h,hard:!n.optional,partIndex:1,width:Ce*V+2*h,height:Ne*V+2*h,angle:l,minLod:w,maxLod:y.B1};d.push(Fe)}var Oe=new M(p);return d&&d.length>0&&(Oe.textColliders=d),Oe}},{key:"_legible",value:function(e){var t=(0,y.Or)(e);return t<65||t>=193}},{key:"_placeGlyph",value:function(e,t,r,i,n,a,s,l,o){var u=a,h=u<0?(0,y.DQ)(e.angle+y.JJ,y._U):e.angle,c=0;r<0&&(u*=-1,r*=-1,c=y.JJ),u>0&&++n;var x=new f.E9(e.x,e.y),v=i[n],d=y.B1;if(i.length<=n)return d;for(;;){var p=v.x-x.x,g=v.y-x.y,_=Math.sqrt(p*p+g*g),m=Math.max(r/_,t),I=p/_,k=g/_,w=(0,y.DQ)(Math.atan2(k,I)+c,y._U);if(o.push(new Z(x,h,w,l,!1,m,d)),s&&o.push(new Z(x,h,w,l,!0,m,d)),m<=t)return m;x=v.clone();do{if(n+=u,i.length<=n||n<0)return m;v=i[n]}while(x.isEqual(v));var b=v.x-x.x,T=v.y-x.y,M=Math.sqrt(b*b+T*T);b*=_/M,T*=_/M,x.x-=b,x.y-=T,d=m}}}]),e}(),B=r(29439),L=r(78084),V=r(48035);!function(e){e[e.moveTo=1]="moveTo",e[e.lineTo=2]="lineTo",e[e.close=7]="close"}(p||(p={}));var D=function(){function e(t,r){(0,s.Z)(this,e),this.values={},this._geometry=void 0,this._pbfGeometry=null;for(var i=r.keys,n=r.values,a=t.asUnsafe();a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var l=a.getMessage().asUnsafe(),o=this.values;!l.empty();){var u=l.getUInt32(),h=l.getUInt32();o[i[u]]=n[h]}l.release();break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}return(0,l.Z)(e,[{key:"getGeometry",value:function(e){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;var t,r,i=this._pbfGeometry.asUnsafe();this._pbfGeometry=null,e?e.reset(this.type):t=[];for(var n,a=p.moveTo,s=0,l=0,o=0;!i.empty();){if(0===s){var u=i.getUInt32();a=7&u,s=u>>3}switch(s--,a){case p.moveTo:l+=i.getSInt32(),o+=i.getSInt32(),e?e.moveTo(l,o):t&&(r&&t.push(r),(r=[]).push(new f.E9(l,o)));break;case p.lineTo:l+=i.getSInt32(),o+=i.getSInt32(),e?e.lineTo(l,o):r&&r.push(new f.E9(l,o));break;case p.close:e?e.close():r&&!r[0].equals(l,o)&&r.push(r[0].clone());break;default:throw i.release(),new Error("Invalid path operation")}}return e?n=e.result():t&&(r&&t.push(r),n=t),i.release(),this._geometry=n,n}}]),e}(),E=r(60136),A=r(29388),R=r(3283),S=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(){return(0,s.Z)(this,r),t.call(this,12)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r){var i=this.array;i.push(e),i.push(t),i.push(r)}}]),r}(R.Z),C=(R.Z,function(){function e(t){(0,s.Z)(this,e),this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();for(var r=t.asUnsafe();r.next();)switch(r.tag()){case 1:this.name=r.getString();break;case 3:this.keys.push(r.getString());break;case 4:this.values.push(r.processMessage(e._parseValue));break;case 5:this.extent=r.getUInt32();break;default:r.skip()}}return(0,l.Z)(e,[{key:"getData",value:function(){return this._pbfLayer}}],[{key:"_parseValue",value:function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null}}]),e}()),N=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r,i,n,a,s,l,o,u,f,y){var c=this.array,x=R.Z.i1616to32(e,t);c.push(x);var v=31;x=R.Z.i8888to32(Math.round(v*r),Math.round(v*i),Math.round(v*n),Math.round(v*a)),c.push(x),x=R.Z.i8888to32(Math.round(v*s),Math.round(v*l),Math.round(v*o),Math.round(v*u)),c.push(x),x=R.Z.i1616to32(f,0),c.push(x),y&&c.push.apply(c,(0,h.Z)(y))}}]),r}(R.Z),F=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r){var i=this.array;i.push(R.Z.i1616to32(e,t)),r&&i.push.apply(i,(0,h.Z)(r))}}]),r}(R.Z),O=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r,i,n,a,s){var l=this.array,o=this.index,u=R.Z.i1616to32(e,t);l.push(u);return u=R.Z.i8888to32(Math.round(15*r),Math.round(15*i),n,a),l.push(u),s&&l.push.apply(l,(0,h.Z)(s)),o}}]),r}(R.Z),U=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r,i,n,a,s,l,o,u,f,c){var x=this.array,v=R.Z.i1616to32(e,t);x.push(v),v=R.Z.i1616to32(Math.round(8*r),Math.round(8*i)),x.push(v),v=R.Z.i8888to32(n/4,a/4,l,o),x.push(v),v=R.Z.i8888to32(0,(0,y.Or)(s),10*u,Math.min(10*f,255)),x.push(v),c&&x.push.apply(x,(0,h.Z)(c))}}]),r}(R.Z),z=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r,i,n){var a=this.array,s=R.Z.i1616to32(2*e+r,2*t+i);a.push(s),n&&a.push.apply(a,(0,h.Z)(n))}}]),r}(R.Z),G=function(){function e(t,r,i){(0,s.Z)(this,e),this.layerExtent=4096,this._features=[],this.layer=t,this.zoom=r,this._spriteInfo=i,this._filter=t.getFeatureFilter()}return(0,l.Z)(e,[{key:"pushFeature",value:function(e){this._filter&&!this._filter.filter(e,this.zoom)||this._features.push(e)}},{key:"hasFeatures",value:function(){return this._features.length>0}},{key:"getResources",value:function(e,t,r){}}]),e}(),H=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(e,i,n,a,l){var o;return(0,s.Z)(this,r),(o=t.call(this,e,i,n)).type=u.al.CIRCLE,o._circleVertexBuffer=a,o._circleIndexBuffer=l,o}return(0,l.Z)(r,[{key:"circleIndexStart",get:function(){return this._circleIndexStart}},{key:"circleIndexCount",get:function(){return this._circleIndexCount}},{key:"processFeatures",value:function(e){var t=this._circleVertexBuffer,r=this._circleIndexBuffer;this._circleIndexStart=3*r.index,this._circleIndexCount=0;var n=this.layer,a=this.zoom;e&&e.setExtent(this.layerExtent);var s,l=(0,i.Z)(this._features);try{for(l.s();!(s=l.n()).done;){var o=s.value,u=o.getGeometry(e);if(u){var h,f=n.circleMaterial.encodeAttributes(o,a,n),y=(0,i.Z)(u);try{for(y.s();!(h=y.n()).done;){var c=h.value;if(c){var x,v=(0,i.Z)(c);try{for(v.s();!(x=v.n()).done;){var d=x.value,p=t.index;t.add(d.x,d.y,0,0,f),t.add(d.x,d.y,0,1,f),t.add(d.x,d.y,1,0,f),t.add(d.x,d.y,1,1,f),r.add(p,p+1,p+2),r.add(p+1,p+2,p+3),this._circleIndexCount+=6}}catch(g){v.e(g)}finally{v.f()}}}}catch(g){y.e(g)}finally{y.f()}}}}catch(g){l.e(g)}finally{l.f()}}},{key:"serialize",value:function(){var e=6;e+=this.layerUIDs.length,e+=this._circleVertexBuffer.array.length,e+=this._circleIndexBuffer.array.length;var t=new Uint32Array(e),r=new Int32Array(t.buffer),i=0;t[i++]=this.type,t[i++]=this.layerUIDs.length;for(var n=0;n<this.layerUIDs.length;n++)t[i++]=this.layerUIDs[n];t[i++]=this._circleIndexStart,t[i++]=this._circleIndexCount,t[i++]=this._circleVertexBuffer.array.length;for(var a=0;a<this._circleVertexBuffer.array.length;a++)r[i++]=this._circleVertexBuffer.array[a];t[i++]=this._circleIndexBuffer.array.length;for(var s=0;s<this._circleIndexBuffer.array.length;s++)t[i++]=this._circleIndexBuffer.array[s];return t.buffer}}]),r}(G),j=r(22213),W=r(79347),K=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(e,i,n,a,l,o,h){var f;return(0,s.Z)(this,r),(f=t.call(this,e,i,n)).type=u.al.FILL,f._patternMap=new Map,f._fillVertexBuffer=a,f._fillIndexBuffer=l,f._outlineVertexBuffer=o,f._outlineIndexBuffer=h,f}return(0,l.Z)(r,[{key:"fillIndexStart",get:function(){return this._fillIndexStart}},{key:"fillIndexCount",get:function(){return this._fillIndexCount}},{key:"outlineIndexStart",get:function(){return this._outlineIndexStart}},{key:"outlineIndexCount",get:function(){return this._outlineIndexCount}},{key:"getResources",value:function(e,t,r){var n=this.layer,a=this.zoom,s=n.getPaintProperty("fill-pattern");if(s)if(s.isDataDriven){var l,o=(0,i.Z)(this._features);try{for(o.s();!(l=o.n()).done;){var u=l.value;t(s.getValue(a,u),!0)}}catch(h){o.e(h)}finally{o.f()}}else t(s.getValue(a),!0)}},{key:"processFeatures",value:function(e){this._fillIndexStart=3*this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=3*this._outlineIndexBuffer.index,this._outlineIndexCount=0;var t=this.layer,r=this.zoom,n=t.fillMaterial,a=t.outlineMaterial,s=t.hasDataDrivenFill,l=t.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);var o=t.getPaintProperty("fill-pattern"),u=null===o||void 0===o?void 0:o.isDataDriven,h=!o&&t.getPaintValue("fill-antialias",r);if(t.outlineUsesFillColor){if(h&&!t.hasDataDrivenOpacity){var f=t.getPaintValue("fill-opacity",r),y=t.getPaintValue("fill-opacity",r+1);f<1&&y<1&&(h=!1)}if(h&&!t.hasDataDrivenColor){var c=t.getPaintValue("fill-color",r),x=t.getPaintValue("fill-color",r+1);c[3]<1&&x[3]<1&&(h=!1)}}var v=this._features,d=null===e||void 0===e?void 0:e.validateTessellation;if(u){var p,g=[],_=(0,i.Z)(v);try{for(_.s();!(p=_.n()).done;){var m=p.value,I=o.getValue(r,m),k=this._spriteInfo[I];if(k&&k.rect){var w=n.encodeAttributes(m,r,t,k),b=h&&l?a.encodeAttributes(m,r,t):[],Z=m.getGeometry(e);g.push({ddFillAttributes:w,ddOutlineAttributes:b,page:k.page,geometry:Z}),g.sort((function(e,t){return e.page-t.page}));var T,M=(0,i.Z)(g);try{for(M.s();!(T=M.n()).done;){var P=T.value,B=P.ddFillAttributes,L=P.ddOutlineAttributes,V=P.page,D=P.geometry;this._processFeature(D,h,t.outlineUsesFillColor,B,L,d,V)}}catch(F){M.e(F)}finally{M.f()}}}}catch(F){_.e(F)}finally{_.f()}}else{var E,A=(0,i.Z)(v);try{for(A.s();!(E=A.n()).done;){var R=E.value,S=s?n.encodeAttributes(R,r,t):null,C=h&&l?a.encodeAttributes(R,r,t):null,N=R.getGeometry(e);this._processFeature(N,h,t.outlineUsesFillColor,S,C,d)}}catch(F){A.e(F)}finally{A.f()}}}},{key:"serialize",value:function(){var e=10;e+=this.layerUIDs.length,e+=this._fillVertexBuffer.array.length,e+=this._fillIndexBuffer.array.length,e+=this._outlineVertexBuffer.array.length,e+=this._outlineIndexBuffer.array.length,e+=3*this._patternMap.size+1;var t=new Uint32Array(e),r=new Int32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var a=0;a<this.layerUIDs.length;a++)t[n++]=this.layerUIDs[a];t[n++]=this._fillIndexStart,t[n++]=this._fillIndexCount,t[n++]=this._outlineIndexStart,t[n++]=this._outlineIndexCount;var s=this._patternMap,l=s.size;if(t[n++]=l,l>0){var o,u=(0,i.Z)(s);try{for(u.s();!(o=u.n()).done;){var h=(0,B.Z)(o.value,2),f=h[0],y=(0,B.Z)(h[1],2),c=y[0],x=y[1];t[n++]=f,t[n++]=c,t[n++]=x}}catch(_){u.e(_)}finally{u.f()}}t[n++]=this._fillVertexBuffer.array.length;for(var v=0;v<this._fillVertexBuffer.array.length;v++)r[n++]=this._fillVertexBuffer.array[v];t[n++]=this._fillIndexBuffer.array.length;for(var d=0;d<this._fillIndexBuffer.array.length;d++)t[n++]=this._fillIndexBuffer.array[d];t[n++]=this._outlineVertexBuffer.array.length;for(var p=0;p<this._outlineVertexBuffer.array.length;p++)r[n++]=this._outlineVertexBuffer.array[p];t[n++]=this._outlineIndexBuffer.array.length;for(var g=0;g<this._outlineIndexBuffer.array.length;g++)t[n++]=this._outlineIndexBuffer.array[g];return t.buffer}},{key:"_processFeature",value:function(e,t,i,n,a,s,l){if(e){var o=e.length,u=!a||0===a.length;if(t&&(!i||u))for(var h=0;h<o;h++)this._processOutline(e[h],a);for(var f,y=0;y<o;y++){var c=r._area(e[y]);c>32?(void 0!==f&&this._processFill(e,f,n,s,l),f=[y]):c<-32&&void 0!==f&&f.push(y)}void 0!==f&&this._processFill(e,f,n,s,l)}}},{key:"_processOutline",value:function(e,t){var r,i,n,a=this._outlineVertexBuffer,s=this._outlineIndexBuffer,l=s.index,o=new f.E9(0,0),u=new f.E9(0,0),h=new f.E9(0,0),y=-1,c=-1,x=-1,v=-1,d=-1,p=!1,g=e.length;if(!(g<2)){for(var _=e[0],m=e[g-1];g&&m.isEqual(_);)m=e[--g-1];if(!(g-0<2)){for(var I=0;I<g;++I){0===I?(r=e[g-1],i=e[0],n=e[1],o.assignSub(i,r),o.normalize(),o.rightPerpendicular()):(r=i,i=n,n=I!==g-1?e[I+1]:e[0],o.assign(u));var k=this._isClipEdge(r,i);-1===v&&(p=k),u.assignSub(n,i),u.normalize(),u.rightPerpendicular();var w=o.x*u.y-o.y*u.x;h.assignAdd(o,u),h.normalize();var b=-h.x*-o.x+-h.y*-o.y,Z=Math.abs(0!==b?1/b:1);Z>8&&(Z=8),w>=0?(x=a.add(i.x,i.y,o.x,o.y,0,1,t),-1===v&&(v=x),y>=0&&c>=0&&x>=0&&!k&&s.add(y,c,x),c=a.add(i.x,i.y,Z*-h.x,Z*-h.y,0,-1,t),-1===d&&(d=c),y>=0&&c>=0&&x>=0&&!k&&s.add(y,c,x),y=c,c=x,x=a.add(i.x,i.y,h.x,h.y,0,1,t),y>=0&&c>=0&&x>=0&&!k&&s.add(y,c,x),c=a.add(i.x,i.y,u.x,u.y,0,1,t),y>=0&&c>=0&&x>=0&&!k&&s.add(y,c,x)):(x=a.add(i.x,i.y,Z*h.x,Z*h.y,0,1,t),-1===v&&(v=x),y>=0&&c>=0&&x>=0&&!k&&s.add(y,c,x),c=a.add(i.x,i.y,-o.x,-o.y,0,-1,t),-1===d&&(d=c),y>=0&&c>=0&&x>=0&&!k&&s.add(y,c,x),y=c,c=x,x=a.add(i.x,i.y,-h.x,-h.y,0,-1,t),y>=0&&c>=0&&x>=0&&!k&&s.add(y,c,x),(y=a.add(i.x,i.y,-u.x,-u.y,0,-1,t))>=0&&c>=0&&x>=0&&!k&&s.add(y,c,x))}y>=0&&c>=0&&v>=0&&!p&&s.add(y,c,v),y>=0&&v>=0&&d>=0&&!p&&s.add(y,d,v),this._outlineIndexCount+=3*(s.index-l)}}}},{key:"_processFill",value:function(e,t,r,n,a){var s;t.length>1&&(s=[]);var l,o=0,u=(0,i.Z)(t);try{for(u.s();!(l=u.n()).done;){var h=l.value;0!==o&&s.push(o),o+=e[h].length}}catch(C){u.e(C)}finally{u.f()}var f,y=2*o,c=j.Z.acquire(),x=(0,i.Z)(t);try{for(x.s();!(f=x.n()).done;)for(var v=f.value,d=e[v],p=d.length,g=0;g<p;++g)c.push(d[g].x,d[g].y)}catch(C){x.e(C)}finally{x.f()}var _=(0,W.e)(c,s,2);if(W.e.deviation(c,s,2,_)>0){var m=t.map((function(t){return e[t].length})),I=(0,V.b)(c,m),k=I.buffer,w=I.vertexCount;if(w>0){for(var b=this._fillVertexBuffer.index,Z=0;Z<w;Z++)this._fillVertexBuffer.add(k[2*Z],k[2*Z+1],r);for(var T=0;T<w;T+=3){var M=b+T;this._fillIndexBuffer.add(M,M+1,M+2)}if(void 0!==a){var P=this._patternMap,B=P.get(a);B?B[1]+=w:P.set(a,[this._fillIndexStart+this._fillIndexCount,w])}this._fillIndexCount+=w}}else{var L=_.length;if(L>0){for(var D=this._fillVertexBuffer.index,E=0;E<y;)this._fillVertexBuffer.add(c[E++],c[E++],r);for(var A=0;A<L;)this._fillIndexBuffer.add(D+_[A++],D+_[A++],D+_[A++]);if(void 0!==a){var R=this._patternMap,S=R.get(a);S?S[1]+=L:R.set(a,[this._fillIndexStart+this._fillIndexCount,L])}this._fillIndexCount+=L}}j.Z.release(c)}},{key:"_isClipEdge",value:function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)}}],[{key:"_area",value:function(e){for(var t=0,r=e.length-1,i=0;i<r;i++)t+=(e[i].x-e[i+1].x)*(e[i].y+e[i+1].y);return.5*(t+=(e[r].x-e[0].x)*(e[r].y+e[0].y))}}]),r}(G),q=r(82010),Y=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(e,i,n,a,l){var o;return(0,s.Z)(this,r),(o=t.call(this,e,i,n)).type=u.al.LINE,o._tessellationOptions={pixelCoordRatio:8,halfWidth:0,offset:0},o._patternMap=new Map,o.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_ddValues:null},o.tessellationProperties._lineVertexBuffer=a,o.tessellationProperties._lineIndexBuffer=l,o._lineTessellator=new q.z(J(o.tessellationProperties),X(o.tessellationProperties),e.canUseThinTessellation),o}return(0,l.Z)(r,[{key:"lineIndexStart",get:function(){return this._lineIndexStart}},{key:"lineIndexCount",get:function(){return this._lineIndexCount}},{key:"getResources",value:function(e,t,r){var n=this.layer,a=this.zoom,s=n.getPaintProperty("line-pattern"),l=n.getPaintProperty("line-dasharray"),o=n.getLayoutProperty("line-cap");if(s||l){var u=(null===o||void 0===o?void 0:o.getValue(a))||0,h=null===o||void 0===o?void 0:o.isDataDriven,f=null===s||void 0===s?void 0:s.isDataDriven,y=null===l||void 0===l?void 0:l.isDataDriven;if(f||y){var c,x=(0,i.Z)(this._features);try{for(x.s();!(c=x.n()).done;){var v=c.value;t(f?s.getValue(a,v):this._getDashArrayKey(v,a,n,l,h,o,u))}}catch(p){x.e(p)}finally{x.f()}}else if(s)t(s.getValue(a));else if(l){var d=l.getValue(a);t(n.getDashKey(d,u))}}}},{key:"processFeatures",value:function(e){var t,r,n,a,s,l;this._lineIndexStart=3*this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;var o=this.layer,u=this.zoom,h=this._features,f=this._tessellationOptions,y=o.hasDataDrivenLine,c=o.lineMaterial;e&&e.setExtent(this.layerExtent);var x,v=o.getPaintProperty("line-pattern"),d=o.getPaintProperty("line-dasharray"),p=null===v||void 0===v?void 0:v.isDataDriven,g=null===d||void 0===d?void 0:d.isDataDriven,_=null!==(t=x=o.getLayoutProperty("line-cap"))&&void 0!==t&&t.isDataDriven?x:null,m=_?null:o.getLayoutValue("line-cap",u),I=m||0,k=!!_,w=null!==(r=x=o.getLayoutProperty("line-join"))&&void 0!==r&&r.isDataDriven?x:null,b=w?null:o.getLayoutValue("line-join",u),Z=null!==(n=x=o.getLayoutProperty("line-miter-limit"))&&void 0!==n&&n.isDataDriven?x:null,T=Z?null:o.getLayoutValue("line-miter-limit",u),M=null!==(a=x=o.getLayoutProperty("line-round-limit"))&&void 0!==a&&a.isDataDriven?x:null,P=M?null:o.getLayoutValue("line-round-limit",u),B=null!==(s=x=o.getPaintProperty("line-width"))&&void 0!==s&&s.isDataDriven?x:null,L=B?null:o.getPaintValue("line-width",u),V=null!==(l=x=o.getPaintProperty("line-offset"))&&void 0!==l&&l.isDataDriven?x:null,D=V?null:o.getPaintValue("line-offset",u);if(p||g){var E,A=[],R=(0,i.Z)(h);try{for(R.s();!(E=R.n()).done;){var S=E.value,C=p?v.getValue(u,S):this._getDashArrayKey(S,u,o,d,k,_,I),N=this._spriteInfo[C];if(N&&N.rect){var F=c.encodeAttributes(S,u,o,N),O=S.getGeometry(e);A.push({ddAttributes:F,page:N.page,cap:_?_.getValue(u,S):m,join:w?w.getValue(u,S):b,miterLimit:Z?Z.getValue(u,S):T,roundLimit:M?M.getValue(u,S):P,halfWidth:.5*(B?B.getValue(u,S):L),offset:V?V.getValue(u,S):D,geometry:O})}}}catch(se){R.e(se)}finally{R.f()}A.sort((function(e,t){return e.page-t.page})),f.textured=!0;for(var U=0,z=A;U<z.length;U++){var G=z[U],H=G.ddAttributes,j=G.page,W=G.cap,K=G.join,q=G.miterLimit,Y=G.roundLimit,J=G.halfWidth,X=G.offset,Q=G.geometry;f.capType=W,f.joinType=K,f.miterLimit=q,f.roundLimit=Y,f.halfWidth=J,f.offset=X,this._processFeature(Q,H,j)}}else{if(v){var $=v.getValue(u),ee=this._spriteInfo[$];if(!ee||!ee.rect)return}f.textured=!(!v&&!d),f.capType=m,f.joinType=b,f.miterLimit=T,f.roundLimit=P,f.halfWidth=.5*L,f.offset=D;var te,re=(0,i.Z)(h);try{for(re.s();!(te=re.n()).done;){var ie=te.value,ne=y?c.encodeAttributes(ie,u,o):null;_&&(f.capType=_.getValue(u,ie)),w&&(f.joinType=w.getValue(u,ie)),Z&&(f.miterLimit=Z.getValue(u,ie)),M&&(f.roundLimit=M.getValue(u,ie)),B&&(f.halfWidth=.5*B.getValue(u,ie)),V&&(f.offset=V.getValue(u,ie));var ae=ie.getGeometry(e);this._processFeature(ae,ne)}}catch(se){re.e(se)}finally{re.f()}}}},{key:"serialize",value:function(){var e=6;e+=this.layerUIDs.length,e+=this.tessellationProperties._lineVertexBuffer.array.length,e+=this.tessellationProperties._lineIndexBuffer.array.length,e+=3*this._patternMap.size+1;var t=new Uint32Array(e),r=new Int32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var a=0;a<this.layerUIDs.length;a++)t[n++]=this.layerUIDs[a];t[n++]=this._lineIndexStart,t[n++]=this._lineIndexCount;var s=this._patternMap,l=s.size;if(t[n++]=l,l>0){var o,u=(0,i.Z)(s);try{for(u.s();!(o=u.n()).done;){var h=(0,B.Z)(o.value,2),f=h[0],y=(0,B.Z)(h[1],2),c=y[0],x=y[1];t[n++]=f,t[n++]=c,t[n++]=x}}catch(p){u.e(p)}finally{u.f()}}t[n++]=this.tessellationProperties._lineVertexBuffer.array.length;for(var v=0;v<this.tessellationProperties._lineVertexBuffer.array.length;v++)r[n++]=this.tessellationProperties._lineVertexBuffer.array[v];t[n++]=this.tessellationProperties._lineIndexBuffer.array.length;for(var d=0;d<this.tessellationProperties._lineIndexBuffer.array.length;d++)t[n++]=this.tessellationProperties._lineIndexBuffer.array[d];return t.buffer}},{key:"_processFeature",value:function(e,t,r){if(e)for(var i=e.length,n=0;n<i;n++)this._processGeometry(e[n],t,r)}},{key:"_processGeometry",value:function(e,t,r){if(!(e.length<2)){for(var i,n,a=e[0],s=1;s<e.length;)(i=e[s].x-a.x)*i+(n=e[s].y-a.y)*n<1e-6?e.splice(s,1):(a=e[s],++s);if(!(e.length<2)){var l=this.tessellationProperties._lineIndexBuffer,o=3*l.index;this._tessellationOptions.initialDistance=0,this._tessellationOptions.wrapDistance=65535,this.tessellationProperties._ddValues=t,this._lineTessellator.tessellate(e,this._tessellationOptions);var u=3*l.index-o;if(void 0!==r){var h=this._patternMap,f=h.get(r);f?f[1]+=u:h.set(r,[o+this._lineIndexCount,u])}this._lineIndexCount+=u}}}},{key:"_getDashArrayKey",value:function(e,t,r,i,n,a,s){var l=n?a.getValue(t,e):s,o=i.getValue(t,e);return r.getDashKey(o,l)}}]),r}(G),J=function(e){return function(t,r,i,n,a,s,l,o,u,h,f){return e._lineVertexBuffer.add(t,r,l,o,i,n,a,s,u,h,f,e._ddValues),e._lineVertexBuffer.index-1}},X=function(e){return function(t,r,i){e._lineIndexBuffer.add(t,r,i)}},Q=r(8961),$=r(92026),ee=r(643),te=r(44305);function re(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page-t.iconMosaicItem.page:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}var ie,ne=function(e){(0,E.Z)(r,e);var t=(0,A.Z)(r);function r(e,i,n,a,l,o,h,f){var y;return(0,s.Z)(this,r),(y=t.call(this,e,i,f.getSpriteItems())).type=u.al.SYMBOL,y._markerMap=new Map,y._glyphMap=new Map,y._glyphBufferDataStorage=new Map,y._isIconSDF=!1,y._iconVertexBuffer=n,y._iconIndexBuffer=a,y._textVertexBuffer=l,y._textIndexBuffer=o,y._placementEngine=h,y._workerTileHandler=f,y}return(0,l.Z)(r,[{key:"markerPageMap",get:function(){return this._markerMap}},{key:"glyphsPageMap",get:function(){return this._glyphMap}},{key:"symbolInstances",get:function(){return this._symbolInstances}},{key:"getResources",value:function(e,t,n){var a=this.layer,s=this.zoom;e&&e.setExtent(this.layerExtent);var l,o,u,h,f=a.getLayoutProperty("icon-image"),y=a.getLayoutProperty("text-field"),c=a.getLayoutProperty("text-transform"),x=a.getLayoutProperty("text-font"),v=[];f&&!f.isDataDriven&&(l=f.getValue(s)),y&&!y.isDataDriven&&(o=y.getValue(s)),c&&c.isDataDriven||(u=a.getLayoutValue("text-transform",s),c=null),x&&x.isDataDriven||(h=a.getLayoutValue("text-font",s),x=null);var d,p=(0,i.Z)(this._features);try{for(p.s();!(d=p.n()).done;){var g=d.value,_=g.getGeometry(e);if(_&&0!==_.length){var m=void 0,I=void 0;f&&((m=f.isDataDriven?f.getValue(s,g):this._replaceKeys(l,g.values))&&t(m));var w=!1;if(y&&(I=y.isDataDriven?y.getValue(s,g):this._replaceKeys(o,g.values))){switch(I=I.replaceAll("\\n","\n"),c&&(u=c.getValue(s,g)),u){case k._5.LOWERCASE:I=I.toLowerCase();break;case k._5.UPPERCASE:I=I.toUpperCase()}if(r._bidiEngine.hasBidiChar(I)){var b;b="rtl"===r._bidiEngine.checkContextual(I)?"IDNNN":"ICNNN",I=r._bidiEngine.bidiTransform(I,b,"VLYSN"),w=!0}if(I.length>0){x&&(h=x.getValue(s,g));var Z,T=(0,i.Z)(h);try{for(T.s();!(Z=T.n()).done;){var M=Z.value,P=n[M];P||(P=n[M]=new Set);var B,L=(0,i.Z)(I);try{for(L.s();!(B=L.n()).done;){var V=B.value.codePointAt(0);null!=V&&P.add(V)}}catch(A){L.e(A)}finally{L.f()}}}catch(A){T.e(A)}finally{T.f()}}}if(m||I){var D=a.getLayoutValue("symbol-sort-key",s,g),E={feature:g,sprite:m,label:I,rtl:w,geometry:_,hash:(I?(0,ee.hP)(I):0)^(m?(0,ee.hP)(m):0),priority:D,textFont:h};v.push(E)}}}}catch(A){p.e(A)}finally{p.f()}this._symbolFeatures=v}},{key:"processFeatures",value:function(e){e&&e.setExtent(this.layerExtent);var t,n=this.layer,a=this.zoom,s=n.getLayoutValue("symbol-placement",a),l=s!==k.R.POINT,o=8*n.getLayoutValue("symbol-spacing",a),u=n.getLayoutProperty("icon-image"),h=n.getLayoutProperty("text-field"),c=u?new te._L(n,a,l):null,x=h?new te.nj(n,a,l):null,v=this._workerTileHandler;u&&(t=v.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var d=[],p=1;x&&x.size&&(p=x.size/_);var g,I=x?x.maxAngle*y.DT:0,w=x?8*x.size:0,Z=(0,i.Z)(this._symbolFeatures);try{for(Z.s();!(g=Z.n()).done;){var T=g.value,M=void 0;c&&t&&T.sprite&&((M=t[T.sprite])&&M.sdf&&(this._isIconSDF=!0));var P=void 0;M&&c.update(a,T.feature);var B=0,L=T.label;if(L){(0,$.O3)(x),x.update(a,T.feature);var V=l&&x.rotationAlignment===k.aF.MAP?x.keepUpright:x.writingMode&&x.writingMode.includes(k.r1.VERTICAL),D=.5;switch(x.anchor){case k.nR.TOP_LEFT:case k.nR.LEFT:case k.nR.BOTTOM_LEFT:D=0;break;case k.nR.TOP_RIGHT:case k.nR.RIGHT:case k.nR.BOTTOM_RIGHT:D=1}var E=.5;switch(x.anchor){case k.nR.TOP_LEFT:case k.nR.TOP:case k.nR.TOP_RIGHT:E=0;break;case k.nR.BOTTOM_LEFT:case k.nR.BOTTOM:case k.nR.BOTTOM_RIGHT:E=1}var A=.5;switch(x.justify){case k.vL.AUTO:A=D;break;case k.vL.LEFT:A=0;break;case k.vL.RIGHT:A=1}var R=x.letterSpacing*_,S=l?0:x.maxWidth*_,C=x.lineHeight*_,N=T.textFont.map((function(e){return v.getGlyphItems(e)}));if((P=new m(N,S,C,R,D,E,A).getShaping(L,T.rtl,V))&&P.length>0){var F,O=1e30,U=-1e30,z=(0,i.Z)(P);try{for(z.s();!(F=z.n()).done;){var G=F.value;O=Math.min(O,G.x),U=Math.max(U,G.x)}}catch(ie){z.e(ie)}finally{z.f()}B=(U-O+48)*p*8}}var H,j=(0,i.Z)(T.geometry);try{for(j.s();!(H=j.n()).done;){var W=H.value,K=[];if(s===k.R.LINE){var q;if(null!==(q=P)&&void 0!==q&&q.length&&null!==x&&void 0!==x&&x.size){var Y=8*x.size*(2+Math.min(2,4*Math.abs(x.offset[1])));W=r._smoothVertices(W,Y)}r._pushAnchors(K,W,o,B)}else s===k.R.LINE_CENTER?r._pushCenterAnchor(K,W):T.feature.type===f.Vl.Polygon?r._pushCentroid(K,W):K.push(new b(W[0].x,W[0].y));for(var J=0,X=K;J<X.length;J++){var Q=X[J];if(!(Q.x<0||Q.x>4096||Q.y<0||Q.y>4096)&&(!(l&&B>0&&(null===x||void 0===x?void 0:x.rotationAlignment)===k.aF.MAP)||r._honorsTextMaxAngle(W,Q,B,I,w))){var ee={shaping:P,line:W,iconMosaicItem:M,anchor:Q,symbolFeature:T,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};d.push(ee),this._processFeature(ee,c,x)}}}}catch(ie){j.e(ie)}finally{j.f()}}}catch(ie){Z.e(ie)}finally{Z.f()}d.sort(re),this._addPlacedGlyphs(),this._symbolInstances=d}},{key:"serialize",value:function(){var e=11;e+=this.layerUIDs.length,e+=3*this.markerPageMap.size,e+=3*this.glyphsPageMap.size,e+=r._symbolsSerializationLength(this._symbolInstances),e+=this._iconVertexBuffer.array.length,e+=this._iconIndexBuffer.array.length,e+=this._textVertexBuffer.array.length,e+=this._textIndexBuffer.array.length;var t=new Uint32Array(e),n=new Int32Array(t.buffer),a=new Float32Array(t.buffer),s=0;t[s++]=this.type,t[s++]=this.layerUIDs.length;for(var l=0;l<this.layerUIDs.length;l++)t[s++]=this.layerUIDs[l];t[s++]=this._isIconSDF?1:0,t[s++]=this.markerPageMap.size;var o,u=(0,i.Z)(this.markerPageMap);try{for(u.s();!(o=u.n()).done;){var h=(0,B.Z)(o.value,2),f=h[0],y=(0,B.Z)(h[1],2),c=y[0],x=y[1];t[s++]=f,t[s++]=c,t[s++]=x}}catch(T){u.e(T)}finally{u.f()}t[s++]=this.glyphsPageMap.size;var v,d=(0,i.Z)(this.glyphsPageMap);try{for(d.s();!(v=d.n()).done;){var p=(0,B.Z)(v.value,2),g=p[0],_=(0,B.Z)(p[1],2),m=_[0],I=_[1];t[s++]=g,t[s++]=m,t[s++]=I}}catch(T){d.e(T)}finally{d.f()}t[s++]=this._iconVertexBuffer.index/4,t[s++]=this._textVertexBuffer.index/4,s=r.serializeSymbols(t,n,a,s,this._symbolInstances),t[s++]=this._iconVertexBuffer.array.length;for(var k=0;k<this._iconVertexBuffer.array.length;k++)n[s++]=this._iconVertexBuffer.array[k];t[s++]=this._iconIndexBuffer.array.length;for(var w=0;w<this._iconIndexBuffer.array.length;w++)t[s++]=this._iconIndexBuffer.array[w];t[s++]=this._textVertexBuffer.array.length;for(var b=0;b<this._textVertexBuffer.array.length;b++)n[s++]=this._textVertexBuffer.array[b];t[s++]=this._textIndexBuffer.array.length;for(var Z=0;Z<this._textIndexBuffer.array.length;Z++)t[s++]=this._textIndexBuffer.array[Z];return t.buffer}},{key:"_replaceKeys",value:function(e,t){return e.replaceAll(/{([^{}]+)}/g,(function(e,r){return r in t?t[r]:""}))}},{key:"_processFeature",value:function(e,t,r){var n=e.line,a=e.iconMosaicItem,s=e.shaping,l=e.anchor,o=this.zoom,u=this.layer,h=!!a,f=!0;h&&(f=(null===t||void 0===t?void 0:t.optional)||!a);var c,x,v=s&&s.length>0,d=!v||(null===r||void 0===r?void 0:r.optional);if(h&&(c=this._placementEngine.getIconPlacement(l,a,t)),(c||f)&&(v&&(x=this._placementEngine.getTextPlacement(l,s,n,r)),x||d)){if(c&&x||(d||f?d||x?f||c||(x=null):c=null:(c=null,x=null)),x){var p=u.hasDataDrivenText?u.textMaterial.encodeAttributes(e.symbolFeature.feature,o,u):null;if(this._storePlacedGlyphs(e,x.shapes,o,r.rotationAlignment,p),x.textColliders){e.textColliders=x.textColliders;var g,_=(0,i.Z)(x.textColliders);try{for(_.s();!(g=_.n()).done;){var m=g.value;m.minLod=Math.max(o+(0,y.k3)(m.minLod),0),m.maxLod=Math.min(o+(0,y.k3)(m.maxLod),25);var I=m.angle;if(I){var w=Math.cos(I),b=Math.sin(I),Z=m.dxPixels*w-m.dyPixels*b,T=m.dxPixels*b+m.dyPixels*w,M=(m.dxPixels+m.width)*w-m.dyPixels*b,P=(m.dxPixels+m.width)*b+m.dyPixels*w,B=m.dxPixels*w-(m.dyPixels+m.height)*b,L=m.dxPixels*b+(m.dyPixels+m.height)*w,V=(m.dxPixels+m.width)*w-(m.dyPixels+m.height)*b,D=(m.dxPixels+m.width)*b+(m.dyPixels+m.height)*w,E=Math.min(Z,M,B,V),A=Math.max(Z,M,B,V),R=Math.min(T,P,L,D),S=Math.max(T,P,L,D);m.dxPixels=E,m.dyPixels=R,m.width=A-E,m.height=S-R}}}catch(re){_.e(re)}finally{_.f()}}}if(c){var C=u.hasDataDrivenIcon?u.iconMaterial.encodeAttributes(e.symbolFeature.feature,o,u):null;if(this._addPlacedIcons(e,c.shapes,o,a.page,t.rotationAlignment===k.aF.VIEWPORT,C),c.iconColliders){e.iconColliders=c.iconColliders;var N,F=(0,i.Z)(c.iconColliders);try{for(F.s();!(N=F.n()).done;){var O=N.value;O.minLod=Math.max(o+(0,y.k3)(O.minLod),0),O.maxLod=Math.min(o+(0,y.k3)(O.maxLod),25);var U=O.angle;if(U){var z=Math.cos(U),G=Math.sin(U),H=O.dxPixels*z-O.dyPixels*G,j=O.dxPixels*G+O.dyPixels*z,W=(O.dxPixels+O.width)*z-O.dyPixels*G,K=(O.dxPixels+O.width)*G+O.dyPixels*z,q=O.dxPixels*z-(O.dyPixels+O.height)*G,Y=O.dxPixels*G+(O.dyPixels+O.height)*z,J=(O.dxPixels+O.width)*z-(O.dyPixels+O.height)*G,X=(O.dxPixels+O.width)*G+(O.dyPixels+O.height)*z,Q=Math.min(H,W,q,J),$=Math.max(H,W,q,J),ee=Math.min(j,K,Y,X),te=Math.max(j,K,Y,X);O.dxPixels=Q,O.dyPixels=ee,O.width=$-Q,O.height=te-ee}}}catch(re){F.e(re)}finally{F.f()}}}}}},{key:"_addPlacedIcons",value:function(e,t,r,n,a,s){var l,o=Math.max(r-1,0),u=this._iconVertexBuffer,h=this._iconIndexBuffer,f=this._markerMap,c=(0,i.Z)(t);try{for(c.s();!(l=c.n()).done;){var x=l.value,v=a?0:Math.max(r+(0,y.k3)(x.minzoom),o),d=a?25:Math.min(r+(0,y.k3)(x.maxzoom),25);if(!(d<=v)){var p=x.tl,g=x.tr,_=x.bl,m=x.br,I=x.mosaicRect,k=x.labelAngle,w=x.minAngle,b=x.maxAngle,Z=x.anchor,T=u.index,M=I.x,P=I.y,B=M+I.width,L=P+I.height,V=u.index;u.add(Z.x,Z.y,p.x,p.y,M,P,k,w,b,v,d,s),u.add(Z.x,Z.y,g.x,g.y,B,P,k,w,b,v,d,s),u.add(Z.x,Z.y,_.x,_.y,M,L,k,w,b,v,d,s),u.add(Z.x,Z.y,m.x,m.y,B,L,k,w,b,v,d,s),e.iconVertexRanges.length>0&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===V?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([V,4]),h.add(T,T+1,T+2),h.add(T+1,T+2,T+3),f.has(n)?f.get(n)[1]+=6:f.set(n,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}}catch(D){c.e(D)}finally{c.f()}}},{key:"_addPlacedGlyphs",value:function(){var e,t=this._textVertexBuffer,r=this._textIndexBuffer,n=this._glyphMap,a=(0,i.Z)(this._glyphBufferDataStorage);try{for(a.s();!(e=a.n()).done;){var s,l=(0,B.Z)(e.value,2),o=l[0],u=l[1],h=(0,i.Z)(u);try{for(h.s();!(s=h.n()).done;){var f=s.value,y=t.index,c=f.symbolInstance,x=f.ddAttributes,v=t.index;t.add(f.glyphAnchor[0],f.glyphAnchor[1],f.tl[0],f.tl[1],f.xmin,f.ymin,f.labelAngle,f.minAngle,f.maxAngle,f.minLod,f.maxLod,x),t.add(f.glyphAnchor[0],f.glyphAnchor[1],f.tr[0],f.tr[1],f.xmax,f.ymin,f.labelAngle,f.minAngle,f.maxAngle,f.minLod,f.maxLod,x),t.add(f.glyphAnchor[0],f.glyphAnchor[1],f.bl[0],f.bl[1],f.xmin,f.ymax,f.labelAngle,f.minAngle,f.maxAngle,f.minLod,f.maxLod,x),t.add(f.glyphAnchor[0],f.glyphAnchor[1],f.br[0],f.br[1],f.xmax,f.ymax,f.labelAngle,f.minAngle,f.maxAngle,f.minLod,f.maxLod,x),c.textVertexRanges.length>0&&c.textVertexRanges[0][0]+c.textVertexRanges[0][1]===v?c.textVertexRanges[0][1]+=4:c.textVertexRanges.push([v,4]),r.add(y,y+1,y+2),r.add(y+1,y+2,y+3),n.has(o)?n.get(o)[1]+=6:n.set(o,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}}catch(d){h.e(d)}finally{h.f()}}}catch(d){a.e(d)}finally{a.f()}this._glyphBufferDataStorage.clear()}},{key:"_storePlacedGlyphs",value:function(e,t,r,n,a){var s,l,o,u,h,f,c,x,v,d,p,g,_=Math.max(r-1,0),m=n===k.aF.VIEWPORT,I=(0,i.Z)(t);try{for(I.s();!(g=I.n()).done;){var w=g.value;(s=m?0:Math.max(r+(0,y.k3)(w.minzoom),_),(l=m?25:Math.min(r+(0,y.k3)(w.maxzoom),25))<=s)||(o=w.tl,u=w.tr,h=w.bl,f=w.br,c=w.labelAngle,x=w.minAngle,v=w.maxAngle,d=w.anchor,p=w.mosaicRect,this._glyphBufferDataStorage.has(w.page)||this._glyphBufferDataStorage.set(w.page,[]),this._glyphBufferDataStorage.get(w.page).push({glyphAnchor:[d.x,d.y],tl:[o.x,o.y],tr:[u.x,u.y],bl:[h.x,h.y],br:[f.x,f.y],xmin:p.x,ymin:p.y,xmax:p.x+p.width,ymax:p.y+p.height,labelAngle:c,minAngle:x,maxAngle:v,minLod:s,maxLod:l,placementLod:_,symbolInstance:e,ddAttributes:a}))}}catch(b){I.e(b)}finally{I.f()}}}],[{key:"_symbolsSerializationLength",value:function(e){var t=0;t+=1;var r,n=(0,i.Z)(e||[]);try{for(n.s();!(r=n.n()).done;){var a=r.value;t+=4,t+=1;var s,l=(0,i.Z)(a.textColliders);try{for(l.s();!(s=l.n()).done;){s.value;t+=10}}catch(h){l.e(h)}finally{l.f()}var o,u=(0,i.Z)(a.iconColliders);try{for(u.s();!(o=u.n()).done;){o.value;t+=10}}catch(h){u.e(h)}finally{u.f()}t+=1,t+=2*a.textVertexRanges.length,t+=1,t+=2*a.iconVertexRanges.length}}catch(h){n.e(h)}finally{n.f()}return t}},{key:"serializeSymbols",value:function(e,t,r,n,a){a=a||[],t[n++]=a.length;var s,l=(0,i.Z)(a);try{for(l.s();!(s=l.n()).done;){var o=s.value;t[n++]=o.anchor.x,t[n++]=o.anchor.y,t[n++]=o.symbolFeature.hash,t[n++]=o.symbolFeature.priority,t[n++]=o.textColliders.length+o.iconColliders.length;var u,h=(0,i.Z)(o.textColliders);try{for(h.s();!(u=h.n()).done;){var f=u.value;t[n++]=f.xTile,t[n++]=f.yTile,t[n++]=f.dxPixels,t[n++]=f.dyPixels,t[n++]=f.hard?1:0,t[n++]=f.partIndex,r[n++]=f.minLod,r[n++]=f.maxLod,t[n++]=f.width,t[n++]=f.height}}catch(Z){h.e(Z)}finally{h.f()}var y,c=(0,i.Z)(o.iconColliders);try{for(c.s();!(y=c.n()).done;){var x=y.value;t[n++]=x.xTile,t[n++]=x.yTile,t[n++]=x.dxPixels,t[n++]=x.dyPixels,t[n++]=x.hard?1:0,t[n++]=x.partIndex,r[n++]=x.minLod,r[n++]=x.maxLod,t[n++]=x.width,t[n++]=x.height}}catch(Z){c.e(Z)}finally{c.f()}t[n++]=o.textVertexRanges.length;var v,d=(0,i.Z)(o.textVertexRanges);try{for(d.s();!(v=d.n()).done;){var p=(0,B.Z)(v.value,2),g=p[0],_=p[1];t[n++]=g,t[n++]=_}}catch(Z){d.e(Z)}finally{d.f()}t[n++]=o.iconVertexRanges.length;var m,I=(0,i.Z)(o.iconVertexRanges);try{for(I.s();!(m=I.n()).done;){var k=(0,B.Z)(m.value,2),w=k[0],b=k[1];t[n++]=w,t[n++]=b}}catch(Z){I.e(Z)}finally{I.f()}}}catch(Z){l.e(Z)}finally{l.f()}return n}},{key:"_pushAnchors",value:function(e,t,r,i){r+=i;for(var n=0,a=t.length-1,s=0;s<a;s++)n+=f.E9.distance(t[s],t[s+1]);var l=i||r;if(!(n<=(l*=.5)))for(var o=l/n,u=0,h=-(r=n/Math.max(Math.round(n/r),1))/2,c=t.length-1,x=0;x<c;x++){for(var v=t[x],d=t[x+1],p=d.x-v.x,g=d.y-v.y,_=Math.sqrt(p*p+g*g),m=void 0;h+r<u+_;){var I=((h+=r)-u)/_,k=(0,y.sX)(v.x,d.x,I),w=(0,y.sX)(v.y,d.y,I);void 0===m&&(m=Math.atan2(g,p)),e.push(new b(k,w,m,x,o))}u+=_}}},{key:"_pushCenterAnchor",value:function(e,t){for(var r=0,i=t.length-1,n=0;n<i;n++)r+=f.E9.distance(t[n],t[n+1]);for(var a=r/2,s=0,l=t.length-1,o=0;o<l;o++){var u=t[o],h=t[o+1],c=h.x-u.x,x=h.y-u.y,v=Math.sqrt(c*c+x*x);if(a<s+v){var d=(a-s)/v,p=(0,y.sX)(u.x,h.x,d),g=(0,y.sX)(u.y,h.y,d),_=Math.atan2(x,c);return void e.push(new b(p,g,_,o,0))}s+=v}}},{key:"_deviation",value:function(e,t,r){var i=(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y),n=(t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x);return Math.atan2(n,i)}},{key:"_honorsTextMaxAngle",value:function(e,t,r,i,n){for(var a=0,s=r/2,l=new f.E9(t.x,t.y),o=t.segment+1;a>-s;){if(--o<0)return!1;a-=f.E9.distance(e[o],l),l=e[o]}a+=f.E9.distance(e[o],e[o+1]);for(var u=[],h=0,y=e.length;a<s;){var c=e[o],x=void 0,v=o;do{if(++v===y)return!1;x=e[v]}while(x.isEqual(c));var d=void 0,p=v;do{if(++p===y)return!1;d=e[p]}while(d.isEqual(x));var g=this._deviation(c,x,d);for(u.push({deviation:g,distToAnchor:a}),h+=g;a-u[0].distToAnchor>n;)h-=u.shift().deviation;if(Math.abs(h)>i)return!1;a+=f.E9.distance(x,d),o=v}return!0}},{key:"_smoothVertices",value:function(e,t){if(t<=0)return e;var r=e.length;if(r<3)return e;var i=[],n=0,a=0;i.push(0);for(var s=1;s<r;s++){var l=f.E9.distance(e[s],e[s-1]);l>0&&(n+=l,i.push(n),++a!==s&&(e[a]=e[s]))}if((r=a+1)<3)return e;t=Math.min(t,.2*n);var o=e[0].x,u=e[0].y,h=e[r-1].x,y=e[r-1].y,c=f.E9.sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[r-1],e[r-2]),c.normalize(),e[r-1].x+=t*c.x,e[r-1].y+=t*c.y,i[0]-=t,i[r-1]+=t;var x=[];x.push(new f.E9(o,u));for(var v=1e-6,d=.5*t,p=1;p<r-1;p++){for(var g=0,_=0,m=0,I=p-1;I>=0;I--){var k=d+i[I+1]-i[p];if(k<0)break;var w=i[I+1]-i[I],b=i[p]-i[I]<d?1:k/w;if(b<v)break;var Z=b*b,T=b*k-.5*Z*w,M=b*w/t,P=e[I+1],B=e[I].x-P.x,L=e[I].y-P.y;g+=M/T*(P.x*b*k+.5*Z*(k*B-w*P.x)-Z*b*w*B/3),_+=M/T*(P.y*b*k+.5*Z*(k*L-w*P.y)-Z*b*w*L/3),m+=M}for(var V=p+1;V<r;V++){var D=d-i[V-1]+i[p];if(D<0)break;var E=i[V]-i[V-1],A=i[V]-i[p]<d?1:D/E;if(A<v)break;var R=A*A,S=A*D-.5*R*E,C=A*E/t,N=e[V-1],F=e[V].x-N.x,O=e[V].y-N.y;g+=C/S*(N.x*A*D+.5*R*(D*F-E*N.x)-R*A*E*F/3),_+=C/S*(N.y*A*D+.5*R*(D*O-E*N.y)-R*A*E*O/3),m+=C}x.push(new f.E9(g/m,_/m))}return x.push(new f.E9(h,y)),e[0].x=o,e[0].y=u,e[r-1].x=h,e[r-1].y=y,x}},{key:"_pushCentroid",value:function(e,t){var r=4096,i=4096,n=t.length-1,a=0,s=0,l=0,o=t[0].x,u=t[0].y;o>r&&(o=r),o<0&&(o=0),u>i&&(u=i),u<0&&(u=0);for(var h=1;h<n;h++){var f=t[h].x,y=t[h].y,c=t[h+1].x,x=t[h+1].y;f>r&&(f=r),f<0&&(f=0),y>i&&(y=i),y<0&&(y=0),c>r&&(c=r),c<0&&(c=0),x>i&&(x=i),x<0&&(x=0);var v=(f-o)*(x-u)-(c-o)*(y-u);a+=v*(o+f+c),s+=v*(u+y+x),l+=v}a/=3*l,s/=3*l,isNaN(a)||isNaN(s)||e.push(new b(a,s))}}]),r}(G);ne._bidiEngine=new Q.Z,function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.NO_DATA=1]="NO_DATA",e[e.READY=2]="READY",e[e.MODIFIED=3]="MODIFIED",e[e.INVALID=4]="INVALID"}(ie||(ie={}));var ae=function(){function e(t,r,n,a,l){var o,u;if((0,s.Z)(this,e),this._pbfTiles={},this._tileClippers={},this._client=n,this._tile=r,l){this._styleLayerUIDs=new Set;var h,y=(0,i.Z)(l);try{for(y.s();!(h=y.n()).done;){var c=h.value;this._styleLayerUIDs.add(c)}}catch(V){y.e(V)}finally{y.f()}}this._styleRepository=a,this._layers=null!==(o=null===(u=this._styleRepository)||void 0===u?void 0:u.layers)&&void 0!==o?o:[];var x=r.tileKey.split("/").map(parseFloat),v=(0,B.Z)(x,3),d=v[0],p=v[1],g=v[2];this._level=d;for(var _=8+Math.max(5*(this._level-14),0),m=0,I=Object.keys(t);m<I.length;m++){var k=I[m],w=t[k];if(this._pbfTiles[k]=new L.Z(new Uint8Array(w.protobuff),new DataView(w.protobuff)),w.refKey){var b=w.refKey.split("/").map(parseFloat),Z=d-(0,B.Z)(b,1)[0];if(Z>0){var T=(1<<Z)-1,M=p&T,P=g&T;this._tileClippers[k]=new f.bN(Z,M,P,8,_)}}this._tileClippers[k]||(this._tileClippers[k]=new f.I6)}}return(0,l.Z)(e,[{key:"_canParseStyleLayer",value:function(e){return!this._styleLayerUIDs||this._styleLayerUIDs.has(e)}},{key:"parse",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,l,o,u,f,y,c,x,v,d=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,V.j)(),a=this._initialize(t),s=a.returnedBuckets,this._processLayers(a),this._linkReferences(a),this._filterFeatures(a),l=[],o=new Set,u=function(e,t){o.has(e)||(l.push({name:e,repeat:t}),o.add(e))},f={},y=(0,i.Z)(s);try{for(y.s();!(c=y.n()).done;)(x=c.value).getResources(x.tileClipper,u,f)}catch(n){y.e(n)}finally{y.f()}if(this._tile.status!==ie.INVALID){e.next=7;break}return e.abrupt("return",[]);case 7:return v=this._fetchResources(l,f,t),e.abrupt("return",Promise.all([].concat((0,h.Z)(v),[r])).then((function(){return d._processFeatures(a.returnedBuckets)})));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){return{signal:e&&e.signal,sourceNameToTileData:this._parseTileData(this._pbfTiles),layers:this._layers,zoom:this._level,sourceNameToTileClipper:this._tileClippers,sourceNameToUniqueSourceLayerBuckets:{},sourceNameToUniqueSourceLayers:{},returnedBuckets:[],layerIdToBucket:{},referencerUIDToReferencedId:new Map}}},{key:"_processLayers",value:function(e){for(var t=e.sourceNameToTileData,r=e.layers,i=e.zoom,n=e.sourceNameToTileClipper,a=e.sourceNameToUniqueSourceLayerBuckets,s=e.sourceNameToUniqueSourceLayers,l=e.returnedBuckets,o=e.layerIdToBucket,u=e.referencerUIDToReferencedId,h=r.length-1;h>=0;h--){var f=r[h];if(!(!this._canParseStyleLayer(f.uid)||f.minzoom&&i<Math.floor(f.minzoom)||f.maxzoom&&i>=f.maxzoom||f.type===k.fR.BACKGROUND)&&(t[f.source]&&n[f.source])){var y=t[f.source],c=n[f.source],x=f.sourceLayer,v=y[x];if(v){var d=s[f.source];if(d||(d=s[f.source]=new Set),d.add(f.sourceLayer),f.refLayerId)u.set(f.uid,f.refLayerId);else{var p=this._createBucket(f);if(p){p.layerUIDs=[f.uid],p.layerExtent=v.extent,p.tileClipper=c;var g=a[f.source];g||(g=a[f.source]={});var _=g[x];_||(_=g[x]=[]),_.push(p),l.push(p),o[f.id]=p}}}}}}},{key:"_linkReferences",value:function(e){var t=e.layerIdToBucket;e.referencerUIDToReferencedId.forEach((function(e,r){t[e]&&t[e].layerUIDs.push(r)}))}},{key:"_filterFeatures",value:function(e){for(var t=e.signal,r=e.sourceNameToTileData,n=e.sourceNameToUniqueSourceLayerBuckets,a=e.sourceNameToUniqueSourceLayers,s=10*this._level,l=10*(this._level+1),u=[],h=[],f=function(){var e=c[y];a[e].forEach((function(t){u.push(t),h.push(e)}))},y=0,c=Object.keys(a);y<c.length;y++)f();for(var x=0;x<u.length;x++){var v=h[x],d=u[x];if(r[v]&&n[v]){var p=r[v][d],g=n[v][d];if(g&&0!==g.length){if((0,o.Hc)(t))return;for(var _=p.getData();_.nextTag(2);){var m=_.getMessage(),I=new D(m,p);m.release();var k=I.values;if(k){var w=k._minzoom;if(w&&w>=l)continue;var b=k._maxzoom;if(b&&b<=s)continue}var Z,T=(0,i.Z)(g);try{for(T.s();!(Z=T.n()).done;){Z.value.pushFeature(I)}}catch(M){T.e(M)}finally{T.f()}}}}}}},{key:"_fetchResources",value:function(e,t,r){var i,n,a=[],s=this._tile.getWorkerTileHandler();for(var l in e.length>0&&(i=s.fetchSprites(e,this._client,r),a.push(i)),t){var o=t[l];o.size>0&&(n=s.fetchGlyphs(this._tile.tileKey,l,o,this._client,r),a.push(n))}return a}},{key:"_processFeatures",value:function(e){var t,r=this,n=e.filter((function(e){return e.hasFeatures()||r._canParseStyleLayer(e.layer.uid)})),a=(0,i.Z)(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.processFeatures(s.tileClipper)}}catch(l){a.e(l)}finally{a.f()}return n}},{key:"_parseTileData",value:function(e){for(var t={},r=0,i=Object.keys(e);r<i.length;r++){for(var n=i[r],a=e[n],s={};a.next();)if(3===a.tag()){var l=a.getMessage(),o=new C(l);l.release(),s[o.name]=o}else a.skip();t[n]=s}return t}},{key:"_createBucket",value:function(e){switch(e.type){case k.fR.BACKGROUND:return null;case k.fR.FILL:return this._createFillBucket(e);case k.fR.LINE:return this._createLineBucket(e);case k.fR.CIRCLE:return this._createCircleBucket(e);case k.fR.SYMBOL:return this._createSymbolBucket(e)}}},{key:"_createFillBucket",value:function(e){return new K(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new F(e.fillMaterial.getStride()),new S,new O(e.outlineMaterial.getStride()),new S)}},{key:"_createLineBucket",value:function(e){return new Y(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new N(e.lineMaterial.getStride()),new S)}},{key:"_createCircleBucket",value:function(e){return new H(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new z(e.circleMaterial.getStride()),new S)}},{key:"_createSymbolBucket",value:function(e){var t=this._tile;return new ne(e,this._level,new U(e.iconMaterial.getStride()),new S,new U(e.textMaterial.getStride()),new S,t.placementEngine,t.getWorkerTileHandler())}}]),e}(),se=function(){function e(t,r,i,n){(0,s.Z)(this,e),this.status=ie.INITIALIZED,this.placementEngine=new P,this.tileKey=t,this.refKeys=r,this._workerTileHandler=i,this._styleRepository=n}return(0,l.Z)(e,[{key:"release",value:function(){this.tileKey="",this.refKeys=null,this.status=ie.INITIALIZED,this._workerTileHandler=null}},{key:"parse",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,s,l,u,f,y,c,x,v,d,p,g,_=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=(a=r&&r.signal)&&(s=function e(){a.removeEventListener("abort",e),_.status=ie.INVALID},a.addEventListener("abort",s)),u={bucketsWithData:[],emptyBuckets:null},e.prev=3,e.next=6,this._parse(t,r);case 6:l=e.sent,e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(0,o.D_)(e.t0)){e.next=13;break}throw e.t0;case 13:return e.abrupt("return",{result:u,transferList:[]});case 14:this.status=ie.READY,f=u.bucketsWithData,y=[],c=(0,i.Z)(l);try{for(c.s();!(x=c.n()).done;)(v=x.value).hasFeatures()?(d=v.serialize(),f.push(d)):y.push(v.layer.uid)}catch(n){c.e(n)}finally{c.f()}return p=(0,h.Z)(f),g=null,e.abrupt("return",(y.length>0&&(g=Uint32Array.from(y),p.push(g.buffer)),u.emptyBuckets=g,{result:u,transferList:p}));case 21:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setObsolete",value:function(){this.status=ie.INVALID}},{key:"getLayers",value:function(){return this._workerTileHandler.getLayers()}},{key:"getWorkerTileHandler",value:function(){return this._workerTileHandler}},{key:"_parse",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.sourceName2DataAndRefKey,0!==Object.keys(i).length){e.next=3;break}return e.abrupt("return",[]);case 3:return this.status=ie.MODIFIED,e.abrupt("return",new ae(i,this,r.client,this._styleRepository,t.styleLayerUIDs).parse(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),le=r(30969),oe=function(){function e(){(0,s.Z)(this,e),this._spriteInfo={},this._glyphInfo={}}return(0,l.Z)(e,[{key:"reset",value:function(){return this._spriteInfo={},this._glyphInfo={},Promise.resolve()}},{key:"getLayers",value:function(){var e,t;return null!==(e=null===(t=this._styleRepository)||void 0===t?void 0:t.layers)&&void 0!==e?e:[]}},{key:"createTileAndParse",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var i,a,s,l,u,h,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.key,a={},s=0,l=Object.keys(t.sourceName2DataAndRefKey);s<l.length;s++)u=l[s],h=t.sourceName2DataAndRefKey[u],a[u]=h.refKey;return f=new se(i,a,this,this._styleRepository),e.prev=3,e.next=6,f.parse(t,r);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),f.setObsolete(),f.release(),(0,o.D_)(e.t0)){e.next=13;break}throw e.t0;case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateStyle",value:function(e){if(e&&0!==e.length&&this._styleRepository){var t,r=this._styleRepository,n=(0,i.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,s=a.type,l=a.data;switch(s){case u.Fr.PAINTER_CHANGED:r.setPaintProperties(l.layer,l.paint);break;case u.Fr.LAYOUT_CHANGED:r.setLayoutProperties(l.layer,l.layout);break;case u.Fr.LAYER_REMOVED:r.deleteStyleLayer(l.layer);break;case u.Fr.LAYER_CHANGED:r.setStyleLayer(l.layer,l.index);break;case u.Fr.SPRITES_CHANGED:this._spriteInfo={}}}}catch(o){n.e(o)}finally{n.f()}}}},{key:"setStyle",value:function(e){this._styleRepository=new le.Z(e),this._spriteInfo={},this._glyphInfo={}}},{key:"fetchSprites",value:function(e,t,r){var n,a=[],s=this._spriteInfo,l=(0,i.Z)(e);try{for(l.s();!(n=l.n()).done;){var o=n.value;void 0===s[o.name]&&a.push(o)}}catch(u){l.e(u)}finally{l.f()}return 0===a.length?Promise.resolve():t.invoke("getSprites",a,{signal:r&&r.signal}).then((function(e){for(var t in e){var r=e[t];s[t]=r}}))}},{key:"getSpriteItems",value:function(){return this._spriteInfo}},{key:"fetchGlyphs",value:function(e,t,r,i,n){var a=[],s=this._glyphInfo[t];return s?r.forEach((function(e){s[e]||a.push(e)})):(s=this._glyphInfo[t]=[],r.forEach((function(e){return a.push(e)}))),0===a.length?Promise.resolve():i.invoke("getGlyphs",{tileID:e,font:t,codePoints:a},n).then((function(e){for(var t=0;t<e.length;t++)e[t]&&(s[t]=e[t])}))}},{key:"getGlyphItems",value:function(e){return this._glyphInfo[e]}}]),e}()},46618:function(e,t,r){r.d(t,{Bf:function(){return i},PF:function(){return n},Ts:function(){return a},nN:function(){return s}});var i=!0,n=32,a=1.5,s=200},82010:function(e,t,r){r.d(t,{z:function(){return v}});var i=r(15671),n=r(43144),a=r(48202),s=r(94109);function l(e,t){return e.x===t.x&&e.y===t.y}function o(e,t){return e.x=t.y,e.y=-t.x,e}function u(e,t){return e.x=-t.y,e.y=t.x,e}function h(e,t){return e.x=t.x,e.y=t.y,e}function f(e,t){return e.x=-t.x,e.y=-t.y,e}function y(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function c(e,t){return e.x*t.x+e.y*t.y}function x(e,t,r,i){return e.x=t.x*r+t.y*i,e.y=t.x*i-t.y*r,e}var v=function(){function e(t,r,n){(0,i.Z)(this,e),this._writeVertex=t,this._writeTriangle=r,this._canUseThinTessellation=n,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}return(0,n.Z)(e,[{key:"tessellate",value:function(e,t){(function(e){if(e){var t=e.length;if(!(t<=1)){for(var r=0,i=1;i<t;i++)l(e[i],e[r])||++r===i||(e[r]=e[i]);e.length=r+1}}})(e),this._canUseThinTessellation&&t.halfWidth<s.tQ&&!t.offset?this._tessellateThin(e,t):this._tessellate(e,t)}},{key:"_tessellateThin",value:function(e,t){if(!(e.length<2))for(var r=t.wrapDistance||65535,i=t.initialDistance||0,n=!1,a=e[0].x,s=e[0].y,l=e.length,o=1;o<l;++o){n&&(n=!1,i=0);var u=e[o].x,h=e[o].y,f=u-a,y=h-s,c=Math.sqrt(f*f+y*y);if(f/=c,y/=c,i+c>r){n=!0;var x=(r-i)/c;c=r-i,u=(1-x)*a+x*u,h=(1-x)*s+x*h,--o}var v=this._writeVertex(a,s,0,0,f,y,y,-f,0,-1,i),d=this._writeVertex(a,s,0,0,f,y,-y,f,0,1,i);i+=c;var p=this._writeVertex(u,h,0,0,f,y,y,-f,0,-1,i),g=this._writeVertex(u,h,0,0,f,y,-y,f,0,1,i);this._writeTriangle(v,d,p),this._writeTriangle(d,p,g),a=u,s=h}}},{key:"_tessellate",value:function(e,t){var r=e[0],i=e[e.length-1],n=l(r,i),s=n?3:2;if(!(e.length<s)){var v,d,p,g,_,m=t.pixelCoordRatio,I=null!=t.capType?t.capType:a.RL.BUTT,k=null!=t.joinType?t.joinType:a.AH.MITER,w=null!=t.miterLimit?Math.min(t.miterLimit,4):2,b=null!=t.roundLimit?Math.min(t.roundLimit,1.05):1.05,Z=null!=t.halfWidth?t.halfWidth:2,T=!!t.textured,M=null,P=this._prevNormal,B=this._nextNormal,L=-1,V=-1,D=this._joinNormal,E=this._textureNormalLeft,A=this._textureNormalRight,R=this._textureNormal,S=-1,C=-1,N=t.wrapDistance||65535,F=t.initialDistance||0,O=this._writeVertex,U=this._writeTriangle,z=function(e,t,r,i,n,a){var s=O(d,p,g,_,r,i,e,t,n,a,F);return S>=0&&C>=0&&s>=0&&U(S,C,s),S=C,C=s,s};n&&(v=e[e.length-2],B.x=i.x-v.x,B.y=i.y-v.y,V=y(B),B.x/=V,B.y/=V);for(var G,H,j=!1,W=0;W<e.length;++W){if(j&&(j=!1,F=0),v&&(P.x=-B.x,P.y=-B.y,F+(L=V)>N&&(j=!0)),j){var K=(N-F)/L;L=N-F,v={x:(1-K)*v.x+K*e[W].x,y:(1-K)*v.y+K*e[W].y},--W}else v=e[W];d=v.x,p=v.y;var q=W<=0&&!j,Y=W===e.length-1;if(q||(F+=L),(M=Y?n?e[1]:null:e[W+1])?(B.x=M.x-d,B.y=M.y-p,V=y(B),B.x/=V,B.y/=V):(B.x=void 0,B.y=void 0),!n){if(q){u(D,B),g=D.x,_=D.y,I===a.RL.SQUARE&&(z(-B.y-B.x,B.x-B.y,B.x,B.y,0,-1),z(B.y-B.x,-B.x-B.y,B.x,B.y,0,1)),I===a.RL.ROUND&&(z(-B.y-B.x,B.x-B.y,B.x,B.y,-1,-1),z(B.y-B.x,-B.x-B.y,B.x,B.y,-1,1)),I!==a.RL.ROUND&&I!==a.RL.BUTT||(z(-B.y,B.x,B.x,B.y,0,-1),z(B.y,-B.x,B.x,B.y,0,1));continue}if(Y){o(D,P),g=D.x,_=D.y,I!==a.RL.ROUND&&I!==a.RL.BUTT||(z(P.y,-P.x,-P.x,-P.y,0,-1),z(-P.y,P.x,-P.x,-P.y,0,1)),I===a.RL.SQUARE&&(z(P.y-P.x,-P.x-P.y,-P.x,-P.y,0,-1),z(-P.y-P.x,P.x-P.y,-P.x,-P.y,0,1)),I===a.RL.ROUND&&(z(P.y-P.x,-P.x-P.y,-P.x,-P.y,1,-1),z(-P.y-P.x,P.x-P.y,-P.x,-P.y,1,1));continue}}var J=void 0,X=void 0,Q=(H=B,-((G=P).x*H.y-G.y*H.x));if(Math.abs(Q)<.01)c(P,B)>0?(D.x=P.x,D.y=P.y,Q=1,J=Number.MAX_VALUE,X=!0):(u(D,B),Q=1,J=1,X=!1);else{D.x=(P.x+B.x)/Q,D.y=(P.y+B.y)/Q;var $=((J=y(D))-1)*Z*m;X=J>4||$>L&&$>V}g=D.x,_=D.y;var ee=k;switch(k){case a.AH.BEVEL:J<1.05&&(ee=a.AH.MITER);break;case a.AH.ROUND:J<b&&(ee=a.AH.MITER);break;case a.AH.MITER:J>w&&(ee=a.AH.BEVEL)}switch(ee){case a.AH.MITER:if(z(D.x,D.y,-P.x,-P.y,0,-1),z(-D.x,-D.y,-P.x,-P.y,0,1),Y)break;if(T){var te=j?0:F;S=this._writeVertex(d,p,g,_,B.x,B.y,D.x,D.y,0,-1,te),C=this._writeVertex(d,p,g,_,B.x,B.y,-D.x,-D.y,0,1,te)}break;case a.AH.BEVEL:var re=Q<0,ie=void 0,ne=void 0,ae=void 0,se=void 0;if(re){var le=S;S=C,C=le,ie=E,ne=A}else ie=A,ne=E;if(X)ae=re?u(this._innerPrev,P):o(this._innerPrev,P),se=re?o(this._innerNext,B):u(this._innerNext,B);else{var oe=re?f(this._inner,D):h(this._inner,D);ae=oe,se=oe}var ue=re?o(this._bevelStart,P):u(this._bevelStart,P);z(ae.x,ae.y,-P.x,-P.y,ie.x,ie.y);var he=z(ue.x,ue.y,-P.x,-P.y,ne.x,ne.y);if(Y)break;var fe=re?u(this._bevelEnd,B):o(this._bevelEnd,B);if(X){var ye=this._writeVertex(d,p,g,_,-P.x,-P.y,0,0,0,0,F);S=this._writeVertex(d,p,g,_,B.x,B.y,se.x,se.y,ie.x,ie.y,F),C=this._writeVertex(d,p,g,_,B.x,B.y,fe.x,fe.y,ne.x,ne.y,F),this._writeTriangle(he,ye,C)}else{if(T){var ce=this._bevelMiddle;ce.x=(ue.x+fe.x)/2,ce.y=(ue.y+fe.y)/2,x(R,ce,-P.x,-P.y),z(ce.x,ce.y,-P.x,-P.y,R.x,R.y),x(R,ce,B.x,B.y),S=this._writeVertex(d,p,g,_,B.x,B.y,ce.x,ce.y,R.x,R.y,F),C=this._writeVertex(d,p,g,_,B.x,B.y,se.x,se.y,ie.x,ie.y,F)}else{var xe=S;S=C,C=xe}z(fe.x,fe.y,B.x,B.y,ne.x,ne.y)}if(re){var ve=S;S=C,C=ve}break;case a.AH.ROUND:var de=Q<0,pe=void 0,ge=void 0;if(de){var _e=S;S=C,C=_e,pe=E,ge=A}else pe=A,ge=E;var me=de?f(this._inner,D):h(this._inner,D),Ie=void 0,ke=void 0;X?(Ie=de?u(this._innerPrev,P):o(this._innerPrev,P),ke=de?o(this._innerNext,B):u(this._innerNext,B)):(Ie=me,ke=me);var we=de?o(this._roundStart,P):u(this._roundStart,P),be=de?u(this._roundEnd,B):o(this._roundEnd,B),Ze=z(Ie.x,Ie.y,-P.x,-P.y,pe.x,pe.y),Te=z(we.x,we.y,-P.x,-P.y,ge.x,ge.y);if(Y)break;var Me=this._writeVertex(d,p,g,_,-P.x,-P.y,0,0,0,0,F);X||this._writeTriangle(S,C,Me);var Pe=f(this._outer,me),Be=this._writeVertex(d,p,g,_,B.x,B.y,be.x,be.y,ge.x,ge.y,F),Le=void 0,Ve=void 0,De=J>2;if(De){var Ee=void 0;J!==Number.MAX_VALUE?(Pe.x/=J,Pe.y/=J,Ee=(J*((Ee=c(P,Pe))*Ee-1)+1)/Ee):Ee=-1,(Le=de?o(this._startBreak,P):u(this._startBreak,P)).x+=P.x*Ee,Le.y+=P.y*Ee,(Ve=de?u(this._endBreak,B):o(this._endBreak,B)).x+=B.x*Ee,Ve.y+=B.y*Ee}x(R,Pe,-P.x,-P.y);var Ae=this._writeVertex(d,p,g,_,-P.x,-P.y,Pe.x,Pe.y,R.x,R.y,F);x(R,Pe,B.x,B.y);var Re=T?this._writeVertex(d,p,g,_,B.x,B.y,Pe.x,Pe.y,R.x,R.y,F):Ae,Se=Me,Ce=T?this._writeVertex(d,p,g,_,B.x,B.y,0,0,0,0,F):Me,Ne=-1,Fe=-1;if(De&&(x(R,Le,-P.x,-P.y),Ne=this._writeVertex(d,p,g,_,-P.x,-P.y,Le.x,Le.y,R.x,R.y,F),x(R,Ve,B.x,B.y),Fe=this._writeVertex(d,p,g,_,B.x,B.y,Ve.x,Ve.y,R.x,R.y,F)),T?De?(this._writeTriangle(Se,Te,Ne),this._writeTriangle(Se,Ne,Ae),this._writeTriangle(Ce,Re,Fe),this._writeTriangle(Ce,Fe,Be)):(this._writeTriangle(Se,Te,Ae),this._writeTriangle(Ce,Re,Be)):De?(this._writeTriangle(Me,Te,Ne),this._writeTriangle(Me,Ne,Fe),this._writeTriangle(Me,Fe,Be)):(this._writeTriangle(Me,Te,Ae),this._writeTriangle(Me,Re,Be)),X?(S=this._writeVertex(d,p,g,_,B.x,B.y,ke.x,ke.y,pe.x,pe.y,F),C=Be):(S=T?this._writeVertex(d,p,g,_,B.x,B.y,ke.x,ke.y,pe.x,pe.y,F):Ze,this._writeTriangle(S,Ce,Be),C=Be),de){var Oe=S;S=C,C=Oe}}}}}}]),e}()}}]);
//# sourceMappingURL=9308.ded8069c.chunk.js.map