{"version":3,"file":"static/js/2224.55ee1ad1.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/accessorSupport/originUtils.js","../node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js","../node_modules/@arcgis/core/layers/save/featureLayerUtils.js","../node_modules/@arcgis/core/layers/support/fetchService.js","../node_modules/@arcgis/core/support/requestPresets.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isMultiOriginJSONMixin as r}from\"../multiOriginJSONSupportUtils.js\";function i(i){i&&i.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{r(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}export{i as updateOrigins};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nfunction i(i){return i&&\"getAtOrigin\"in i&&\"originOf\"in i}export{i as isMultiOriginJSONMixin};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{difference as e}from\"../../core/arrayUtils.js\";import t from\"../../core/Error.js\";import r from\"../../core/Logger.js\";import{debounce as a,eachAlways as o}from\"../../core/promiseUtils.js\";import{updateOrigins as l}from\"../../core/accessorSupport/originUtils.js\";import s from\"../FeatureLayer.js\";import{parse as n}from\"../support/arcgisLayerUrl.js\";import{fetchFeatureService as i}from\"../support/fetchService.js\";import{isFeatureCollectionLayer as u,isFeatureServiceLayer as p}from\"../support/layerUtils.js\";import c from\"../../portal/Portal.js\";import d from\"../../portal/PortalItem.js\";import{createForItemWrite as y}from\"../../portal/support/jsonContext.js\";import{addTypeKeyword as m,TypeKeyword as f,getWGS84ExtentForItem as w,removeTypeKeyword as h}from\"../../portal/support/portalItemUtils.js\";const v=r.getLogger(\"esri.layers.FeatureLayer\"),b=\"Feature Service\";function I(e,t){return`Layer (title: ${e.title}, id: ${e.id}) of type '${e.declaredClass}' ${t}`}function S(e,r){if(r.type!==b)throw new t(\"feature-layer:portal-item-wrong-type\",I(e,`should have portal item of type \"${b}\"`))}async function g(e){if(await e.load(),u(e))throw new t(\"feature-layer:save\",I(e,\"using an in-memory source cannot be saved to a portal item\"))}function j(e,r){let a=(e.messages??[]).filter((({type:e})=>\"error\"===e)).map((({name:e,message:r,details:a})=>new t(e,r,a)));if(r?.ignoreUnsupported&&(a=a.filter((({name:e})=>\"layer:unsupported\"!==e&&\"symbol:unsupported\"!==e&&\"symbol-layer:unsupported\"!==e&&\"property:unsupported\"!==e&&\"url:unsupported\"!==e))),a.length>0)throw new t(\"feature-layer:save\",\"Failed to save feature layer due to unsupported or invalid content. See 'details.errors' for more detailed information\",{errors:a})}async function L(e,t,r){\"beforeSave\"in e&&\"function\"==typeof e.beforeSave&&await e.beforeSave();const a=e.write({},t);return j(t,r),a}function P(e){const{layer:t,layerJSON:r}=e;return t.isTable?{layers:[],tables:[r]}:{layers:[r],tables:[]}}function J(e){m(e,f.JSAPI),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter(((e,t,r)=>r.indexOf(e)===t)))}function N(e){const r=e.portalItem;if(!r)throw v.error(\"save: requires the portalItem property to be set\"),new t(\"feature-layer:portal-item-not-set\",I(e,\"requires the portalItem property to be set\"));if(!r.loaded)throw new t(\"feature-layer:portal-item-not-loaded\",I(e,\"cannot be saved to a portal item that does not exist or is inaccessible\"));S(e,r)}async function O(e,t){return/\\/\\d+\\/?$/.test(e.url??\"\")?P(t[0]):E(e,t)}async function E(e,t){const{layer:{url:r,customParameters:a,apiKey:o}}=t[0];let l=await e.fetchData(\"json\");l&&null!=l.layers&&null!=l.tables||(l=await T(l,{url:r??\"\",customParameters:a,apiKey:o},t.map((e=>e.layer.layerId))));for(const s of t)A(s.layer,s.layerJSON,l);return l}async function T(e,t,r){e||={},e.layers||=[],e.tables||=[];const{url:a,customParameters:o,apiKey:l}=t,{serviceJSON:s,layersJSON:n}=await i(a,{customParameters:o,apiKey:l}),u=$(e.layers,s.layers,r),p=$(e.tables,s.tables,r);e.layers=u.itemResources,e.tables=p.itemResources;const c=[...u.added,...p.added],d=n?[...n.layers,...n.tables]:[];return await x(e,c,a,d),e}function $(t,r,a){const o=e(t,r,((e,t)=>e.id===t.id));t=t.filter((e=>!o.removed.some((t=>t.id===e.id))));const l=o.added.map((({id:e})=>({id:e})));return l.forEach((({id:e})=>{t.push({id:e})})),{itemResources:t,added:l.filter((({id:e})=>!a.includes(e)))}}async function x(e,t,r,a){const l=t.map((({id:e})=>new s({url:r,layerId:e,sourceJSON:a.find((({id:t})=>t===e))})));await o(l.map((e=>e.load()))),l.forEach((t=>{const{layerId:r,loaded:a,defaultPopupTemplate:o}=t;if(!a||null==o)return;A(t,{id:r,popupInfo:o.toJSON()},e)}))}function A(e,t,r){e.isTable?U(r.tables,t):U(r.layers,t)}function U(e,t){if(!e)return;const r=e.findIndex((({id:e})=>e===t.id));-1===r?e.push(t):e[r]=t}function K(e){const{portalItem:t}=e;return p(e)&&!e.dynamicDataSource&&!!t?.loaded&&t.type===b}async function F(e){if(!e?.length)throw new t(\"feature-layer-utils-saveall:missing-parameters\",\"'layers' array should contain at least one feature layer\");await Promise.all(e.map((e=>e.load())));for(const o of e)if(!K(o))throw new t(\"feature-layer-utils-saveall:invalid-parameters\",`'layers' array should only contain layers or tables in a feature service loaded from 'Feature Service' item. ${I(o,\"does not conform\")}`,{layer:o});const r=e.map((e=>e.portalItem.id));if(new Set(r).size>1)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"All layers in the 'layers' array should be loaded from the same portal item\");const a=e.map((e=>e.layerId));if(new Set(a).size!==a.length)throw new t(\"feature-layer-utils-saveall:invalid-parameters\",\"'layers' array should contain only one instance each of layer or table in a feature service\")}function R(e,t){let r=d.from(t);return r.id&&(r=r.clone(),r.id=null),r.type??=b,r.portal??=c.getDefault(),S(e,r),r}async function D(e,t){const{url:r,layerId:a,title:o,fullExtent:l,isTable:s}=e,i=n(r),u=null!=i&&\"FeatureServer\"===i.serverType;t.url=u?r:`${r}/${a}`,t.title||=o,t.extent=null,s||null==l||(t.extent=await w(l)),h(t,f.METADATA),h(t,f.MULTI_LAYER),m(t,f.SINGLE_LAYER),s&&m(t,f.TABLE),J(t)}async function q(e,t,r){const a=e.portal;await(a?.signIn()),await(a?.user?.addItem({item:e,data:t,folder:r?.folder}))}const z=a(C);async function C(e,t){await g(e),N(e);const r=e.portalItem,a=y(r),o=await L(e,a,t),s=await O(r,[{layer:e,layerJSON:o}]);return J(r),await r.update({data:s}),l(a),r}const M=a((async(e,t)=>{await F(e);const r=e[0].portalItem,a=y(r),o=await Promise.all(e.map((e=>L(e,a,t)))),s=await O(r,e.map(((e,t)=>({layer:e,layerJSON:o[t]}))));return J(r),await r.update({data:s}),await Promise.all(e.slice(1).map((e=>e.portalItem.reload()))),l(a),r.clone()})),Y=a(_);async function _(e,t,r){await g(e);const a=R(e,t),o=y(a),s=P({layer:e,layerJSON:await L(e,o,r)});return await D(e,a),await q(a,s,r),e.portalItem=a,l(o),a}export{z as save,M as saveAll,Y as saveAs};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as e}from\"../../support/requestPresets.js\";async function r(r,s){const a=await e(r,s);a.layers=a.layers.filter(t);const n={serviceJSON:a};if((a.currentVersion??0)<10.5)return n;const i=await e(r+\"/layers\",s);return n.layersJSON={layers:i.layers.filter(t),tables:i.tables},n}function t(e){return!e.type||\"Feature Layer\"===e.type}export{r as fetchFeatureService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../request.js\";async function t(t,o){const{data:r}=await e(t,{responseType:\"json\",query:{f:\"json\",...o?.customParameters,token:o?.apiKey}});return r}export{t as fetchArcGISServiceJSON};\n"],"names":["i","writtenProperties","forEach","target","t","propName","e","newOrigin","r","originOf","updateOrigin","v","b","I","title","id","declaredClass","S","type","g","load","u","j","a","messages","filter","map","name","message","details","ignoreUnsupported","length","errors","L","beforeSave","write","P","layer","layerJSON","isTable","layers","tables","J","m","f","typeKeywords","indexOf","N","portalItem","error","loaded","O","test","url","E","customParameters","o","apiKey","fetchData","l","T","layerId","A","s","serviceJSON","n","layersJSON","$","p","itemResources","c","added","d","x","removed","some","push","includes","sourceJSON","find","defaultPopupTemplate","popupInfo","toJSON","U","findIndex","K","dynamicDataSource","F","Promise","all","Set","size","R","clone","portal","D","fullExtent","serverType","extent","w","h","q","signIn","user","addItem","item","data","folder","z","y","update","M","slice","reload","Y","currentVersion","responseType","query","token"],"sourceRoot":""}