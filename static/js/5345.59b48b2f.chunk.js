"use strict";(self.webpackChunkjakartasatubeta=self.webpackChunkjakartasatubeta||[]).push([[5345],{96212:function(t,e,r){r.d(e,{Z:function(){return k}});var n,i=r(37762),a=r(29439),l=r(15671),o=r(43144),s=r(60136),u=r(29388),h=r(27366),f=r(10064),c=r(46784),v=r(84652),p=r(32718),d=r(49861),g=r(89125),m=r(69912),x=(0,o.Z)((function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,l.Z)(this,t),this.minValue=e,this.maxValue=r,this.noDataValue=n})),y=r(92089),w=n=function(t){(0,s.Z)(r,t);var e=(0,u.Z)(r);function r(t){var n;return(0,l.Z)(this,r),(n=e.call(this,t)).width=null,n.height=null,n.pixelType="f32",n.validPixelCount=null,n.mask=null,n.maskIsAlpha=!1,n.premultiplyAlpha=!1,n.statistics=null,n.depthCount=1,n}return(0,o.Z)(r,[{key:"castPixelType",value:function(t){if(!t)return"f32";var e=t.toLowerCase();return["u1","u2","u4"].includes(e)?e="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(e)||(e="f32"),e}},{key:"getPlaneCount",value:function(){var t;return null===(t=this.pixels)||void 0===t?void 0:t.length}},{key:"addData",value:function(t){var e;if(!t.pixels||t.pixels.length!==this.width*this.height)throw new f.Z("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(t.pixels),this.statistics.push(null!==(e=t.statistics)&&void 0!==e?e:new x)}},{key:"getAsRGBA",value:function(){var t=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(t);break;default:this._fillFrom8Bit(t)}return new Uint8ClampedArray(t)}},{key:"getAsRGBAFloat",value:function(){var t=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(t),t}},{key:"updateStatistics",value:function(){var t=this;if(this.pixels){this.statistics=this.pixels.map((function(e){return t._calculateBandStatistics(e,t.mask)}));var e=this.mask,r=0;if(null!=e)for(var n=0;n<e.length;n++)e[n]&&r++;else r=this.width*this.height;this.validPixelCount=r}}},{key:"clamp",value:function(t){if(t&&"f64"!==t&&"f32"!==t&&this.pixels){for(var e,r,i,l=(0,y.r)(t),o=(0,a.Z)(l,2),s=o[0],u=o[1],h=this.pixels,f=this.width*this.height,c=h.length,v=[],p=0;p<c;p++){i=n.createEmptyBand(t,f),e=h[p];for(var d=0;d<f;d++)r=e[d],i[d]=r>u?u:r<s?s:r;v.push(i)}this.pixels=v,this.pixelType=t}}},{key:"extractBands",value:function(t){var e,r=this,i=this.pixels,a=this.statistics;if(null==t||0===t.length||!i||0===i.length)return this;var l=i.length,o=t.some((function(t){return t>=i.length})),s=l===t.length&&!t.some((function(t,e){return t!==e}));if(o||s)return this;var u=(null===(e=this.bandMasks)||void 0===e?void 0:e.length)===l?t.map((function(t){return r.bandMasks[t]})):void 0,h=this.mask,f=this.validPixelCount,c=this.width,v=this.height;if(u){if(1===u.length)h=u[0];else{var p=c*v;h=new Uint8Array(p).fill(255);for(var d=0;d<u.length;d++)for(var g=u[d],m=0;m<p;m++)g[m]||(h[m]=0)}f=h.filter((function(t){return!!t})).length}return new n({pixelType:this.pixelType,width:c,height:v,mask:h,bandMasks:u,validPixelCount:f,maskIsAlpha:this.maskIsAlpha,pixels:t.map((function(t){return i[t]})),statistics:a&&t.map((function(t){return a[t]}))})}},{key:"clone",value:function(){var t,e=new n({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});null!=this.mask&&(this.mask instanceof Uint8Array?e.mask=new Uint8Array(this.mask):e.mask=this.mask.slice(0)),this.bandMasks&&(e.bandMasks=this.bandMasks.map((function(t){return new Uint8Array(t)})));var r=n.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];var i=!!this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=i?this.pixels[t].slice(0,this.pixels[t].length):new r(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=(0,v.d9)(this.statistics[t]);return e.premultiplyAlpha=this.premultiplyAlpha,e}},{key:"_fillFrom8Bit",value:function(t){var e=this.mask,r=this.maskIsAlpha,n=this.premultiplyAlpha,i=this.pixels;if(t&&i&&i.length){var a,l,o,s;a=l=o=i[0],i.length>=3?(l=i[1],o=i[2]):2===i.length&&(l=i[1]);var u=new Uint32Array(t),h=this.width*this.height;if(a.length===h)if(null!=e&&e.length===h)if(r)for(s=0;s<h;s++){var f=e[s];if(f){var c=f/255;u[s]=n?f<<24|o[s]*c<<16|l[s]*c<<8|a[s]*c:f<<24|o[s]<<16|l[s]<<8|a[s]}}else for(s=0;s<h;s++)e[s]&&(u[s]=255<<24|o[s]<<16|l[s]<<8|a[s]);else for(s=0;s<h;s++)u[s]=255<<24|o[s]<<16|l[s]<<8|a[s];else p.Z.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}else p.Z.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFromNon8Bit",value:function(t){var e=this.pixels,r=this.mask,n=this.statistics;if(t&&e&&e.length){var a=this.pixelType,l=1,o=0,s=1;if(n&&n.length>0){var u,h=(0,i.Z)(n);try{for(h.s();!(u=h.n()).done;){var f=u.value;if(null!=f.minValue&&(o=Math.min(o,f.minValue)),null!=f.maxValue&&null!=f.minValue){var c=f.maxValue-f.minValue;s=Math.max(s,c)}}}catch(M){h.e(M)}finally{h.f()}l=255/s}else{var v=255;"s8"===a?(o=-128,v=127):"u16"===a?v=65535:"s16"===a?(o=-32768,v=32767):"u32"===a?v=4294967295:"s32"===a?(o=-2147483648,v=2147483647):"f32"===a?(o=-34e38,v=34e38):"f64"===a&&(o=-Number.MAX_VALUE,v=Number.MAX_VALUE),l=255/(v-o)}var d,g,m,x,y,w=new Uint32Array(t),k=this.width*this.height;if((d=g=m=e[0]).length!==k)return p.Z.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(e.length>=2)if(g=e[1],e.length>=3&&(m=e[2]),null!=r&&r.length===k)for(x=0;x<k;x++)r[x]&&(w[x]=255<<24|(m[x]-o)*l<<16|(g[x]-o)*l<<8|(d[x]-o)*l);else for(x=0;x<k;x++)w[x]=255<<24|(m[x]-o)*l<<16|(g[x]-o)*l<<8|(d[x]-o)*l;else if(null!=r&&r.length===k)for(x=0;x<k;x++)y=(d[x]-o)*l,r[x]&&(w[x]=255<<24|y<<16|y<<8|y);else for(x=0;x<k;x++)y=(d[x]-o)*l,w[x]=255<<24|y<<16|y<<8|y}else p.Z.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}},{key:"_fillFrom32Bit",value:function(t){var e,r,n,i,a=this.pixels,l=this.mask;if(!t||!a||!a.length)return p.Z.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");e=r=n=a[0],a.length>=3?(r=a[1],n=a[2]):2===a.length&&(r=a[1]);var o=this.width*this.height;if(e.length!==o)return p.Z.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");var s=0;if(null!=l&&l.length===o)for(i=0;i<o;i++)t[s++]=e[i],t[s++]=r[i],t[s++]=n[i],t[s++]=1&l[i];else for(i=0;i<o;i++)t[s++]=e[i],t[s++]=r[i],t[s++]=n[i],t[s++]=1}},{key:"_calculateBandStatistics",value:function(t,e){var r,n=1/0,i=-1/0,a=t.length,l=0;if(null!=e)for(r=0;r<a;r++)e[r]&&(n=(l=t[r])<n?l:n,i=l>i?l:i);else for(r=0;r<a;r++)n=(l=t[r])<n?l:n,i=l>i?l:i;return new x(n,i)}}],[{key:"createEmptyBand",value:function(t,e){return new(n.getPixelArrayConstructor(t))(e)}},{key:"getPixelArrayConstructor",value:function(t){var e;switch(t){case"u1":case"u2":case"u4":case"u8":e=Uint8Array;break;case"u16":e=Uint16Array;break;case"u32":e=Uint32Array;break;case"s8":e=Int8Array;break;case"s16":e=Int16Array;break;case"s32":e=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":e=Float32Array;break;case"f64":e=Float64Array}return e}}]),r}(c.wq);(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"width",void 0),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"height",void 0),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"pixelType",void 0),(0,h._)([(0,g.p)("pixelType")],w.prototype,"castPixelType",null),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"validPixelCount",void 0),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"mask",void 0),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"maskIsAlpha",void 0),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"pixels",void 0),(0,h._)([(0,d.Cb)()],w.prototype,"premultiplyAlpha",void 0),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"statistics",void 0),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"depthCount",void 0),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"noDataValues",void 0),(0,h._)([(0,d.Cb)({json:{write:!0}})],w.prototype,"bandMasks",void 0);var k=w=n=(0,h._)([(0,m.j)("esri.layers.support.PixelBlock")],w)},17314:function(t,e,r){r.d(e,{CD:function(){return i},DX:function(){return n},Gd:function(){return c},Kh:function(){return Z},Pz:function(){return v},Qh:function(){return L},SJ:function(){return p},Uk:function(){return j},Vl:function(){return D},XV:function(){return d},a2:function(){return x},hd:function(){return h},nA:function(){return b},nk:function(){return f},oB:function(){return A},pW:function(){return I},sS:function(){return M},us:function(){return P},wV:function(){return g},zp:function(){return m}});var n,i,a,l=r(29439),o=r(93433),s=r(96212),u=r(92089);(a=n||(n={}))[a.matchAny=0]="matchAny",a[a.matchAll=1]="matchAll",function(t){t[t.bestMatch=0]="bestMatch",t[t.fail=1]="fail"}(i||(i={}));var h=6;function f(t){return null!=t&&"esri.layers.support.PixelBlock"===t.declaredClass&&t.pixels&&t.pixels.length>0}function c(t){var e,r;if(null===t||void 0===t||!t.length||t.some((function(t){return!f(t)})))return null;if(1===t.length)return null!==(e=null===(r=t[0])||void 0===r?void 0:r.clone())&&void 0!==e?e:null;var n=t,i=n[0],a=i.width,l=i.height,u=i.pixelType;if(n.some((function(t){return t.width!==a||t.height!==l})))return null;var h=n.map((function(t){return t.mask})).filter((function(t){return null!=t})),c=null;h.length&&((c=new Uint8Array(a*l)).set(h[0]),h.length>1&&k(h.slice(1),c));var v=[];n.forEach((function(t){var e=t.pixels;return v.push.apply(v,(0,o.Z)(e))}));var p=n.map((function(t){return t.statistics})).filter((function(t){return null===t||void 0===t?void 0:t.length})),d=[];return p.forEach((function(t){return d.push.apply(d,(0,o.Z)(t))})),new s.Z({pixelType:u,width:a,height:l,mask:c,pixels:v,statistics:d.length?d:null})}function v(t){if(t){var e=t.colormap;if(e&&0!==e.length){var r=e.sort((function(t,e){return t[0]-e[0]})),n=0;r[0][0]<0&&(n=r[0][0]);var i,a=Math.max(256,r[r.length-1][0]-n+1),l=new Uint8Array(4*a),o=[],s=0,u=0,h=5===r[0].length;if(a>65536)return r.forEach((function(t){o[t[0]-n]=h?t.slice(1):t.slice(1).concat([255])})),{indexed2DColormap:o,offset:n,alphaSpecified:h};if(t.fillUnspecified)for(s=(i=r[u])[0]-n;s<a;s++)l[4*s]=i[1],l[4*s+1]=i[2],l[4*s+2]=i[3],l[4*s+3]=h?i[4]:255,s===i[0]-n&&(i=u===r.length-1?i:r[++u]);else for(s=0;s<r.length;s++)l[u=4*((i=r[s])[0]-n)]=i[1],l[u+1]=i[2],l[u+2]=i[3],l[u+3]=h?i[4]:255;return{indexedColormap:l,offset:n,alphaSpecified:h}}}}function p(t,e){if(!f(t))return t;if(!e||!e.indexedColormap&&!e.indexed2DColormap)return t;var r=t.clone(),n=r.pixels,i=r.mask,a=r.width*r.height;if(1!==n.length)return t;var l,o=e.indexedColormap,s=e.indexed2DColormap,u=e.offset,h=e.alphaSpecified,c=0,v=n[0],p=new Uint8Array(v.length),d=new Uint8Array(v.length),g=new Uint8Array(v.length),m=0;if(o){var x=o.length-1;if(null!=i)for(c=0;c<a;c++)i[c]&&((m=4*(v[c]-u))<u||m>x?i[c]=0:(p[c]=o[m],d[c]=o[m+1],g[c]=o[m+2],i[c]=o[m+3]));else{for(i=new Uint8Array(a),c=0;c<a;c++)(m=4*(v[c]-u))<u||m>x?i[c]=0:(p[c]=o[m],d[c]=o[m+1],g[c]=o[m+2],i[c]=o[m+3]);r.mask=i}}else if(s)if(null!=i)for(c=0;c<a;c++)i[c]&&(l=s[v[c]],p[c]=l[0],d[c]=l[1],g[c]=l[2],i[c]=l[3]);else{for(i=new Uint8Array(a),c=0;c<a;c++)l=s[v[c]],p[c]=l[0],d[c]=l[1],g[c]=l[2],i[c]=l[3];r.mask=i}return r.pixels=[p,d,g],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=h,r}function d(t,e){if(!f(t))return null;var r=t.pixels,n=t.mask,i=r.length,a=e.lut,l=e.offset;a&&1===a[0].length&&(a=r.map((function(){return a})));for(var o=[],u=e.outputPixelType||"u8",h=0;h<i;h++){var c=g(r[h],n,a[h],l||0,u);o.push(c)}var v=new s.Z({width:t.width,height:t.height,pixels:o,mask:n,pixelType:u});return v.updateStatistics(),v}function g(t,e,r,n,i){var a=t.length,l=s.Z.createEmptyBand(i,a);if(e)for(var o=0;o<a;o++)e[o]&&(l[o]=r[t[o]-n]);else for(var u=0;u<a;u++)l[u]=r[t[u]-n];return l}function m(t,e){if(!f(t))return null;var r,n,i,a,l,o,s=t.clone(),u=s.pixels,h=s.width*s.height,c=e.length,v=Math.floor(c/2),p=e[Math.floor(v)],d=u[0],g=!1,m=new Uint8Array(h),x=new Uint8Array(h),y=new Uint8Array(h),w=s.mask,k=4===e[0].mappedColor.length;for(w||((w=new Uint8Array(h)).fill(k?255:1),s.mask=w),l=0;l<h;l++)if(w[l]){for(r=d[l],g=!1,o=v,n=p,i=0,a=c-1;a-i>1;){if(r===n.value){g=!0;break}r>n.value?i=o:a=o,o=Math.floor((i+a)/2),n=e[Math.floor(o)]}g||(r===e[i].value?(n=e[i],g=!0):r===e[a].value?(n=e[a],g=!0):r<e[i].value?(g=!1,n=null):r>e[i].value&&(r<e[a].value?(n=e[i],g=!0):a===c-1?(g=!1,n=null):(n=e[a],g=!0))),g?(m[l]=n.mappedColor[0],x[l]=n.mappedColor[1],y[l]=n.mappedColor[2],w[l]=n.mappedColor[3]):m[l]=x[l]=y[l]=w[l]=0}return s.pixels=[m,x,y],s.mask=w,s.pixelType="u8",s.maskIsAlpha=k,s}function x(t,e){if(!f(t))return null;var r=t.width,n=t.height,i=e.inputRanges,a=e.outputValues,o=e.outputPixelType,h=e.noDataRanges,c=e.allowUnmatched,v=e.isLastInputRangeInclusive,p=t.pixels[0],d=s.Z.createEmptyBand(o,p.length),g=t.mask,m=new Uint8Array(r*n);g?m.set(g):m.fill(255);var x=t.pixelType.startsWith("f")?1e-6:0,y=i.map((function(t){return t-x}));y[0]=i[0],y[y.length-1]=i[i.length-1]+(v?1e-6:0);for(var w=i.length/2,k=(0,u.r)(o),M=(0,l.Z)(k,2),A=M[0],b=M[1],Z=0;Z<n;Z++)for(var U=0;U<r;U++){var P=Z*r+U;if(m[P]){for(var T=p[P],I=!1,C=w-1;C>=0;C--)if(T===y[2*C]||T>y[2*C]&&T<y[2*C+1]){d[P]=a[C],I=!0;break}I||(c?d[P]=T>b?b:T<A?A:T:m[P]=0)}}var _=null===h||void 0===h?void 0:h.length;if(_)for(var B=0;B<n;B++)for(var S=0;S<r;S++){var F=B*r+S;if(!g||g[F])for(var V=p[F],D=0;D<_;D+=2)if(V>=h[D]&&V<=h[D+1]){d[F]=0,m[F]=0;break}}return new s.Z({width:r,height:n,pixelType:o,pixels:[d],mask:m})}function y(t,e,r,n){for(var i=null!=r&&r.length>=2?new Set(r):null,a=1===(null===r||void 0===r?void 0:r.length)?r[0]:null,l=!(null===e||void 0===e||!e.length),o=0;o<t.length;o++)if(n[o]){var s=t[o];if(l){for(var u=!1,h=0;h<e.length;h+=2)if(s>=e[h]&&s<=e[h+1]){u=!0;break}u||(n[o]=0)}n[o]&&(s===a||(null===i||void 0===i?void 0:i.has(s)))&&(n[o]=0)}}function w(t,e){for(var r=t[0].length,n=0;n<r;n++)if(e[n]){for(var i=!1,a=0;a<t.length;a++)if(t[a][n]){i=!0;break}i||(e[n]=0)}}function k(t,e){for(var r=t[0].length,n=0;n<r;n++)if(e[n]){for(var i=!1,a=0;a<t.length;a++)if(0===t[a][n]){i=!0;break}i&&(e[n]=0)}}function M(t,e){if(!f(t))return null;var r=t.width,n=t.height,i=t.pixels,a=r*n,l=new Uint8Array(a);t.mask?l.set(t.mask):l.fill(255);var o=i.length,u=e.includedRanges,h=e.noDataValues,c=e.outputPixelType,v=e.matchAll,p=e.lookups;if(p){for(var d=[],m=0;m<o;m++){var x=p[m],M=g(i[m],l,x.lut,x.offset||0,"u8");d.push(M)}1===d.length?l.set(d[0]):v?w(d,l):k(d,l)}else if(v){for(var A=[],b=0;b<o;b++){var Z=new Uint8Array(a);Z.set(l),y(i[b],null===u||void 0===u?void 0:u.slice(2*b,2*b+2),null===h||void 0===h?void 0:h[b],Z),A.push(Z)}1===A.length?l.set(A[0]):w(A,l)}else for(var U=0;U<o;U++)y(i[U],null===u||void 0===u?void 0:u.slice(2*U,2*U+2),null===h||void 0===h?void 0:h[U],l);return new s.Z({width:r,height:n,pixelType:c,pixels:i,mask:l})}function A(t){var e=t.srcPixelType,r=t.inputRanges,n=t.outputValues,i=t.allowUnmatched,a=t.noDataRanges,o=t.isLastInputRangeInclusive,h=t.outputPixelType;if("u8"!==e&&"s8"!==e&&"u16"!==e&&"s16"!==e)return null;var f=e.includes("16")?65536:256,c=e.includes("s")?-f/2:0,v=s.Z.createEmptyBand(h,f),p=new Uint8Array(f);i&&p.fill(255);var d=(0,u.r)(h),g=(0,l.Z)(d,2),m=g[0],x=g[1];if(null!==r&&void 0!==r&&r.length&&null!==n&&void 0!==n&&n.length){var y=r.map((function(t){return t-1e-6}));y[0]=r[0],o&&(y[y.length-1]=r[r.length-1]);for(var w=0;w<y.length;w++)for(var k=n[w]>x?x:n[w]<m?m:n[w],M=Math.ceil(y[2*w]-c),A=Math.floor(y[2*w+1]-c),b=M;b<=A;b++)v[b]=k,p[b]=255}if(null!==a&&void 0!==a&&a.length)for(var Z=0;Z<a.length;Z++)for(var U=Math.ceil(a[2*Z]-c),P=Math.floor(a[2*Z+1]-c),T=U;T<=P;T++)p[T]=0;return{lut:v,offset:c,mask:p}}function b(t,e,r){if("u8"!==t&&"s8"!==t&&"u16"!==t&&"s16"!==t)return null;var n=t.includes("16")?65536:256,i=t.includes("s")?-n/2:0,a=new Uint8Array(n);if(e)for(var l=0;l<e.length;l++)for(var o=Math.ceil(e[2*l]-i),s=Math.floor(e[2*l+1]-i),u=o;u<=s;u++)a[u]=255;else a.fill(255);if(r)for(var h=0;h<r.length;h++)a[r[h]-i]=0;return{lut:a,offset:i}}function Z(t,e){if(!t||0===t.length)return null;var r=t.find((function(t){return t.pixelBlock}));if(!r||null==r.pixelBlock)return null;var n=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,i=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,a=.01*Math.min(n,i),l=t.sort((function(t,e){return Math.abs(t.extent.ymax-e.extent.ymax)>a?e.extent.ymax-t.extent.ymax:Math.abs(t.extent.xmin-e.extent.xmin)>a?t.extent.xmin-e.extent.xmin:0})),o=Math.min.apply(null,l.map((function(t){return t.extent.xmin}))),s=Math.min.apply(null,l.map((function(t){return t.extent.ymin}))),u=Math.max.apply(null,l.map((function(t){return t.extent.xmax}))),h=Math.max.apply(null,l.map((function(t){return t.extent.ymax}))),f={x:Math.round((e.xmin-o)/n),y:Math.round((h-e.ymax)/i)},c={width:Math.round((u-o)/n),height:Math.round((h-s)/i)},v={width:Math.round((e.xmax-e.xmin)/n),height:Math.round((e.ymax-e.ymin)/i)};return Math.round(c.width/r.pixelBlock.width)*Math.round(c.height/r.pixelBlock.height)!==l.length||f.x<0||f.y<0||c.width<v.width||c.height<v.height?null:{extent:e,pixelBlock:P(l.map((function(t){return t.pixelBlock})),c,{clipOffset:f,clipSize:v})}}function U(t,e,r,n,i,a){var l=r.block,o=l.width,s=l.height,u=r.offset,h=u.x,f=u.y,c=r.mosaic,v=c.width,p=function(t,e,r,n,i,a,l,o){return{xmin:i<=r*t?0:i<r*t+t?i-r*t:t,ymin:a<=n*e?0:a<n*e+e?a-n*e:e,xmax:i+l<=r*t?0:i+l<r*t+t?i+l-r*t:t,ymax:a+o<=n*e?0:a+o<n*e+e?a+o-n*e:e}}(o,s,n,i,h,f,v,c.height),d=0,g=0;if(a){var m,x=a.hasGCSSShiftTransform?360:null!==(m=a.halfWorldWidth)&&void 0!==m?m:0,y=o*a.resolutionX,w=a.startX+n*y;w<x&&w+y>x?g=a.rightPadding:w>=x&&(d=a.leftMargin-a.rightPadding,g=0)}if(p.xmax-=g,"number"!=typeof e)for(var k=p.ymin;k<p.ymax;k++)for(var M=(i*s+k-f)*v+(n*o-h)+d,A=k*o,b=p.xmin;b<p.xmax;b++)t[M+b]=e[A+b];else for(var Z=p.ymin;Z<p.ymax;Z++)for(var U=(i*s+Z-f)*v+(n*o-h)+d,P=p.xmin;P<p.xmax;P++)t[U+P]=e}function P(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.clipOffset,i=r.clipSize,a=r.alignmentInfo,l=r.blockWidths;if(l)return T(t,e,{blockWidths:l});var o=t.find((function(t){return f(t)}));if(null==o)return null;for(var u,h=i?i.width:e.width,c=i?i.height:e.height,v=o.width,p=o.height,d=e.width/v,g=e.height/p,m={offset:n||{x:0,y:0},mosaic:i||e,block:{width:v,height:p}},x=o.pixelType,y=s.Z.getPixelArrayConstructor(x),w=o.pixels.length,k=[],M=0;M<w;M++){u=new y(h*c);for(var A=0;A<g;A++)for(var b=0;b<d;b++){var Z=t[A*d+b];f(Z)&&U(u,Z.pixels[M],m,b,A,a)}k.push(u)}var P=t.some((function(t){return null==t||null!=t.mask&&t.mask.length>0})),I=t.some((function(t){return null!=t&&t.bandMasks&&t.bandMasks.length>1})),C=P?new Uint8Array(h*c):void 0,_=I?[]:void 0;if(C){for(var B=0;B<g;B++)for(var S=0;S<d;S++){var F=t[B*d+S],V=null!=F?F.mask:null;U(C,null!=V?V:F?255:0,m,S,B,a)}if(_)for(var D=0;D<w;D++){for(var R=new Uint8Array(h*c),L=0;L<g;L++)for(var j=0;j<d;j++){var E,G,N=t[L*d+j],q=null!==(E=null===N||void 0===N||null===(G=N.bandMasks)||void 0===G?void 0:G[D])&&void 0!==E?E:null===N||void 0===N?void 0:N.mask;U(R,null!=q?q:N?255:0,m,j,L,a)}_.push(R)}}var O=new s.Z({width:h,height:c,pixels:k,pixelType:x,bandMasks:_,mask:C});return O.updateStatistics(),O}function T(t,e,r){var n=t.find((function(t){return null!=t}));if(null==n)return null;var i=t.some((function(t){return null==t||!!t.mask})),a=e.width,l=e.height,o=i?new Uint8Array(a*l):null,u=r.blockWidths,h=[],c=n.getPlaneCount(),v=s.Z.getPixelArrayConstructor(n.pixelType);if(i)for(var p=0,d=0;p<t.length;d+=u[p],p++){var g=t[p];if(f(g))for(var m=g.mask,x=0;x<l;x++)for(var y=0;y<u[p];y++)o[x*a+y+d]=null==m?255:m[x*g.width+y]}for(var w=t.some((function(t){return null!=t&&t.bandMasks&&t.bandMasks.length>1})),k=w?[]:void 0,M=a*l,A=0;A<c;A++){for(var b=new v(M),Z=w?new Uint8Array(M):void 0,U=0,P=0;U<t.length;P+=u[U],U++){var T=t[U];if(f(T)){var I=T.pixels[A];if(null!=I){for(var C=0;C<l;C++)for(var _=0;_<u[U];_++)b[C*a+_+P]=I[C*T.width+_];if(Z)for(var B,S,F=null!==(B=null===(S=T.bandMasks)||void 0===S?void 0:S[A])&&void 0!==B?B:T.mask,V=0;V<l;V++)for(var D=0;D<u[U];D++)Z[V*a+D+P]=F?F[V*T.width+D]:255}}}h.push(b),k&&Z&&k.push(Z)}var R=new s.Z({width:a,height:l,mask:o,bandMasks:k,pixels:h,pixelType:n.pixelType});return R.updateStatistics(),R}function I(t,e,r){if(!f(t))return null;var n=t.width,i=t.height,a=e.x,l=e.y,o=r.width+a,s=r.height+l;if(a<0||l<0||o>n||s>i)return t;if(0===a&&0===l&&o===n&&s===i)return t;t.mask||(t.mask=new Uint8Array(n*i));for(var u=t.mask,h=0;h<i;h++)for(var c=h*n,v=0;v<n;v++)u[c+v]=h<l||h>=s||v<a||v>=o?0:1;return t.updateStatistics(),t}function C(t){if(!f(t))return null;for(var e=t.clone(),r=t.width,n=t.height,i=t.pixels[0],a=e.pixels[0],l=t.mask,o=2;o<n-1;o++){for(var s=new Map,u=o-2;u<o+2;u++)for(var h=0;h<4;h++){var c=u*r+h;S(s,i[c],l?l[c]:1)}a[o*r]=_(s),a[o*r+1]=a[o*r+2]=a[o*r];for(var v=3;v<r-1;v++){var p=(o-2)*r+v+1;S(s,i[p],l?l[p]:1),S(s,i[p=(o-1)*r+v+1],l?l[p]:1),S(s,i[p=o*r+v+1],l?l[p]:1),S(s,i[p=(o+1)*r+v+1],l?l[p]:1),B(s,i[p=(o-2)*r+v-3],l?l[p]:1),B(s,i[p=(o-1)*r+v-3],l?l[p]:1),B(s,i[p=o*r+v-3],l?l[p]:1),B(s,i[p=(o+1)*r+v-3],l?l[p]:1),a[o*r+v]=_(s)}a[o*r+v+1]=a[o*r+v]}for(var d=0;d<r;d++)a[d]=a[r+d]=a[2*r+d],a[(n-1)*r+d]=a[(n-2)*r+d];return e.updateStatistics(),e}function _(t){if(0===t.size)return 0;for(var e=0,r=-1,n=0,i=t.keys(),a=i.next();!a.done;)(n=t.get(a.value))>e&&(r=a.value,e=n),a=i.next();return r}function B(t,e,r){if(0!==r){var n=t.get(e);1===n?t.delete(e):t.set(e,n-1)}}function S(t,e,r){0!==r&&t.set(e,t.has(e)?t.get(e)+1:1)}function F(t,e,r){var n=e.x,i=e.y,a=r.width,l=r.height;if(0===n&&0===i&&l===t.height&&a===t.width)return t;var o=t.width,u=t.height,h=Math.max(0,i),c=Math.max(0,n),v=Math.min(n+a,o),p=Math.min(i+l,u);if(v<0||p<0||!f(t))return null;n=Math.max(0,-n),i=Math.max(0,-i);for(var d=t.pixels,g=a*l,m=d.length,x=[],y=0;y<m;y++){for(var w=d[y],k=s.Z.createEmptyBand(t.pixelType,g),M=h;M<p;M++)for(var A=M*o,b=(M+i-h)*a+n,Z=c;Z<v;Z++)k[b++]=w[A+Z];x.push(k)}for(var U=new Uint8Array(g),P=t.mask,T=h;T<p;T++)for(var I=T*o,C=(T+i-h)*a+n,_=c;_<v;_++)U[C++]=P?P[I+_]:1;var B=new s.Z({width:r.width,height:r.height,pixelType:t.pixelType,pixels:x,mask:U});return B.updateStatistics(),B}function V(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!f(t))return null;for(var r=t.pixels,n=t.width,i=t.height,a=t.mask,l=t.pixelType,o=[],u=Math.round(n/2),h=Math.round(i/2),c=i-1,v=n-1,p=0;p<r.length;p++){for(var d=r[p],g=s.Z.createEmptyBand(l,u*h),m=0,x=0;x<i;x+=2)for(var y=0;y<n;y+=2){var w=d[x*n+y];if(e){var k=y===v?w:d[x*n+y+1],M=x===c?w:d[x*n+y+n],A=y===v?M:x===c?k:d[x*n+y+n+1];g[m++]=(w+k+M+A)/4}else g[m++]=w}o.push(g)}var b=null;if(null!=a){b=new Uint8Array(u*h);for(var Z=0,U=0;U<i;U+=2)for(var P=0;P<n;P+=2){var T=a[U*n+P];if(e){var I=P===v?T:a[U*n+P+1],C=U===c?T:a[U*n+P+n],_=P===v?C:U===c?I:a[U*n+P+n+1];b[Z++]=T*I*C*_?1:0}else b[Z++]=T}}return new s.Z({width:u,height:h,pixelType:l,pixels:o,mask:b})}function D(t,e,r){if(!f(t))return null;for(var n=e.width,i=e.height,a=t.width,l=t.height,o=new Map,s={x:0,y:0},u=null==r?1:1+r,h=t,c=0;c<u;c++){for(var v=Math.ceil(a/n),p=Math.ceil(l/i),d=0;d<p;d++){s.y=d*i;for(var g=0;g<v;g++){s.x=g*n;var m=F(h,s,e);o.set("".concat(c,"/").concat(d,"/").concat(g),m)}}c<u-1&&(h=V(h)),a=Math.round(a/2),l=Math.round(l/2)}return o}function R(t,e,r,n){for(var i,a,l,o,s,u,h,f,c,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,p=t.width,d=t.height,g=e.width,m=e.height,x=n.cols,y=n.rows,w=Math.ceil(g/x-.1/x),k=Math.ceil(m/y-.1/y),M=w*x,A=M*k*y,b=new Float32Array(A),Z=new Float32Array(A),U=new Uint32Array(A),P=new Uint32Array(A),T=0,I=0;I<k;I++)for(var C=0;C<w;C++){a=r[i=12*(I*w+C)],l=r[i+1],o=r[i+2],s=r[i+3],u=r[i+4],h=r[i+5];for(var _=0;_<y;_++){T=(I*y+_)*M+C*x,c=(_+.5)/y;for(var B=0;B<_;B++)f=(B+.5)/x,b[T+B]=(a*f+l*c+o)*p+v,Z[T+B]=(s*f+u*c+h)*d+v,U[T+B]=Math.floor(b[T+B]),P[T+B]=Math.floor(Z[T+B])}a=r[i+=6],l=r[i+1],o=r[i+2],s=r[i+3],u=r[i+4],h=r[i+5];for(var S=0;S<y;S++){T=(I*y+S)*M+C*x,c=(S+.5)/y;for(var F=S;F<x;F++)f=(F+.5)/x,b[T+F]=(a*f+l*c+o)*p+v,Z[T+F]=(s*f+u*c+h)*d+v,U[T+F]=Math.floor(b[T+F]),P[T+F]=Math.floor(Z[T+F])}}return{offsets_x:b,offsets_y:Z,offsets_xi:U,offsets_yi:P,gridWidth:M}}function L(t,e){for(var r=e.coefficients,n=e.spacing,i=R(t,t,r,{rows:n[0],cols:n[1]}),a=i.offsets_x,l=i.offsets_y,o=i.gridWidth,s=t.width,u=t.height,h=new Float32Array(s*u),f=180/Math.PI,c=0;c<u;c++)for(var v=0;v<s;v++){var p=c*o+v,d=0===c?p:p-o,g=c===u-1?p:p+o,m=a[d]-a[g],x=l[g]-l[d];if(isNaN(m)||isNaN(x))h[c*s+v]=90;else{var y=Math.atan2(x,m)*f;y=(360+y)%360,h[c*s+v]=y}}return h}function j(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"nearest";if(!f(t))return null;"majority"===i&&(t=C(t));for(var a=t,l=a.pixels,o=a.mask,u=a.bandMasks,h=a.pixelType,c=t.width,v=t.height,p=s.Z.getPixelArrayConstructor(h),d=l.length,g=e.width,m=e.height,x=!1,y=0;y<r.length;y+=3)-1===r[y]&&-1===r[y+1]&&-1===r[y+2]&&(x=!0);for(var w,k,M=R({width:c,height:v},e,r,n,"majority"===i?.5:0),A=M.offsets_x,b=M.offsets_y,Z=M.offsets_xi,U=M.offsets_yi,P=M.gridWidth,T=function(t,e,r,n){for(var i=t instanceof Float32Array||t instanceof Float64Array?0:.5,a=0;a<m;a++){w=a*P;for(var l=0;l<g;l++){if(A[w]<0||b[w]<0)t[a*g+l]=0;else if(n)t[a*g+l]=e[Z[w]+U[w]*c];else{var o=Math.floor(A[w]),s=Math.floor(b[w]),u=Math.ceil(A[w]),h=Math.ceil(b[w]),f=A[w]-o,v=b[w]-s;if(!r||r[o+s*c]&&r[u+s*c]&&r[o+h*c]&&r[u+h*c]){var p=(1-f)*e[o+s*c]+f*e[u+s*c],d=(1-f)*e[o+h*c]+f*e[u+h*c];t[a*g+l]=(1-v)*p+v*d+i}else t[a*g+l]=e[Z[w]+U[w]*c]}w++}}},I=[],_=(null===u||void 0===u?void 0:u.length)===d,B=[],S=0;S<d;S++){if(_){var F=new Uint8Array(g*m);T(F,u[S],u[S],!0),B.push(F)}T(k=new p(g*m),l[S],_?u[S]:o,"nearest"===i||"majority"===i),I.push(k)}var V=new s.Z({width:g,height:m,pixelType:h,pixels:I,bandMasks:_?B:void 0});if(null!=o)V.mask=new Uint8Array(g*m),T(V.mask,o,o,!0);else if(x){V.mask=new Uint8Array(g*m);for(var D=0;D<g*m;D++)V.mask[D]=A[D]<0||b[D]<0?0:1}return V.updateStatistics(),V}},64145:function(t,e,r){r.d(e,{BH:function(){return m},K:function(){return T},KC:function(){return d},NL:function(){return u},QI:function(){return g},Tg:function(){return c},Yx:function(){return h},nb:function(){return C},wF:function(){return I},xQ:function(){return p}});var n=r(29439),i=r(43404),a=r(96212),l=r(17314),o=new Map;o.set("meter-per-second",1),o.set("kilometer-per-hour",.277778),o.set("knots",.514444),o.set("feet-per-second",.3048),o.set("mile-per-hour",.44704);var s=180/Math.PI,u=new i.X({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function h(t,e){return o.get(t)/o.get(e)||1}function f(t){return(450-t)%360}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=(0,n.Z)(t,2),i=r[0],a=r[1],l=Math.sqrt(i*i+a*a),o=Math.atan2(a,i)*s;return o=(360+o)%360,"geographic"===e&&(o=f(o)),[l,o]}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"geographic",r=t[1];"geographic"===e&&(r=f(r)),r%=360;var n=t[0];return[n*Math.cos(r/s),n*Math.sin(r/s)]}function p(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"geographic";if(!(0,l.nk)(t)||null==r)return t;for(var i="vector-magdir"===e?t.clone():d(t,e),a=i.pixels[1],o=0;o<a.length;o++)a[o]="geographic"===n?(a[o]+r[o]+270)%360:(a[o]+360-r[o])%360;return"vector-magdir"===e?i:d(i,"vector-magdir")}function d(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"geographic",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!(0,l.nk)(t))return t;for(var o=t.pixels,s=t.width,u=t.height,h=s*u,f=o[0],p=o[1],d=t.pixelType.startsWith("f")?t.pixelType:"f32",g=a.Z.createEmptyBand(d,h),m=a.Z.createEmptyBand(d,h),x=0,y=0;y<u;y++)for(var w=0;w<s;w++){var k,M,A,b;"vector-uv"===e?(k=c([f[x],p[x]],r),M=(0,n.Z)(k,2),g[x]=M[0],m[x]=M[1],g[x]*=i):(A=v([f[x],p[x]],r),b=(0,n.Z)(A,2),g[x]=b[0],m[x]=b[1],g[x]*=i,m[x]*=i),x++}var Z=new a.Z({pixelType:d,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:[g,m]});return Z.updateStatistics(),Z}function g(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(1===r||!(0,l.nk)(t))return t;for(var n=t.clone(),i=n.pixels,a=n.width,o=n.height,s=i[0],u=i[1],h=0,f=0;f<o;f++)for(var c=0;c<a;c++)"vector-uv"===e?(s[h]*=r,u[h]*=r):s[h]*=r,h++;return n.updateStatistics(),n}function m(t,e,r,n,i){if(null==i||!i.spatialReference.equals(t.spatialReference))return{extent:t,width:Math.round(e/n),height:Math.round(r/n),resolution:t.width/e};var a=i.xmin,l=i.ymax,o=(t.xmax-t.xmin)/e*n,s=(t.ymax-t.ymin)/r*n,u=(o+s)/2;return t.xmin=a+Math.floor((t.xmin-a)/o)*o,t.xmax=a+Math.ceil((t.xmax-a)/o)*o,t.ymin=l+Math.floor((t.ymin-l)/s)*s,t.ymax=l+Math.ceil((t.ymax-l)/s)*s,{extent:t,width:Math.round(t.width/o),height:Math.round(t.height/s),resolution:u}}var x=y(0,0,0);function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.PI,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];i&&(r=(2*Math.PI-r)%(2*Math.PI));var a=i?-1:1,l=13*a,o=-7*a,s=-2*a,u=-16*a,h=21.75,f=k(0,e+l,r,h),c=(0,n.Z)(f,2),v=c[0],p=c[1],d=k(t-5.5,e+o,r,h),g=(0,n.Z)(d,2),m=g[0],x=g[1],y=k(t+5.5,e+o,r,h),w=(0,n.Z)(y,2),M=w[0],A=w[1],b=k(t-1.5,e+s,r,h),Z=(0,n.Z)(b,2),U=Z[0],P=Z[1],T=k(t+1.5,e+s,r,h),I=(0,n.Z)(T,2),C=I[0],_=I[1],B=k(t-1.5,e+u,r,h),S=(0,n.Z)(B,2),F=S[0],V=S[1],D=k(t+1.5,e+u,r,h),R=(0,n.Z)(D,2),L=R[0],j=R[1];return[v,p,m,x,U,P,C,_,M,A,F,V,L,j]}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r&&(e=(2*Math.PI-e)%(2*Math.PI));var i=10,a=r?-1:1,l=5*a,o=20*a,s=25*a,u=45,h=0,f=0,c=2,v=0,p=c*a,d=r?1:-1,g=i/2*d,m=h+g,x=f-o,y=m+c*d,w=x,M=y-v*d,A=w+p,b=h-g,Z=f-s,U=b+v*d,P=Z-p,T=Math.ceil(t/5),I=Math.floor(T/10);T-=8*I;for(var C=[],_=[],B=0;B<T/2;B++,I--){I<=0&&T%2==1&&B===(T-1)/2&&(U=(b=h)+v*d,P=(Z=(Z+x)/2)-p);var S=k(b,Z,e,u),F=(0,n.Z)(S,2),V=F[0],D=F[1];if(I>0){var R=k(y,Z,e,u),L=(0,n.Z)(R,2),j=L[0],E=L[1],G=k(m,x,e,u),N=(0,n.Z)(G,2),q=N[0],O=N[1];C.push(j),C.push(E),C.push(V),C.push(D),C.push(q),C.push(O)}else{var W=k(y,w,e,u),X=(0,n.Z)(W,2),K=X[0],z=X[1],J=k(M,A,e,u),H=(0,n.Z)(J,2),Q=H[0],Y=H[1],$=k(U,P,e,u),tt=(0,n.Z)($,2),et=tt[0],rt=tt[1];_.push(V),_.push(D),_.push(et),_.push(rt),_.push(Q),_.push(Y),_.push(K),_.push(z)}Z+=l,x+=l,w+=l,A+=l,P+=l}var nt=k(h+g,f+o,e,u),it=(0,n.Z)(nt,2),at=it[0],lt=it[1],ot=(i/2+c)*d,st=k(h+ot,f+o,e,u),ut=(0,n.Z)(st,2),ht=ut[0],ft=ut[1],ct=k(h+g,f-s,e,u),vt=(0,n.Z)(ct,2),pt=vt[0],dt=vt[1],gt=k(h+ot,f-s,e,u),mt=(0,n.Z)(gt,2),xt=mt[0],yt=mt[1];return{pennants:C,barbs:_,shaft:[at,lt,ht,ft,pt,dt,xt,yt]}}function k(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=Math.sqrt(t*t+e*e)/n,a=(2*Math.PI+Math.atan2(e,t))%(2*Math.PI);return[i,(2*Math.PI+a-r)%(2*Math.PI)]}var M=[0,1,3,6,10,16,21,27,33,40,47,55,63],A=[0,.5,1,1.5,2],b=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function Z(t,e,r,n){var i,a=h(n||"knots",r);for(i=1;i<e.length;i++)if(i===e.length-1){if(t<e[i]*a)break}else if(t<=e[i]*a)break;return Math.min(i-1,e.length-2)}function U(t,e,r,n,i){var a=0;switch(e){case"beaufort_kn":a=Z(t,M,"knots",r);break;case"beaufort_km":a=Z(t,M,"kilometer-per-hour",r);break;case"beaufort_ft":a=Z(t,M,"feet-per-second",r);break;case"beaufort_m":a=Z(t,M,"meter-per-second",r);break;case"classified_arrow":a=Z(t,null!==i&&void 0!==i?i:[],n,r);break;case"ocean_current_m":a=Z(t,A,"meter-per-second",r);break;case"ocean_current_kn":a=Z(t,b,"knots",r)}return a}var P=[];function T(t,e){for(var r=0,n=0,i=t.width,a=t.height,l=t.mask,o=t.pixels[0],s=[],f=[],c=h(u.fromJSON(e.inputUnit),"knots"),v="wind_speed"===e.style?5:Number.MAX_VALUE,p=0;p<a;p++)for(var d=0;d<i;d++){var g=o[p*i+d]*c;if((!l||l[p*i+d])&&g<v){for(var m=0;m<4;m++)s[r++]=(d+.5)/i,s[r++]=(p+.5)/a,s[r++]=m<2?-.5:.5,s[r++]=m%2==0?-.5:.5,s[r++]=0,s[r++]=g;var x=4*(r/24-1);f[n++]=x,f[n++]=x+1,f[n++]=x+2,f[n++]=x+1,f[n++]=x+2,f[n++]=x+3}}return{vertexData:new Float32Array(s),indexData:new Uint32Array(f)}}function I(t,e){return"simple_scalar"===e.style?T(t,e):"wind_speed"===e.style?function(t,e){if(0===P.length)for(var r=0;r<30;r++)P.push(w(5*r,0,!e.invertDirection));for(var n=h(u.fromJSON(e.inputUnit),"knots"),i=t.width,a=t.height,l=t.mask,o=t.pixels[0],s=t.pixels[1],f=[],c=[],v=0,p=0,d=0;d<a;d++)for(var g=0;g<i;g++){var m=d*i+g,x=o[m]*n;if((!l||l[d*i+g])&&x>=5){var y=(s[m]+360)%360/180*Math.PI,k=P[Math.min(Math.floor(x/5),29)],M=k.pennants,A=k.barbs,b=k.shaft;if(M.length+A.length===0)continue;for(var Z=f.length/6,U=(g+.5)/i,T=(d+.5)/a,I=0;I<M.length;I+=2)f[v++]=U,f[v++]=T,f[v++]=M[I],f[v++]=M[I+1]+y,f[v++]=0,f[v++]=x;for(var C=0;C<A.length;C+=2)f[v++]=U,f[v++]=T,f[v++]=A[C],f[v++]=A[C+1]+y,f[v++]=0,f[v++]=x;for(var _=0;_<b.length;_+=2)f[v++]=U,f[v++]=T,f[v++]=b[_],f[v++]=b[_+1]+y,f[v++]=0,f[v++]=x;for(var B=0;B<M.length/6;B++)c[p++]=Z,c[p++]=Z+1,c[p++]=Z+2,Z+=3;for(var S=0;S<A.length/8;S++)c[p++]=Z,c[p++]=Z+1,c[p++]=Z+2,c[p++]=Z+1,c[p++]=Z+2,c[p++]=Z+3,Z+=4;c[p++]=Z+0,c[p++]=Z+1,c[p++]=Z+2,c[p++]=Z+1,c[p++]=Z+3,c[p++]=Z+2,Z+=4}}return{vertexData:new Float32Array(f),indexData:new Uint32Array(c)}}(t,e):function(t,e){for(var r=e.style,n=e.inputUnit,i=e.outputUnit,a=e.breakValues,l=u.fromJSON(n),o=u.fromJSON(i),s=0,h=0,f=t.width,c=t.height,v=t.mask,p=t.pixels[0],d=t.pixels[1],g=null!=v?v.filter((function(t){return t>0})).length:f*c,m=new Float32Array(42*g),w=new Uint32Array(15*g),k=e.invertDirection?y(0,0,0,!1):x,M=0;M<c;M++)for(var A=0;A<f;A++){var b=M*f+A;if(!v||v[M*f+A]){for(var Z=(d[b]+360)%360/180*Math.PI,P=U(p[b],r,l,o,a),T=0;T<k.length;T+=2)m[s++]=(A+.5)/f,m[s++]=(M+.5)/c,m[s++]=k[T],m[s++]=k[T+1]+Z,m[s++]=P,m[s++]=p[b];var I=7*(s/42-1);w[h++]=I,w[h++]=I+1,w[h++]=I+2,w[h++]=I+0,w[h++]=I+4,w[h++]=I+3,w[h++]=I+0,w[h++]=I+2,w[h++]=I+3,w[h++]=I+2,w[h++]=I+5,w[h++]=I+3,w[h++]=I+5,w[h++]=I+6,w[h++]=I+3}}return{vertexData:m,indexData:w}}(t,e)}function C(t,e,r){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=t.width,s=t.height,u=t.mask,h=(0,n.Z)(t.pixels,2),f=h[0],p=h[1],d=(0,n.Z)(i,2),g=d[0],m=d[1],x=Math.round((o-g)/r),y=Math.round((s-m)/r),w=x*y,k=new Float32Array(w),M=new Float32Array(w),A=new Uint8Array(w),b="vector-uv"===e,Z=0;Z<y;Z++)for(var U=0;U<x;U++){for(var P=0,T=Z*x+U,I=Math.max(0,Z*r+m),C=Math.max(0,U*r+g),_=Math.min(s,I+r),B=Math.min(o,C+r),S=I;S<_;S++)for(var F=C;F<B;F++){var V=S*o+F;if(!u||u[V]){P++;var D=b?[f[V],p[V]]:[f[V],(360+p[V])%360],R=b?D:v(D),L=(0,n.Z)(R,2),j=L[0],E=L[1];k[T]+=j,M[T]+=E}}if(P>=(_-I)*(B-C)*(1-l)){A[T]=1;var G=c([k[T]/P,M[T]/P]),N=(0,n.Z)(G,2),q=N[0],O=N[1];k[T]=q,M[T]=O}else A[T]=0,k[T]=0,M[T]=0}var W=new a.Z({width:x,height:y,pixels:[k,M],mask:A});return W.updateStatistics(),W}},55185:function(t,e,r){r.d(e,{GE:function(){return d},KK:function(){return b}});var n=r(74165),i=r(37762),a=r(29439),l=r(15861),o=(r(59486),r(93169)),s=r(32718),u=r(16889),h=r(66978),f=r(84936),c=r(92975),v=r(53866),p=s.Z.getLogger("esri.views.2d.engine.flow.dataUtils");function d(t,e,r,n){return g.apply(this,arguments)}function g(){return g=(0,l.Z)((0,n.Z)().mark((function t(e,r,i,a){var l,s,u,f,c,v,d,g,x;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=performance.now(),s=m(r,i),u=performance.now(),f=y(r,s,i.width,i.height),c=performance.now(),v=w(f,!0),d=performance.now(),g="Streamlines"===e?k(v,10):M(v),x=performance.now(),(0,o.Z)("esri-2d-profiler")&&(p.info("I.1","_createFlowFieldFromData (ms)",Math.round(u-l)),p.info("I.2","_getStreamlines (ms)",Math.round(c-u)),p.info("I.3","createAnimatedLinesData (ms)",Math.round(d-c)),p.info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(x-d)),p.info("I.5","createFlowMesh (ms)",Math.round(x-l)),p.info("I.6","Mesh size (bytes)",g.vertexData.buffer.byteLength+g.indexData.buffer.byteLength)),t.next=4,Promise.resolve();case 4:return(0,h.k_)(a),t.abrupt("return",g);case 6:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function m(t,e){var r=function(t,e,r,n){if(0===n)return t;for(var i=Math.round(3*n),a=new Array(2*i+1),l=0,o=-i;o<=i;o++){var s=Math.exp(-o*o/(n*n));a[o+i]=s,l+=s}for(var u=-i;u<=i;u++)a[u+i]/=l;for(var h=new Float32Array(t.length),f=0;f<r;f++)for(var c=0;c<e;c++){for(var v=0,p=0,d=-i;d<=i;d++)if(!(c+d<0||c+d>=e)){var g=a[d+i];v+=g*t[2*(f*e+(c+d))],p+=g*t[2*(f*e+(c+d))+1]}h[2*(f*e+c)]=v,h[2*(f*e+c)+1]=p}for(var m=new Float32Array(t.length),x=0;x<e;x++)for(var y=0;y<r;y++){for(var w=0,k=0,M=-i;M<=i;M++)if(!(y+M<0||y+M>=r)){var A=a[M+i];w+=A*h[2*((y+M)*e+x)],k+=A*h[2*((y+M)*e+x)+1]}m[2*(y*e+x)]=w,m[2*(y*e+x)+1]=k}return m}(e.data,e.width,e.height,t.smoothing);return t.interpolate?function(t,n){var i=Math.floor(t),a=Math.floor(n);if(i<0||i>=e.width)return[0,0];if(a<0||a>=e.height)return[0,0];var l=t-i,o=n-a,s=i,u=a,h=i<e.width-1?i+1:i,f=a<e.height-1?a+1:a,c=r[2*(u*e.width+s)],v=r[2*(u*e.width+h)],p=r[2*(f*e.width+s)],d=r[2*(f*e.width+h)],g=r[2*(u*e.width+s)+1],m=r[2*(u*e.width+h)+1];return[(c*(1-o)+p*o)*(1-l)+(v*(1-o)+d*o)*l,(g*(1-o)+r[2*(f*e.width+s)+1]*o)*(1-l)+(m*(1-o)+r[2*(f*e.width+h)+1]*o)*l]}:function(t,n){var i=Math.round(t),a=Math.round(n);return i<0||i>=e.width||a<0||a>=e.height?[0,0]:[r[2*(a*e.width+i)],r[2*(a*e.width+i)+1]]}}function x(t,e,r,n,i,l,o,s,u){var h=[],f=r,c=n,v=0,p=e(f,c),d=(0,a.Z)(p,2),g=d[0],m=d[1];g*=t.velocityScale,m*=t.velocityScale;var x,y,w=Math.sqrt(g*g+m*m);h.push({x:f,y:c,t:v,speed:w});for(var k=0;k<t.verticesPerLine;k++){var M=e(f,c),A=(0,a.Z)(M,2),b=A[0],Z=A[1];b*=t.velocityScale,Z*=t.velocityScale;var U=Math.sqrt(b*b+Z*Z);if(U<t.minSpeedThreshold)return h;var P=b/U,T=Z/U;if(f+=P*t.segmentLength,c+=T*t.segmentLength,v+=t.segmentLength/U,Math.acos(P*x+T*y)>t.maxTurnAngle)return h;if(t.collisions){var I=Math.round(f*u),C=Math.round(c*u);if(I<0||I>o-1||C<0||C>s-1)return h;var _=l[C*o+I];if(-1!==_&&_!==i)return h;l[C*o+I]=i}h.push({x:f,y:c,t:v,speed:U}),x=P,y=T}return h}function y(t,e,r,n){for(var i=[],a=new f.Z,l=1/Math.max(t.lineCollisionWidth,1),o=Math.round(r*l),s=Math.round(n*l),u=new Int32Array(o*s),h=0;h<u.length;h++)u[h]=-1;for(var c=[],v=0;v<n;v+=t.lineSpacing)for(var p=0;p<r;p+=t.lineSpacing)c.push({x:p,y:v,sort:a.getFloat()});c.sort((function(t,e){return t.sort-e.sort}));for(var d=0,g=c;d<g.length;d++){var m=g[d],y=m.x,w=m.y;if(a.getFloat()<t.density){var k=x(t,e,y,w,i.length,u,o,s,l);if(k.length<2)continue;i.push(k)}}return i}function w(t,e){var r,n=new f.Z,a=t.reduce((function(t,e){return t+e.length}),0),l=new Float32Array(4*a),o=new Array(t.length),s=0,u=0,h=(0,i.Z)(t);try{for(h.s();!(r=h.n()).done;){var c,v=r.value,p=s,d=(0,i.Z)(v);try{for(d.s();!(c=d.n()).done;){var g=c.value;l[4*s]=g.x,l[4*s+1]=g.y,l[4*s+2]=g.t,l[4*s+3]=g.speed,s++}}catch(m){d.e(m)}finally{d.f()}o[u++]={startVertex:p,numberOfVertices:v.length,totalTime:v[v.length-1].t,timeSeed:e?n.getFloat():0}}}catch(m){h.e(m)}finally{h.f()}return{lineVertices:l,lineDescriptors:o}}function k(t,e){var r,n=t.lineVertices,a=t.lineDescriptors,l=0,o=0,s=(0,i.Z)(a);try{for(s.s();!(r=s.n()).done;){var u=r.value;l+=2*u.numberOfVertices,o+=6*(u.numberOfVertices-1)}}catch(E){s.e(E)}finally{s.f()}var h=new Float32Array(9*l),f=new Uint32Array(o),c=0,v=0;function p(t,e,r,n,i,a,l,o){var s=9*c,u=0;h[s+u++]=t,h[s+u++]=e,h[s+u++]=1,h[s+u++]=r,h[s+u++]=a,h[s+u++]=l,h[s+u++]=n/2,h[s+u++]=i/2,h[s+u++]=o,c++,h[s+u++]=t,h[s+u++]=e,h[s+u++]=-1,h[s+u++]=r,h[s+u++]=a,h[s+u++]=l,h[s+u++]=-n/2,h[s+u++]=-i/2,h[s+u++]=o,c++}var d,g=(0,i.Z)(a);try{for(g.s();!(d=g.n()).done;){for(var m=d.value,x=m.totalTime,y=m.timeSeed,w=null,k=null,M=null,A=null,b=null,Z=null,U=0;U<m.numberOfVertices;U++){var P=n[4*(m.startVertex+U)],T=n[4*(m.startVertex+U)+1],I=n[4*(m.startVertex+U)+2],C=n[4*(m.startVertex+U)+3],_=null,B=null,S=null,F=null;if(U>0){_=P-w,B=T-k;var V=Math.sqrt(_*_+B*B);if(_/=V,B/=V,U>1){var D=_+b,R=B+Z,L=Math.sqrt(D*D+R*R);D/=L,R/=L;var j=Math.min(1/(D*_+R*B),e);S=-(R*=j),F=D*=j}else S=-B,F=_;null!==S&&null!==F&&(p(w,k,M,S,F,x,y,C),f[v++]=c-2,f[v++]=c,f[v++]=c-1,f[v++]=c,f[v++]=c+1,f[v++]=c-1)}w=P,k=T,M=I,b=_,Z=B,A=C}p(w,k,M,-Z,b,x,y,A)}}catch(E){g.e(E)}finally{g.f()}return{vertexData:h,indexData:f}}function M(t){var e,r=t.lineVertices,n=t.lineDescriptors,a=0,l=0,o=(0,i.Z)(n);try{for(o.s();!(e=o.n()).done;){var s=e.value.numberOfVertices-1;a+=4*s*2,l+=6*s*2}}catch(L){o.e(L)}finally{o.f()}var u,h,f,c,v,p,d,g,m,x,y,w,k,M,A=new Float32Array(16*a),b=new Uint32Array(l),Z=0,U=0;function P(){b[U++]=Z-8,b[U++]=Z-7,b[U++]=Z-6,b[U++]=Z-7,b[U++]=Z-5,b[U++]=Z-6,b[U++]=Z-4,b[U++]=Z-3,b[U++]=Z-2,b[U++]=Z-3,b[U++]=Z-1,b[U++]=Z-2}function T(t,e,r,n,i,a,l,o,s,u,h,f,c,v){for(var p=16*Z,d=0,g=0,m=[1,2];g<m.length;g++)for(var x=m[g],y=0,w=[1,2,3,4];y<w.length;y++){var k=w[y];A[p+d++]=t,A[p+d++]=e,A[p+d++]=r,A[p+d++]=n,A[p+d++]=l,A[p+d++]=o,A[p+d++]=s,A[p+d++]=u,A[p+d++]=x,A[p+d++]=k,A[p+d++]=c,A[p+d++]=v,A[p+d++]=i/2,A[p+d++]=a/2,A[p+d++]=h/2,A[p+d++]=f/2,Z++}}function I(t,e){var r=m+y,n=x+w,i=Math.sqrt(r*r+n*n),a=m*(r/=i)+x*(n/=i);r/=a,n/=a;var l=y+k,o=w+M,s=Math.sqrt(l*l+o*o),A=y*(l/=s)+w*(o/=s);T(u,h,f,c,-n,r,v,p,d,g,-(o/=A),l/=A,t,e),P()}function C(t,e,r,n,i,a){if(m=y,x=w,y=k,w=M,null==m&&null==x&&(m=y,x=w),null!=v&&null!=p){k=t-v,M=e-p;var l=Math.sqrt(k*k+M*M);k/=l,M/=l}null!=m&&null!=x&&I(i,a),u=v,h=p,f=d,c=g,v=t,p=e,d=r,g=n}function _(t,e){m=y,x=w,y=k,w=M,null==m&&null==x&&(m=y,x=w),null!=m&&null!=x&&I(t,e)}var B,S=(0,i.Z)(n);try{for(S.s();!(B=S.n()).done;){var F=B.value;u=null,h=null,f=null,c=null,v=null,p=null,d=null,g=null,m=null,x=null,y=null,w=null,k=null,M=null;for(var V=F.totalTime,D=F.timeSeed,R=0;R<F.numberOfVertices;R++)C(r[4*(F.startVertex+R)],r[4*(F.startVertex+R)+1],r[4*(F.startVertex+R)+2],r[4*(F.startVertex+R)+3],V,D);_(V,D)}}catch(L){S.e(L)}finally{S.f()}return{vertexData:A,indexData:b}}function A(t,e){var r=e.pixels,n=e.width,i=e.height,a=new Float32Array(n*i*2),l=e.mask||new Uint8Array(n*i*2);if(e.mask||l.fill(255),"vector-uv"===t)for(var o=0;o<n*i;o++)a[2*o]=r[0][o],a[2*o+1]=-r[1][o];else if("vector-magdir"===t)for(var s=0;s<n*i;s++){var h=r[0][s],f=(0,u.Vl)(r[1][s]),c=Math.cos(f-Math.PI/2),v=Math.sin(f-Math.PI/2);a[2*s]=c*h,a[2*s+1]=v*h}return{data:a,mask:l,width:n,height:i}}function b(t,e,r,n,i,a){return Z.apply(this,arguments)}function Z(){return Z=(0,l.Z)((0,n.Z)().mark((function t(e,r,l,s,u,h){var f,d,g,m,x,y,w,k,M,A,b,Z,P,T,I,C,_,B,S,F,V,D,R;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f=performance.now(),d=(0,c.C5)(r.spatialReference)){t.next=6;break}return t.next=4,U(e,r,l,s,u,h);case 4:return g=t.sent,t.abrupt("return",((0,o.Z)("esri-2d-profiler")&&p.info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-f)),(0,o.Z)("esri-2d-profiler")&&p.info("I.9","Number of parts",1),g));case 6:for(m=(0,a.Z)(d.valid,2),x=m[0],y=m[1],w=y-x,k=Math.ceil(r.width/w),M=r.width/k,A=Math.round(l/k),b=r.xmin,Z=[],P=performance.now(),T=0;T<k;T++)I=new v.Z({xmin:b,xmax:b+M,ymin:r.ymin,ymax:r.ymax,spatialReference:r.spatialReference}),Z.push(U(e,I,A,s,u,h)),b+=M;return t.next=12,Promise.all(Z);case 12:C=t.sent,(0,o.Z)("esri-2d-profiler")&&p.info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-P)),(0,o.Z)("esri-2d-profiler")&&p.info("I.9","Number of parts",C.length),_={data:new Float32Array(l*s*2),mask:new Uint8Array(l*s),width:l,height:s},B=0,S=(0,i.Z)(C);try{for(S.s();!(F=S.n()).done;){for(V=F.value,D=0;D<V.height;D++)for(R=0;R<V.width;R++)B+R>=l||(_.data[2*(D*l+B+R)]=V.data[2*(D*V.width+R)],_.data[2*(D*l+B+R)+1]=V.data[2*(D*V.width+R)+1],_.mask[D*l+B+R]=V.mask[D*V.width+R]);B+=V.width}}catch(n){S.e(n)}finally{S.f()}return t.abrupt("return",((0,o.Z)("esri-2d-profiler")&&p.info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-f)),_));case 19:case"end":return t.stop()}}),t)}))),Z.apply(this,arguments)}function U(t,e,r,n,i,a){return P.apply(this,arguments)}function P(){return P=(0,l.Z)((0,n.Z)().mark((function t(e,r,i,a,l,o){var s,u,h,f,c;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s={requestProjectedLocalDirections:!0,signal:o},null!=l&&(s.timeExtent=l),"imagery"!==e.type){t.next=9;break}return t.next=4,e.load({signal:o});case 4:return u=e.rasterInfo.dataType,t.next=7,e.fetchImage(r,i,a,s);case 7:return h=t.sent,t.abrupt("return",h&&null!=h.pixelData&&null!=h.pixelData.pixelBlock?A(u,h.pixelData.pixelBlock):{data:new Float32Array(i*a*2),mask:new Uint8Array(i*a),width:i,height:a});case 9:return t.next=11,e.load({signal:o});case 11:return f=e.rasterInfo.dataType,t.next=14,e.fetchPixels(r,i,a,s);case 14:return c=t.sent,t.abrupt("return",c&&null!=c.pixelBlock?A(f,c.pixelBlock):{data:new Float32Array(i*a*2),mask:new Uint8Array(i*a),width:i,height:a});case 16:case"end":return t.stop()}}),t)}))),P.apply(this,arguments)}}}]);
//# sourceMappingURL=5345.59b48b2f.chunk.js.map