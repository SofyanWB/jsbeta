{"version":3,"file":"static/js/8178.826dc9f0.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"../../../core/asyncUtils.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{throwIfAborted as s,isAbortError as a}from\"../../../core/promiseUtils.js\";import{equals as i,WGS84 as n}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as o,convertToGeometry as u}from\"../featureConversionUtils.js\";import p from\"../data/FeatureStore.js\";import{project as h,checkProjectionSupport as y}from\"../data/projectionSupport.js\";import{QueryEngine as c}from\"../data/QueryEngine.js\";import{validateGeoJSON as l,createOptimizedFeatures as m}from\"./geojson/geojson.js\";import{mixAttributes as g}from\"./support/sourceUtils.js\";import{getFeature as _}from\"../../ogc/wfsUtils.js\";import f from\"../../support/FieldsIndex.js\";class d{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,r=await _(this._getFeatureUrl??\"\",this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await l(r),s(e);const a=m(r,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!i(this._queryEngine.spatialReference,n))for(const s of a)null!=s.geometry&&(s.geometry=o(h(u(s.geometry,this._queryEngine.geometryType,!1,!1),n,this._queryEngine.spatialReference)));let p=1;for(const s of a){const e={};g(this._fieldsIndex,e,s.attributes,!0),s.attributes=e,null==s.attributes[t]&&(s.objectId=s.attributes[t]=p++)}return a}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:a,spatialReference:i,fields:n,geometryType:o,featureType:u,objectIdField:h,customParameters:y}=e;this._featureType=u,this._customParameters=y,this._getFeatureUrl=r,this._getFeatureOutputFormat=a,this._fieldsIndex=new f(n),await this._checkProjection(i),s(t),this._queryEngine=new c({fields:n,geometryType:o,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:i,timeInfo:null,featureStore:new p({geometryType:o,hasM:!1,hasZ:!1})});const l=await this._snapshotFeatures(t.signal);return this._queryEngine.featureStore.addMany(l),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new t(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=e(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),a(e)||r.getLogger(\"esri.layers.WFSLayer\").error(new t(\"wfs-layer:getfeature-error\",\"An error occurred during the GetFeature request\",{error:e}))})),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(e){try{await y(n,e)}catch{throw new t(\"unsupported-projection\",\"Projection not supported\",{spatialReference:e})}}}export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{isValid as e}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{validateFieldValue as t,validationErrorToString as n,isNumericField as i,isStringField as r,sanitizeNullFieldValue as s}from\"../../../support/fieldUtils.js\";class o{constructor(){this.code=null,this.description=null}}class l{constructor(e){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function u(e){return new l(e)}class a{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new a(e)}const f=new Set;function d(e,i,r,s=!1,o){f.clear();for(const l in r){const a=e.get(l);if(!a)continue;const c=r[l],d=m(a,c);if(d!==c&&o&&o.push({name:\"invalid-value-type\",message:\"attribute value was converted to match the field type\",details:{field:a,originalValue:c,sanitizedValue:d}}),f.add(a.name),a&&(s||a.editable)){const e=t(a,d);if(e)return u(n(e,a,d));i[a.name]=d}}for(const t of e?.requiredFields??[])if(!f.has(t.name))return u(`missing required field \"${t.name}\"`);return null}function m(e,t){let n=t;return\"string\"==typeof t&&i(e)?n=parseFloat(t):null!=t&&r(e)&&\"string\"!=typeof t&&(n=String(t)),s(n)}let p;function h(t,n){if(!t||!e(n))return t;if(\"rings\"in t||\"paths\"in t){if(null==p)throw new TypeError(\"geometry engine not loaded\");return p.simplify(n,t)}return t}async function g(){return null==p&&(p=await import(\"../../../../geometry/geometryEngineJSON.js\")),p}async function y(t,n){!e(t)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await g()}export{u as createFeatureEditErrorResult,c as createFeatureEditSuccessResult,y as loadGeometryEngineForSimplify,d as mixAttributes,h as simplify};\n"],"names":["d","this","_queryEngine","_customParameters","_snapshotFeatures","e","t","objectIdField","_","_getFeatureUrl","_featureType","typeName","_getFeatureOutputFormat","customParameters","dateFields","fieldsIndex","map","name","signal","r","l","s","a","m","geometryType","hasZ","i","spatialReference","n","geometry","o","h","u","p","g","_fieldsIndex","attributes","objectId","destroy","getFeatureUrl","getFeatureOutputFormat","fields","featureType","y","f","_checkProjection","c","hasM","timeInfo","featureStore","addMany","fetchRecomputedExtents","fullExtent","extent","_waitSnapshotComplete","executeQuery","executeQueryForCount","executeQueryForIds","executeQueryForExtent","executeQueryForSnapping","_snapshotTask","abort","promise","then","clear","error","finished","code","description","globalId","success","uniqueId","Set","get","push","message","details","field","originalValue","sanitizedValue","add","editable","requiredFields","has","parseFloat","String","TypeError","simplify"],"sourceRoot":""}