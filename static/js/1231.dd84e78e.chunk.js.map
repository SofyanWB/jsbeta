{"version":3,"file":"static/js/1231.dd84e78e.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js","../node_modules/@arcgis/core/views/layers/MapImageLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as r}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsCollection as h}from\"../../../support/GraphicsCollection.js\";import{BitmapContainer as o}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import g from\"./graphics/GraphicsView2D.js\";import n from\"./graphics/HighlightGraphicContainer.js\";import l from\"./support/ExportStrategy.js\";import m from\"../../layers/LayerView.js\";import c from\"../../layers/MapImageLayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import{MapServiceLayerViewHelper as u}from\"../../layers/support/MapServiceLayerViewHelper.js\";import{createQueryGeometry as y}from\"../../support/drapedUtils.js\";let f=class extends(c(d(p(m)))){constructor(){super(...arguments),this._highlightGraphics=new h,this._updateHash=\"\"}fetchPopupFeatures(t,e){return this._popupHighlightHelper.fetchPopupFeatures(t,e)}update(t){const r=`${this.exportImageVersion}/${t.state.id}/${t.pixelRatio}/${t.stationary}`;this._updateHash!==r&&(this._updateHash=r,this.strategy.update(t).catch((t=>{i(t)||e.getLogger(this).error(t)})),t.stationary&&this._popupHighlightHelper.updateHighlightedFeatures(t.state.resolution)),this._highlightView.processUpdate(t)}attach(){const{imageMaxWidth:t,imageMaxHeight:e,version:i}=this.layer,s=i>=10.3,a=i>=10;this._bitmapContainer=new o,this.container.addChild(this._bitmapContainer),this._highlightView=new g({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new n(this.view.featuresTilingScheme),defaultPointSymbolEnabled:!1}),this.container.addChild(this._highlightView.container),this._popupHighlightHelper=new u({createFetchPopupFeaturesQueryGeometry:(t,e)=>y(t,e,this.view),highlightGraphics:this._highlightGraphics,highlightGraphicUpdated:(t,e)=>{this._highlightView.graphicUpdateHandler({graphic:t,property:e})},layerView:this,updatingHandles:this.updatingHandles}),this.strategy=new l({container:this._bitmapContainer,fetchSource:this.fetchImageBitmap.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:t,imageMaxHeight:e,imageRotationSupported:s,imageNormalizationSupported:a,hidpi:!0}),this.addAttachHandles(r((()=>this.exportImageVersion),(()=>this.requestUpdate()))),this.requestUpdate()}detach(){this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren(),this._highlightView.destroy(),this._popupHighlightHelper.destroy()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}supportsSpatialReference(t){return this.layer.serviceSupportsSpatialReference(t)}async doRefresh(){this._updateHash=\"\",this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(t,e,i,r){return this.layer.fetchImage(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}fetchImageBitmap(t,e,i,r){return this.layer.fetchImageBitmap(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}highlight(t){return this._popupHighlightHelper.highlight(t)}};t([s()],f.prototype,\"strategy\",void 0),t([s()],f.prototype,\"updating\",void 0),f=t([a(\"esri.views.2d.layers.MapImageLayerView2D\")],f);const w=f;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import{combinedViewLayerTimeExtentProperty as o}from\"../../layers/support/commonProperties.js\";import{ExportImageParameters as s}from\"../../layers/support/ExportImageParameters.js\";const p=p=>{let a=class extends p{initialize(){this.exportImageParameters=new s({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){return this.view?.floors??null}get exportImageVersion(){return this.exportImageParameters?.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),this.commitProperty(\"floors\"),(this._get(\"exportImageVersion\")||0)+1}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([r()],a.prototype,\"exportImageParameters\",void 0),e([r({readOnly:!0})],a.prototype,\"floors\",null),e([r({readOnly:!0})],a.prototype,\"exportImageVersion\",null),e([r()],a.prototype,\"layer\",void 0),e([r()],a.prototype,\"suspended\",void 0),e([r(o)],a.prototype,\"timeExtent\",void 0),a=e([t(\"esri.views.layers.MapImageLayerView\")],a),a};export{p as default};\n"],"names":["f","arguments","_highlightGraphics","h","_updateHash","t","e","this","_popupHighlightHelper","fetchPopupFeatures","r","exportImageVersion","state","id","pixelRatio","stationary","strategy","update","catch","i","error","updateHighlightedFeatures","resolution","_highlightView","processUpdate","layer","imageMaxWidth","imageMaxHeight","version","s","a","_bitmapContainer","o","container","addChild","g","view","graphics","requestUpdateCallback","requestUpdate","n","featuresTilingScheme","defaultPointSymbolEnabled","u","createFetchPopupFeaturesQueryGeometry","y","highlightGraphics","highlightGraphicUpdated","graphicUpdateHandler","graphic","property","layerView","updatingHandles","l","fetchSource","fetchImageBitmap","bind","imageRotationSupported","imageNormalizationSupported","hidpi","addAttachHandles","destroy","removeAllChildren","serviceSupportsSpatialReference","updating","updateRequested","fetchImage","timeExtent","floors","highlight","p","exportImageParameters","get","commitProperty","_get","isEmpty","prototype","readOnly","c","d","m","w"],"sourceRoot":""}