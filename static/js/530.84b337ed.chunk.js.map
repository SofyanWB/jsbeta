{"version":3,"file":"static/js/530.84b337ed.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js","../node_modules/@arcgis/core/views/layers/StreamLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{handlesGroup as r}from\"../../../core/handleUtils.js\";import{watch as s}from\"../../../core/reactiveUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../rest/support/FeatureSet.js\";import a from\"./FeatureLayerView2D.js\";import{toJSONGeometryType as l}from\"./support/util.js\";import p from\"../../layers/StreamLayerView.js\";function c(e,t){if(null==e&&null==t)return null;const r={};return null!=t&&(r.geometry=t.toJSON()),null!=e&&(r.where=e),r}let u=class extends(p(a)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null,this._enabledEventTypes=new Set}initialize(){this.addHandles([s((()=>this.layer.customParameters),(e=>this._proxy.updateCustomParameters(e))),this.layer.on(\"send-message-to-socket\",(e=>this._proxy.sendMessageToSocket(e))),this.layer.on(\"send-message-to-client\",(e=>this._proxy.sendMessageToClient(e))),s((()=>this.layer.purgeOptions),(()=>this._update())),s((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\")}get connectionError(){return this.pipelineErrorString?new t(\"stream-controller\",this.pipelineErrorString):null}on(e,t){if(Array.isArray(e))return r(e.map((e=>this.on(e,t))));const s=[\"data-received\",\"message-received\"].includes(e);s&&(this._enabledEventTypes.add(e),this._proxy.enableEvent(e,!0));const i=super.on(e,t),o=this;return{remove(){i.remove(),s&&(o._proxy.closed||o.hasEventListener(e)||o._proxy.enableEvent(e,!1))}}}queryLatestObservations(e,r){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new t(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._proxy.queryLatestObservations(this._cleanUpQuery(e),r).then((e=>{const t=n.fromJSON(e);return t.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),t}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){this._proxy?.pauseStream()}_doResume(){this._proxy?.resumeStream()}_createClientOptions(){return{...super._createClientOptions(),setProperty:e=>{this.set(e.propertyName,e.value)}}}_createTileRendererHash(e){const t=`${JSON.stringify(this.layer.purgeOptions)}.${JSON.stringify(c(this.layer.definitionExpression,this.layer.geometryDefinition))})`;return super._createTileRendererHash(e)+t}async _createServiceOptions(){const e=this.layer,{objectIdField:t}=e,r=e.fields.map((e=>e.toJSON())),s=l(e.geometryType),i=e.timeInfo&&e.timeInfo.toJSON()||null,o=e.spatialReference?e.spatialReference.toJSON():null;return{type:\"stream\",isPaused:this._isUserPaused,fields:r,geometryType:s,objectIdField:t,timeInfo:i,source:this.layer.parsedUrl,serviceFilter:c(this.layer.definitionExpression,this.layer.geometryDefinition),purgeOptions:this.layer.purgeOptions.toJSON(),enabledEventTypes:Array.from(this._enabledEventTypes.values()),spatialReference:o,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,updateInterval:this.layer.updateInterval,customParameters:e.customParameters}}};e([i()],u.prototype,\"pipelineConnectionStatus\",void 0),e([i()],u.prototype,\"pipelineErrorString\",void 0),e([i({readOnly:!0})],u.prototype,\"connectionError\",null),e([i({readOnly:!0})],u.prototype,\"_streamConnectionStatus\",null),u=e([o(\"esri.views.2d.layers.StreamLayerView2D\")],u);const y=u;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/accessorSupport/ensureType.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import t from\"../../layers/support/FeatureFilter.js\";const o=o=>{let i=class extends o{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return this._isUserPaused?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:t})],i.prototype,\"filter\",void 0),i=s([r(\"esri.layers.mixins.StreamLayerView\")],i),i};export{o as default};\n"],"names":["c","e","t","r","geometry","toJSON","where","u","arguments","pipelineConnectionStatus","pipelineErrorString","_enabledEventTypes","Set","this","addHandles","s","layer","customParameters","_proxy","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","purgeOptions","_update","suspended","_onSuspendedChange","bind","get","Array","isArray","map","includes","add","enableEvent","i","o","remove","closed","hasEventListener","timeInfo","endField","startField","trackIdField","queryLatestObservations","_cleanUpQuery","then","n","features","forEach","sourceLayer","pauseStream","resumeStream","setProperty","set","propertyName","value","JSON","stringify","definitionExpression","geometryDefinition","objectIdField","fields","l","geometryType","spatialReference","type","isPaused","_isUserPaused","source","parsedUrl","serviceFilter","enabledEventTypes","from","values","maxReconnectionAttempts","maxReconnectionInterval","updateInterval","filter","_doResume","_doPause","_streamConnectionStatus","prototype","readOnly","p","a","y"],"sourceRoot":""}