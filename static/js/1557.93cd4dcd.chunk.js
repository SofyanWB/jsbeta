"use strict";(self.webpackChunkjakartasatubeta=self.webpackChunkjakartasatubeta||[]).push([[1557],{81735:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(15671),a=r(43144),i=r(60136),s=r(29388),u=r(27366),l=r(41691),o=r(49861),c=(r(25243),r(63780),r(93169),r(69912)),f=function(e){(0,i.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,a.Z)(r,[{key:"initialize",value:function(){}},{key:"destroy",value:function(){}},{key:"supportsTileUpdates",get:function(){return!1}},{key:"spatialReference",get:function(){var e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}}]),r}(l.r);(0,u._)([(0,o.Cb)({readOnly:!0})],f.prototype,"supportsTileUpdates",null),(0,u._)([(0,o.Cb)({constructOnly:!0})],f.prototype,"remoteClient",void 0),(0,u._)([(0,o.Cb)({constructOnly:!0})],f.prototype,"service",void 0),(0,u._)([(0,o.Cb)()],f.prototype,"spatialReference",null),(0,u._)([(0,o.Cb)({constructOnly:!0})],f.prototype,"tileInfo",void 0),(0,u._)([(0,o.Cb)({constructOnly:!0})],f.prototype,"tileStore",void 0);var p=f=(0,u._)([(0,c.j)("esri.views.2d.layers.features.processors.BaseProcessor")],f)},3561:function(e,t,r){r.r(t),r.d(t,{default:function(){return C}});var n=r(37762),a=r(74165),i=r(15861),s=r(15671),u=r(43144),l=r(60136),o=r(29388),c=r(27366),f=r(75746),p=(r(10064),r(93169),r(32718),r(92026)),h=r(66978),d=(r(25243),r(63780),r(69912)),y=r(48732),v=r(78952),m=r(84328),b=r(80613),g=r(72774),k=r(74017),_=r(61909),x=r(69813),Z=r(27301),w=r(81735),S=r(1413),M=function(){function e(t){(0,s.Z)(this,e),this._remoteClient=t,this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}return(0,u.Z)(e,[{key:"destroy",value:function(){}},{key:"fetchResource",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i,s,u=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._resourceMap,!(i=n.get(t))){e.next=3;break}return e.abrupt("return",i);case 3:if(!(s=this._inFlightResourceMap.get(t))){e.next=6;break}return e.abrupt("return",s);case 6:e.prev=6,s=this._remoteClient.invoke("tileRenderer.fetchResource",{url:t},(0,S.Z)({},r)),this._inFlightResourceMap.set(t,s),s.then((function(e){return u._inFlightResourceMap.delete(t),n.set(t,e),e})),e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(6),e.abrupt("return",(0,h.D_)(e.t0)?null:{width:0,height:0});case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getResource",value:function(e){var t;return null!==(t=this._resourceMap.get(e))&&void 0!==t?t:null}},{key:"loadFont",value:function(e){return Promise.resolve(null)}}]),e}();function I(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}function T(e){var t=e.message,r={message:{data:{},tileKey:t.tileKey,tileKeyOrigin:t.tileKeyOrigin,version:t.version},transferList:new Array};for(var n in t.data){var a=n,i=t.data[a];if(r.message.data[a]=null,null!=i){var s=i.stride,u=i.indices.slice(0),l=i.vertices.slice(0),o=i.records.slice(0),c={stride:s,indices:u,vertices:l,records:o,metrics:(0,p.yw)(i.metrics,(function(e){return e.slice(0)}))};r.transferList.push(u,l,o),r.message.data[a]=c}}return r}var D=function(e){(0,l.Z)(r,e);var t=(0,o.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments)).type="symbol",e._matchers={feature:null,aggregate:null},e._bufferData=new Map,e._bufferIds=new Map,e}return(0,u.Z)(r,[{key:"initialize",value:function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))]),this._resourceManagerProxy=new M(this.remoteClient)}},{key:"destroy",value:function(){this._resourceManagerProxy.destroy()}},{key:"supportsTileUpdates",get:function(){return!0}},{key:"forEachBufferId",value:function(e){this._bufferIds.forEach((function(t){t.forEach(e)}))}},{key:"update",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("symbol"===(i=r.schema.processors[0]).type){e.next=3;break}return e.abrupt("return");case 3:s=(0,y.Hg)(this._schema,i),((0,y.uD)(s,"mesh")||(0,y.uD)(s,"target"))&&(t.mesh=!0,null!==(n=t.why)&&void 0!==n&&n.mesh.push("Symbology changed"),this._schema=i,this._factory=this._createFactory(i),this._factory.update(i,this.tileStore.tileScheme.tileInfo));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"onTileMessage",value:function(e,t,r,n){return(0,h.k_)(n),this._onTileData(e,t,r,n)}},{key:"onTileClear",value:function(e,t){var r={clear:!0,end:t};return this._bufferData.delete(e.key.id),this._bufferIds.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:r})}},{key:"onTileError",value:function(e,t,r){var n=r.signal,a={tileKey:e.id,error:t};return this.remoteClient.invoke("tileRenderer.onTileError",a,{signal:n})}},{key:"onTileUpdate",value:function(e){var t,r=this,a=(0,n.Z)(e.removed);try{for(a.s();!(t=a.n()).done;){var i=t.value;this._bufferData.has(i.key.id)&&this._bufferData.delete(i.key.id),this._bufferIds.has(i.key.id)&&this._bufferIds.delete(i.key.id)}}catch(o){a.e(o)}finally{a.f()}var s,u=(0,n.Z)(e.added);try{var l=function(){var e=s.value;r._bufferData.forEach((function(t){var a,i=(0,n.Z)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;s.message.tileKey===e.id&&r._updateTileMesh("append",e,T(s),[],!1,!1,null)}}catch(o){i.e(o)}finally{i.f()}}))};for(u.s();!(s=u.n()).done;)l()}catch(o){u.e(o)}finally{u.f()}}},{key:"_addBufferData",value:function(e,t){var r;this._bufferData.has(e)||this._bufferData.set(e,[]),null===(r=this._bufferData.get(e))||void 0===r||r.push(T(t))}},{key:"_createFactory",value:function(e){var t=this,r=this.service,n=r.geometryType,a=r.objectIdField,i={geometryType:n,fields:r.fields,spatialReference:v.Z.fromJSON(this.spatialReference)},s=new _.Wr((function(e,r){return t.remoteClient.invoke("tileRenderer.getMaterialItems",e,r)}),this.tileStore.tileScheme.tileInfo),u=e.mesh,l=u.matcher,o=u.aggregateMatcher;return this._store=s,this._matchers.feature=(0,x.fL)(l,s,i,this._resourceManagerProxy),this._matchers.aggregate=(0,p.yw)(o,(function(e){return(0,x.fL)(e,s,i,t._resourceManagerProxy)})),new k.j(n,a,s)}},{key:"_onTileData",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,i,s){var u,l,o,c,f,p,d,y,v,m,b,g,k,_,x,Z,w,S,M,I,T,D,C,R,K=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,h.k_)(s),l=r.type,o=r.addOrUpdate,c=r.remove,f=r.clear,p=r.end,d=!!this._schema.mesh.sortKey,o){e.next=5;break}return y={type:l,addOrUpdate:null,remove:c,clear:f,end:p,sort:d},e.abrupt("return",this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:t.id,data:y},s));case 5:return v=this._processFeatures(t,o,i,s,null===(u=r.status)||void 0===u?void 0:u.version),e.prev=6,e.next=9,v;case 9:if(null!=(m=e.sent)){e.next=13;break}return b={type:l,addOrUpdate:null,remove:c,clear:f,end:p,sort:d},e.abrupt("return",this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:t.id,data:b},s));case 13:g=[],k=(0,n.Z)(m),e.prev=15,k.s();case 17:if((_=k.n()).done){e.next=41;break}if(x=_.value,Z=!1,w=x.message.bufferIds,S=t.key.id,M=x.message.tileKey,S===M||null==w){e.next=38;break}if(this.tileStore.get(M)){e.next=25;break}return this._addBufferData(S,x),g.push(x),e.abrupt("continue",39);case 25:(I=this._bufferIds.get(M))||(I=new Set,this._bufferIds.set(M,I)),T=Array.from(w),D=0,C=T;case 29:if(!(D<C.length)){e.next=38;break}if(R=C[D],!I.has(R)){e.next=34;break}return Z=!0,e.abrupt("break",38);case 34:I.add(R);case 35:D++,e.next=29;break;case 38:Z||(this._addBufferData(S,x),g.push(x));case 39:e.next=17;break;case 41:e.next=46;break;case 43:e.prev=43,e.t0=e.catch(15),k.e(e.t0);case 46:return e.prev=46,k.f(),e.finish(46);case 49:return e.next=51,Promise.all(g.map((function(e){var n=t.key.id===e.message.tileKey,a=n?r.remove:[],i=n&&r.end;return K._updateTileMesh(l,t,e,a,i,!!r.clear,s.signal)})));case 51:e.next=56;break;case 53:e.prev=53,e.t1=e.catch(6),this._handleError(t,e.t1,s);case 56:case"end":return e.stop()}}),e,this,[[6,53],[15,43,46,49]])})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"_updateTileMesh",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,n,i,s,u,l){var o,c,f,d,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t,c=n.message.tileKey,f=!!this._schema.mesh.sortKey,c!==r.key.id&&(s=!1),d={type:o,addOrUpdate:(0,p.yw)(n,(function(e){return e.message})),remove:i,clear:u,end:s,sort:f},y={transferList:(0,p.yw)(n,(function(e){return e.transferList}))||[]||0,signal:l},e.abrupt("return",((0,h.k_)(y),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:c,data:d},y)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i,s,u){return e.apply(this,arguments)}}()},{key:"_processFeatures",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,n,i,s){var u,l,o,c,f,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r&&r.hasFeatures){e.next=2;break}return e.abrupt("return",null);case 2:return u={transform:t.transform,hasZ:!1,hasM:!1},l=this._factory,o={viewingMode:"",scale:t.scale},e.next=7,this._matchers.feature;case 7:return c=e.sent,e.next=10,this._matchers.aggregate;case 10:return f=e.sent,(0,h.k_)(i),p=this._getLabelInfos(t,r),e.next=15,l.analyze(r.getCursor(),this._resourceManagerProxy,c,f,u,o);case 15:return(0,h.k_)(i),e.abrupt("return",this._writeFeatureSet(t,r,u,p,l,n,s));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,i){return e.apply(this,arguments)}}()},{key:"_writeFeatureSet",value:function(e,t,r,n,a,i,s){for(var u=t.getSize(),l=this._schema.mesh.matcher.symbologyType,o=new g._(e.key.id,{features:u,records:u,metrics:0},l,i,l!==b.mD.HEATMAP,s),c={viewingMode:"",scale:e.scale},f=t.getCursor();f.next();)try{var p=f.getDisplayId(),h=null!=n?n.get(p):null;a.writeCursor(o,f,r,c,e.level,h,this._resourceManagerProxy)}catch(y){}var d=e.tileInfoView.tileInfo.isWrappable;return o.serialize(d)}},{key:"_handleError",value:function(e,t,r){if(!(0,h.D_)(t)){var n={tileKey:e.id,error:t.message};return this.remoteClient.invoke("tileRenderer.onTileError",n,{signal:r.signal})}return Promise.resolve()}},{key:"_getLabelingSchemaForScale",value:function(e){var t=this._schema.mesh.labels;if(null==t)return null;if("subtype"===t.type){var r={type:"subtype",classes:{}},n=!1;for(var a in t.classes){var i=t.classes[a].filter((function(t){return I(t,e.scale)}));n=n||!!i.length,r.classes[a]=i}return n?r:null}var s=t.classes.filter((function(t){return I(t,e.scale)}));return s.length?{type:"simple",classes:s}:null}},{key:"_getLabels",value:function(e,t){if("subtype"===t.type){var r,n=this.service.subtypeField,a=(0,p.s3)(n,"Expected to find subtype Field"),i=e.readAttribute(a);return null==i?[]:null!==(r=t.classes[i])&&void 0!==r?r:[]}return t.classes}},{key:"_getLabelInfos",value:function(e,t){var r=this,a=this._getLabelingSchemaForScale(e);if(null==a)return null;for(var i=new Map,s=t.getCursor(),u=function(){var e,t=s.getDisplayId(),u=[],l=(0,m.nE)(t),o=l&&1!==s.readAttribute("cluster_count")?"aggregate":"feature",c=r._getLabels(s,a),p=(0,n.Z)(c);try{var h=function(){var n=e.value;if(n.target!==o)return"continue";var a=s.getStorage(),i=l&&"feature"===o?a.getComputedStringAtIndex(s.readAttribute("referenceId"),n.fieldIndex):a.getComputedStringAtIndex(t,n.fieldIndex);if(!i)return"continue";var c=(0,f.E)(i.toString()),p=c[0],h=c[1];r._store.getMosaicItem(n.symbol,(0,Z._)(p)).then((function(e){var t;u[n.index]={glyphs:null!==(t=e.glyphMosaicItems)&&void 0!==t?t:[],rtl:h,index:n.index}}))};for(p.s();!(e=p.n()).done;)h()}catch(d){p.e(d)}finally{p.f()}i.set(t,u)};s.next();)u();return i}}]),r}(w.Z),C=D=(0,c._)([(0,d.j)("esri.views.2d.layers.features.processors.SymbolProcessor")],D)},98125:function(e,t,r){r.d(t,{x:function(){return C},B:function(){return T}});var n=r(74165),a=r(15861),i=r(98991),s=r(37762),u=r(15671),l=r(43144),o=r(80613),c=r(54815),f={marker:o.LW.MARKER,fill:o.LW.FILL,line:o.LW.LINE,text:o.LW.TEXT},p=function(){function e(t,r,n,a){(0,u.Z)(this,e);var i={minScale:null===r||void 0===r?void 0:r.minScale,maxScale:null===r||void 0===r?void 0:r.maxScale},l=function(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}(i);this.layers=t,this.data=r,this.hash=this._createHash()+l,this.rendererKey=n;var p,h={isOutline:!1,placement:null,symbologyType:o.mD.DEFAULT,vvFlags:n},d=(0,s.Z)(t);try{for(d.s();!(p=d.n()).done;){var y=p.value,v=f[y.type];h.isOutline="line"===y.type&&y.isOutline,y.materialKey=(0,c.jj)(v,h),y.maxVVSize=a,y.scaleInfo=i,y.templateHash+=l}}catch(m){d.e(m)}finally{d.f()}}return(0,l.Z)(e,[{key:"type",get:function(){return"expanded-cim"}},{key:"_createHash",value:function(){var e,t="",r=(0,s.Z)(this.layers);try{for(r.s();!(e=r.n()).done;){t+=e.value.templateHash}}catch(n){r.e(n)}finally{r.f()}return t}}]),e}();var h=r(71277),d=r(10064),y=r(66978),v=r(35995),m=r(7575),b=r(53283),g=r(38048),k=r(19951);function _(e,t,r){return x.apply(this,arguments)}function x(){return x=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name){e.next=2;break}throw new d.Z("style-symbol-reference-name-missing","Missing name in style symbol reference");case 2:if(!t.styleName||"Esri2DPointSymbolsStyle"!==t.styleName){e.next=4;break}return e.abrupt("return",Z(t,a));case 4:return e.prev=4,e.t0=S,e.next=8,(0,g.n2)(t,r,a);case 8:return e.t1=e.sent,e.t2=t.name,e.t3=r,e.t4=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 15:return e.prev=15,e.t5=e.catch(4),e.abrupt("return",((0,y.r9)(e.t5),null));case 18:case"end":return e.stop()}}),e,null,[[4,15]])}))),x.apply(this,arguments)}function Z(e,t){return w.apply(this,arguments)}function w(){return w=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.wm.replaceAll(/\{SymbolName\}/gi,t.name),e.prev=1,e.next=4,(0,g.EJ)(a,r);case 4:return i=e.sent,e.abrupt("return",(0,g.KV)(i.data));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",((0,y.r9)(e.t0),null));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),w.apply(this,arguments)}function S(e,t,r,n){return M.apply(this,arguments)}function M(){return M=(0,a.Z)((0,n.Z)().mark((function e(t,r,a,i){var s,u,l,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s={portal:a&&null!=a.portal?a.portal:m.Z.getDefault(),url:(0,v.mN)(t.baseUrl),origin:"portal-item"},u=(0,k.getStyleItemFromStyle)(r,t.data)){e.next=3;break}throw new d.Z("symbolstyleutils:symbol-name-not-found","The symbol name '".concat(r,"' could not be found"),{symbolName:r});case 3:return l=(0,b.f)((0,g.v9)(u,"cimRef"),s),(0,h.XO)()&&(l=(0,h.pJ)(l)),e.prev=5,e.next=8,(0,g.EJ)(l,i);case 8:return o=e.sent,e.abrupt("return",(0,g.KV)(o.data));case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",((0,y.r9)(e.t0),null));case 15:case"end":return e.stop()}}),e,null,[[5,12]])}))),M.apply(this,arguments)}var I=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new i._(a,r),e.t0=p,e.next=4,s.analyzeSymbolReference(t.data,!1);case 4:return e.t1=e.sent,e.t2=t.data,e.t3=t.rendererKey,e.t4=t.maxVVSize,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();function T(e,t,r,n){return D.apply(this,arguments)}function D(){return D=(0,a.Z)((0,n.Z)().mark((function e(t,r,a,i){var s,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if("cim"!==t.type){e.next=4;break}return e.abrupt("return",I(t,r,a));case 4:if("web-style"!==t.type){e.next=21;break}return e.next=7,_(t,null,i);case 7:if(e.t1=s=e.sent,e.t0=null!==e.t1,!e.t0){e.next=11;break}e.t0=void 0!==s;case 11:if(!e.t0){e.next=15;break}e.t2=s,e.next=16;break;case 15:e.t2=void 0;case 16:return e.t3=e.t2,e.t4=t.rendererKey,e.t5=t.maxVVSize,u={type:"cim",data:e.t3,rendererKey:e.t4,maxVVSize:e.t5},e.abrupt("return",I(u,r,a));case 21:return e.abrupt("return",t);case 22:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function C(e){if(!e)return null;var t=e.avoidSDFRasterization,r=e.type,n=e.cim,a=e.url,i=e.materialHash,s=e.maxVVSize,u={cim:n,type:r,mosaicHash:i,url:a,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:t};switch(r){case"marker":s&&"size"in n&&(n.size=Math.max(s,n.size)),u.size=e.size,u.path=e.path,u.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":u.dashTemplate=e.dashTemplate;break;case"text":u.text=e.text,u.fontName=e.fontName}return u}}}]);
//# sourceMappingURL=1557.93cd4dcd.chunk.js.map